"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[2006],{52006:(s,e,a)=>{a.r(e),a.d(e,{default:()=>f});var o=a(65043),r=a(73033),d=a(20648),n=a(17392),l=a(42518),i=a(3632),t=a(43559),c=a(53193),w=a(47503),p=a(45543),h=a(18356),u=a(69859),m=a(51787),x=a(81673),j=(a(30064),a(85595)),A=a(71080),g=(a(55515),a(70579));const f=()=>{const s=r.Ik({oldpassword:r.Yj().required("Old Password is required"),password:r.Yj().required("New Password is required").min(8,"New Password must be at least 8 characters").matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]+$/,"New Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"),confirm_password:r.Yj().oneOf([r.KR("password"),null],"Passwords must match").required("Confirm New Password is required")}),{ErrorResponder:e}=(0,A.A)(),{userData:a,token:f}=(0,j.SF)(),[v,b]=o.useState(!1),[C,N]=o.useState(!1),[P,y]=o.useState(!1),_=s=>s(s=>!s),S=s=>{s.preventDefault()},k=(0,d.Wx)({initialValues:{oldpassword:"",password:"",confirm_password:""},validationSchema:s,onSubmit:async(s,o)=>{let{resetForm:r}=o;w.oR.loading(),w.oR.dismiss(),w.oR.loading("Updating Password please wait.");const d=new FormData;if(d.append("password",s.oldpassword),d.append("newpassword",s.password),d.append("type",a.type),d.append("email",a.email),f)try{200===(await p.DX.post("/auth/changepassword?id=".concat(a.id),d,{headers:{Authorization:f}})).status&&(w.oR.dismiss(),w.oR.success("Password Changed Successfully"),r())}catch(n){e(n)}r()}});return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("form",{onSubmit:k.handleSubmit,children:(0,g.jsxs)("div",{className:"row gy-4",children:[(0,g.jsx)("div",{className:"col-12 col-lg-6",children:(0,g.jsx)("h6",{children:"Change Account Password"})}),(0,g.jsx)("div",{className:"col-12 col-lg-6",children:(0,g.jsxs)("div",{className:"row g-3",children:[(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)(c.A,{variant:"outlined",fullWidth:!0,children:[(0,g.jsx)(h.A,{htmlFor:"outlined-adornment-password",children:"Old Password"}),(0,g.jsx)(u.A,{id:"oldpassword",label:"Old Password",name:"oldpassword",type:v?"text":"password",value:k.values.oldpassword,onChange:k.handleChange,error:k.touched.oldpassword&&Boolean(k.errors.oldpassword),endAdornment:(0,g.jsx)(m.A,{position:"end",children:(0,g.jsx)(n.A,{"aria-label":"toggle password visibility",onClick:()=>_(b),onMouseDown:S,edge:"end",children:v?(0,g.jsx)(t.A,{}):(0,g.jsx)(i.A,{})})})}),(0,g.jsx)(x.A,{className:"text-danger",children:k.touched.oldpassword&&k.errors.oldpassword})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)(c.A,{variant:"outlined",fullWidth:!0,children:[(0,g.jsx)(h.A,{htmlFor:"outlined-adornment-password",children:"Password"}),(0,g.jsx)(u.A,{id:"password",name:"password",label:"Password",type:C?"text":"password",value:k.values.password,onChange:k.handleChange,error:k.touched.password&&Boolean(k.errors.password),endAdornment:(0,g.jsx)(m.A,{position:"end",children:(0,g.jsx)(n.A,{"aria-label":"toggle password visibility",onClick:()=>_(N),onMouseDown:S,edge:"end",children:C?(0,g.jsx)(t.A,{}):(0,g.jsx)(i.A,{})})})}),(0,g.jsx)(x.A,{className:"text-danger",children:k.touched.password&&k.errors.password})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsxs)(c.A,{variant:"outlined",fullWidth:!0,children:[(0,g.jsx)(h.A,{htmlFor:"outlined-adornment-password",children:"Confirm Password"}),(0,g.jsx)(u.A,{id:"confirm_password",name:"confirm_password",label:"Confirm Password",type:P?"text":"password",value:k.values.confirm_password,onChange:k.handleChange,error:k.touched.confirm_password&&Boolean(k.errors.confirm_password),endAdornment:(0,g.jsx)(m.A,{position:"end",children:(0,g.jsx)(n.A,{"aria-label":"toggle password visibility",onClick:()=>_(y),onMouseDown:S,edge:"end",children:P?(0,g.jsx)(t.A,{}):(0,g.jsx)(i.A,{})})})}),(0,g.jsx)(x.A,{className:"text-danger",children:k.touched.confirm_password&&k.errors.confirm_password})]})}),(0,g.jsx)("div",{className:"col-12",children:(0,g.jsx)(l.A,{color:"warning",variant:"contained",className:"py-3",size:"large",fullWidth:!0,type:"submit",children:"Submit"})})]})})]})})})}}}]);
//# sourceMappingURL=2006.8810c025.chunk.js.map