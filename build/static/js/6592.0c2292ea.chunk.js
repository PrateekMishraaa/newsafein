"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[6592],{22505:(e,s,t)=>{var l=t(24994);s.A=void 0;var n=l(t(40039)),i=t(70579);s.A=(0,n.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},51387:(e,s,t)=>{t.d(s,{A:()=>i});var l=t(66734),n=t(70579);const i=(0,l.A)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},96592:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var l=t(89379),n=t(65043),i=t(68862),a=t(72557),o=(t(38421),t(67784)),d=t(18483),c=t(42518),r=t(22505),u=t(65324),h=t(45543),m=t(33438),x=t(66734),v=t(70579);const p=(0,x.A)((0,v.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-8.29 13.29c-.39.39-1.02.39-1.41 0L5.71 12.7a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41z"}),"CheckBoxRounded"),j=(0,x.A)((0,v.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank");var b=t(83560),f=t(51387);const g=(0,x.A)((0,v.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove");var N=t(20648),A=t(30064),y=t.n(A),C=t(23768);const w=function(){const[e,s]=n.useState({}),[t,x]=n.useState(),[A,w]=n.useState(2),[S,k]=n.useState([]),[q,O]=(0,n.useState)(),[T,z]=(0,n.useState)(!1),B=[];async function E(){try{const s=await h.hr.get("student/editPoll");var e;if(s)k(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.result)}catch(s){console.error(s)}}(0,n.useEffect)(()=>{E()},[]);const I=async(e,s,t)=>{y().fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sure"}).then(async l=>{if(l.isConfirmed)try{const l=await h.hr.post("student/editPoll?todo=".concat(s),{id:e,values:t});var n;if(l)C.oR.success(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message),E()}catch(i){console.error(i)}})};function P(t){var n,i;"ques"===t.target.name?x(t.target.value):s((0,l.A)((0,l.A)({},e),{},{[null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.name]:null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value}))}for(let l=1;l<=A;l++)B.push((0,v.jsx)("div",{style:{width:"400px"},children:(0,v.jsx)(o.A,{fullWidth:!0,className:"form-control my-2 input-group rounded",label:"Option "+l,required:!0,variant:"outlined",type:"text",name:"option"+l,onChange:P},l)}));const H=e=>{let{poll:s}=e;const t=Object(JSON.parse(s.options)),l=(0,N.Wx)({initialValues:{ques:s.poll_ques,role:s.role,option:t},onSubmit:e=>{I(s.id,"UPDATE",e).then(()=>{O()})}});return(0,v.jsxs)("div",{className:"card bg-gradient bg-opacity-75 postion-relative  m-1 p-2",children:[(0,v.jsx)("div",{className:"mx-auto position-absolute end-0 top-0  d-flex w-10 justify-content-around mt-3",children:(0,v.jsx)(d.A,{title:"Close",className:"mx-2",children:(0,v.jsx)(m.A,{style:{fontSize:"25px"},type:"button",onClick:()=>O()})})}),(0,v.jsxs)(i.A,{className:"container p-3",onSubmit:l.handleSubmit,children:[(0,v.jsxs)("div",{className:"mb-2",children:[(0,v.jsx)(o.A,{required:!0,className:"text-center",fullWidth:!0,multiline:!0,maxRows:4,label:"Question",name:"ques",value:l.values.ques,onChange:l.handleChange,variant:"outlined",type:"text"}),(0,v.jsx)("label",{htmlFor:"role",className:"fomr-label mt-2",children:"Role"}),(0,v.jsx)("input",{required:!0,className:"form-control",id:"role",name:"role",value:l.values.role,onChange:l.handleChange,variant:"outlined",type:"text"})]}),(0,v.jsx)("div",{children:(0,v.jsx)("div",{children:Object.values(t).map((e,s)=>(0,v.jsx)(o.A,{className:"fs-6 text-wrap mb-2",label:"Option "+(s+1),required:!0,type:"text",name:"option"+s,onChange:e=>{t["option"+(s+1)]=e.target.value},multiline:!0,maxRows:4,fullWidth:!0,size:"sm",variant:"outlined",defaultValue:e},s))})}),(0,v.jsx)("div",{className:"container text-center mt-2",children:(0,v.jsx)(c.A,{color:"success",variant:"contained",type:"submit",children:"Save"})})]})]})};return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"container",children:[(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,v.jsx)("h4",{children:"Manage Polls"}),(0,v.jsx)("button",{className:"btn btn-primary",onClick:()=>z(!0),children:"Add Poll"})]}),(0,v.jsx)("div",{className:"row row-cols-1 row-cols-lg-2 g-3",children:null===S||void 0===S?void 0:S.map(e=>(0,v.jsxs)("div",{className:"col",children:[q!==e.id&&(0,v.jsxs)("div",{className:"card p-3 position-relative rounded-3 h-100",onMouseOver:()=>{return s=e.id,void document.getElementById("edit".concat(s)).classList.remove("d-none");var s},onMouseLeave:()=>{return s=e.id,void document.getElementById("edit".concat(s)).classList.add("d-none");var s},children:[(0,v.jsx)("div",{id:"edit"+e.id,className:" position-absolute end-0 border rounded-start d-none bg-light bg-gradient bg-opacity-75 shadow-lg",children:(0,v.jsxs)("div",{className:" position-static py-2",children:[(0,v.jsx)("div",{className:"m-2",children:"ACTIVE"===(null===e||void 0===e?void 0:e.status)?(0,v.jsx)(p,{sx:{color:"green"},onClick:()=>I(e.id,"STATUS_INACTIVE")}):(0,v.jsx)(j,{sx:{color:"grey"},onClick:()=>I(e.id,"STATUS_ACTIVE")})}),(0,v.jsx)("div",{children:(0,v.jsx)(b.A,{className:"m-2",sx:{color:"black"},onClick:()=>O(e.id)})}),(0,v.jsx)("div",{className:"m-2",children:(0,v.jsx)(f.A,{sx:{color:"red"},onClick:()=>I(e.id,"DELETE")})})]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h6",{children:null===e||void 0===e?void 0:e.poll_ques}),(0,v.jsxs)("small",{className:"border p-1 rounded bg-light d-inline-block mb-2",children:["Roles : ",null===e||void 0===e?void 0:e.role]})]}),(0,v.jsx)("div",{className:"px-2",children:Object.values(JSON.parse(e.options)).map((e,s)=>(0,v.jsxs)("p",{className:"lh-1 fs-6 mb-2",children:[(0,v.jsx)("span",{children:s+1+". "}),e]},s))})]},e.id),(0,v.jsx)("div",{children:q===e.id&&(0,v.jsx)(H,{poll:e})})]}))})]}),(0,v.jsxs)(a.A,{show:T,onHide:()=>z(!1),children:[(0,v.jsx)(a.A.Header,{closeButton:!0,children:(0,v.jsx)(a.A.Title,{children:"Add Poll"})}),(0,v.jsx)(a.A.Body,{children:(0,v.jsxs)(i.A,{onSubmit:s=>{s.preventDefault(),(async s=>{try{t&&e?await h.hr.put("/admin/createPoll",{question:t,options:JSON.stringify(e)})&&((0,u.z)("success","Poll Created.."),s.target.reset(),E()):u.g.warning({title:"All Input Fields Required!!"})}catch(l){console.error(l)}})(s)},children:[(0,v.jsx)("div",{className:"input-group mb-2",children:(0,v.jsx)(o.A,{required:!0,className:"text-center",fullWidth:!0,multiline:!0,rows:4,id:"outlined-basic",label:"Enter Question Here!",variant:"outlined",type:"text",name:"ques",onChange:P})}),(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:"w-20 d-flex justify-content-center text-center item-center",children:[(0,v.jsx)(c.A,{className:"py-1 px-5 m-1 rounded rounded-pill",onClick:()=>{w(A+1)},size:"small",variant:"outlined",disabled:8===A,startIcon:(0,v.jsx)(r.A,{}),children:"OPTION"}),(0,v.jsx)(c.A,{className:"py-1 px-5 m-1 rounded rounded-pill",onClick:()=>{w(A-1),delete e["option".concat(A)]},size:"small",variant:"outlined",disabled:2===A,startIcon:(0,v.jsx)(g,{}),children:"OPTION"})]})}),(0,v.jsx)("div",{children:(0,v.jsx)("div",{className:"rounded mt-2 d-flex justify-content-around flex-wrap px-2 mx-auto",children:B})}),(0,v.jsx)("div",{className:"mx-auto d-flex justify-content-center",children:(0,v.jsx)("button",{className:"btn btn-success",type:"submit",children:"Create Poll"})})]})})]})]})}}}]);
//# sourceMappingURL=6592.0c2292ea.chunk.js.map