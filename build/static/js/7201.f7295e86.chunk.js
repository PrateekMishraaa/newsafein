"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[1220,7201],{51220:(e,l,a)=>{a.r(l),a.d(l,{default:()=>b});var s=a(45543),i=a(65043),r=a(81045),o=a(42518),t=a(85595),n=a(73216),d=a(21179),c=a(13127),u=a(71080),h=a(71110),v=a.n(h);var m=a(47503),p=a(57313),x=a(70579);const b=()=>{const{token:e}=(0,t.SF)(),{fullDetails:l,fetchDetails:a}=(0,n.KC)(),[h,b]=i.useState(""),{ErrorResponder:g}=(0,u.A)();return(0,x.jsxs)("div",{className:"row row-cols-1 row-cols-lg-2 mb-3 g-2",children:[(0,x.jsx)("div",{className:"col",children:(0,x.jsx)("h6",{children:"Profile Picture"})}),(0,x.jsx)("div",{className:"col",children:(0,x.jsxs)("form",{onSubmit:async function(l){if(l.preventDefault(),m.oR.loading("Updating...."),null!==h&&void 0!==h&&h.size&&h.size<5169186){const l=new FormData;if(l.append("file",h),e)try{const i=await s.DX.put("/student/profile?update_type=profile_pic",l,{headers:{Authorization:e}});200===i.status&&(a(),m.oR.dismiss(),m.oR.success(i.data.message))}catch(i){g(i)}else m.oR.dismiss()}else h.size>=5169186?(m.oR.dismiss(),m.oR.warning("Max 5mb is allowed")):(m.oR.dismiss(),m.oR.warning("Image not selected!"))},className:"d-flex align-items-center justify-content-between",children:[(0,x.jsx)(r.A,{alt:"",name:"profilepic",className:"rounded ms-0",src:h?URL.createObjectURL(h):null===l||void 0===l?void 0:l.profile,sx:{width:80,height:80}}),(0,x.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[(0,x.jsxs)(p.Ay,{color:"success","aria-label":"upload picture",component:"label",children:[(0,x.jsx)("input",{hidden:!0,name:"profile",accept:".png, .jpg, .jpeg",type:"file",onChange:e=>b(function(e){if(e){let a=1e3*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:20)/e.size;var{file:l}=new(v())(e,{quality:a,success:e=>{let l=new FormData;return l.append("file",e,e.name),l.get("file")}});return l}}(e.target.files[0]))}),(0,x.jsx)(d.A,{})]}),(0,x.jsx)(o.A,{startIcon:(0,x.jsx)(c.A,{}),color:"success",variant:"outlined",className:"ms-2 rounded-3",size:"large",type:"submit",children:"Upload Profile Pic"})]})]})})]})}},54420:(e,l,a)=>{a.d(l,{s:()=>r});class s extends Error{}function i(e){let l=e.replace(/-/g,"+").replace(/_/g,"/");switch(l.length%4){case 0:break;case 2:l+="==";break;case 3:l+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,l)=>{let a=l.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}(l)}catch(a){return atob(l)}}function r(e,l){if("string"!==typeof e)throw new s("Invalid token specified: must be a string");l||(l={});const a=!0===l.header?0:1,r=e.split(".")[a];if("string"!==typeof r)throw new s("Invalid token specified: missing part #".concat(a+1));let o;try{o=i(r)}catch(t){throw new s("Invalid token specified: invalid base64 for part #".concat(a+1," (").concat(t.message,")"))}try{return JSON.parse(o)}catch(t){throw new s("Invalid token specified: invalid json for part #".concat(a+1," (").concat(t.message,")"))}}s.prototype.name="InvalidTokenError"},77201:(e,l,a)=>{a.r(l),a.d(l,{default:()=>L});var s=a(45543),i=a(20648),r=a(65043),o=a(30064),t=a.n(o),n=a(73033),d=a(14256),c=a(57972),u=a(53193),h=a(59182),v=a(67784),m=a(73216),p=a(85595),x=a(71080),b=a(47503),g=a(51787),f=a(81673),j=a(86178),w=a.n(j),k=a(43640),N=a(28458),A=a(51982),C=a(57525),y=a(35835),I=a(54420),_=a(51220),P=a(70579);const R=n.Ik().shape({first_name:n.Yj().max(100).required("First Name is Required"),last_name:n.Yj().max(100).required("Last Name is Required"),contact:n.Yj().required("Phone Number is Required").matches(/^[0-9]{10}$/,"Invalid Mobile Number"),email:n.Yj().email().required("Email is required"),dob:n.Yj().required("Pin code is Required"),father_name:n.Yj().max(100).required("Father Name is Required"),fb:n.Yj().matches(/(www.facebook.com)/,"facebook profile url must match www.facebook.com"),twitter:n.Yj().matches(/(www.twitter.com)/,"twitter profile url must match www.twitter.com"),insta:n.Yj().matches(/(www.instagram.com)/,"Instagram profile url must match www.instagram.com"),lkd:n.Yj().matches(/(www.linkedin.com)/,"Linkedin profile url must match www.linkedin.com"),ytb:n.Yj().matches(/(www.youtube.com)/,"Youtube profile url must match www.youtube.com"),bio:n.Yj().max(250,"Too long! ( max 250 characters )").required("Bio is required"),address:n.Yj().required("Institution Address is required"),state:n.Yj().max(200).required("State is required"),pincode:n.Yj().required("Pin code is Required").matches(/^[0-9]{6}$/,"Invalid Pin code")}),L=()=>{var e,l,a,o,n,j,L,z,q,B,Y,S,W,T,D,F,E,M,U,O,G;const{ErrorResponder:H}=(0,x.A)(),{token:K}=(0,p.SF)(),{fullDetails:V}=(0,m.KC)(),[$,J]=(0,r.useState)([]),[X,Q]=(0,r.useState)([]),[Z,ee]=(0,r.useState)([]),le=(0,i.Wx)({initialValues:{first_name:null===V||void 0===V?void 0:V.first_name,last_name:null===V||void 0===V?void 0:V.last_name,contact:null===V||void 0===V?void 0:V.contact,email:null===V||void 0===V?void 0:V.email,dob:null===V||void 0===V||null===(e=V.dob)||void 0===e?void 0:e.slice(0,10),father_name:null===V||void 0===V?void 0:V.father_name,gender:null===V||void 0===V?void 0:V.gender,fb:null===V||void 0===V?void 0:V.fb,twitter:null===V||void 0===V?void 0:V.twitter,insta:null===V||void 0===V?void 0:V.insta,lkd:null===V||void 0===V?void 0:V.lkd,ytb:null===V||void 0===V?void 0:V.ytb,bio:null===V||void 0===V?void 0:V.bio,address:null===V||void 0===V?void 0:V.address,state:(null===V||void 0===V?void 0:V.state)||"",district:null===V||void 0===V?void 0:V.district,pincode:null===V||void 0===V?void 0:V.pincode},enableReinitialize:!0,validationSchema:R,onSubmit:async e=>{if(b.oR.loading("Loading...."),K)try{const l=await s.hr.put("/student/profile",e,{headers:{Authorization:K}});200===l.status&&(b.oR.dismiss(),b.oR.success(l.data.message))}catch(l){l&&t().fire({width:400,title:l.response.data.message?l.response.data.message:"Something Went Wrong Check  your Network Connection",icon:"error"}),H(l)}}});(0,r.useEffect)(()=>{const e=localStorage.getItem("token");if(e){const l=(0,I.s)(e);console.log("Decoded Token:",l.data),ee(l.data)}},[]);return(0,r.useEffect)(()=>{(async()=>{try{const l=await s.FH.get("/v2/public/state");var e;200===l.status&&J(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.states)}catch(i){var l,a;b.oR.error(null===i||void 0===i||null===(l=i.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)}})()},[]),(0,r.useEffect)(()=>{var e;(async e=>{try{var l;const i=await s.FH.get("/v2/public/district?state=".concat(e));var a;"success"===(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.status)&&Q(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.district)}catch(o){var i,r;b.oR.error(null===o||void 0===o||null===(i=o.response)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.message)}})((null===le||void 0===le||null===(e=le.values)||void 0===e?void 0:e.state)||"")},[null===le||void 0===le||null===(l=le.values)||void 0===l?void 0:l.state]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(_.default,{}),(0,P.jsx)("form",{onSubmit:le.handleSubmit,children:(0,P.jsxs)("div",{className:"row row-cols-1 row-cols-lg-2 g-2 gy-4",children:[(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Full Name"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsxs)("div",{className:"row row cols-1 row-cols-lg-2 g-2",children:[(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"first_name",name:"first_name",label:"First Name",size:"large",disabled:!0,value:Z.first_name,InputLabelProps:{shrink:!0},onChange:le.handleChange,error:le.touched.first_name&&Boolean(le.errors.first_name),helperText:le.touched.first_name&&le.errors.first_name})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"last_name",name:"last_name",label:"Last Name",size:"large",value:Z.last_name,disabled:!0,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.last_name&&Boolean(le.errors.last_name),helperText:le.touched.last_name&&le.errors.last_name})})]})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Contact Number"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"contact",name:"contact",label:"Contact",size:"large",value:Z.contact||"null",onChange:le.handleChange,disabled:!0,InputLabelProps:{shrink:!0},error:le.touched.contact&&Boolean(le.errors.contact),helperText:le.touched.contact&&le.errors.contact})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Email Address"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"email",name:"email",label:"Email Address",size:"large",value:Z.email,onChange:le.handleChange,InputLabelProps:{shrink:!0},disabled:!0,error:le.touched.email&&Boolean(le.errors.email),helperText:le.touched.email&&le.errors.email})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Role"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"Role",name:"Role",label:"Role",size:"large",value:Z.role,onChange:le.handleChange,InputLabelProps:{shrink:!0},disabled:!0,error:le.touched.email&&Boolean(le.errors.email),helperText:le.touched.email&&le.errors.email})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Date Of Birth"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"dob",name:"dob",type:"date",inputProps:{max:w()().format("YYYY-MM-DD")},label:"Date of Birth",size:"large",value:le.values.dob,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.dob&&Boolean(le.errors.dob),helperText:le.touched.dob&&le.errors.dob})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Guardian Name"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"father_name",name:"father_name",label:"Guardian Name",size:"large",value:le.values.father_name,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.father_name&&Boolean(le.errors.father_name),helperText:le.touched.father_name&&le.errors.father_name})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Gender"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(u.A,{children:(0,P.jsxs)(c.A,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:le.values.gender,id:"gender",name:"gender",onChange:le.handleChange,InputLabelProps:{shrink:!0},row:!0,children:[(0,P.jsx)(h.A,{value:"female",control:(0,P.jsx)(d.A,{}),label:"Female",checked:"female"===le.values.gender}),(0,P.jsx)(h.A,{value:"male",control:(0,P.jsx)(d.A,{}),label:"Male",checked:"male"===le.values.gender}),(0,P.jsx)(h.A,{value:"other",control:(0,P.jsx)(d.A,{}),label:"Other",checked:"other"===le.values.gender})]})})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Social Media Links"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsxs)("div",{className:"row row-cols-1 row-cols-lg-2 g-2",children:[(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"fb",name:"fb",label:"Facebook",size:"large",type:"url",value:null===le||void 0===le||null===(a=le.values)||void 0===a?void 0:a.fb,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.fb&&Boolean(le.errors.fb),helperText:le.touched.fb&&le.errors.fb,InputProps:{startAdornment:(0,P.jsxs)(g.A,{position:"start",children:[(0,P.jsx)(k.A,{sx:{color:"blue"}})," "]})}})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"twitter",name:"twitter",label:"Twitter",size:"large",type:"url",value:null===le||void 0===le||null===(o=le.values)||void 0===o?void 0:o.twitter,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.twitter&&Boolean(le.errors.twitter),helperText:le.touched.twitter&&le.errors.twitter,InputProps:{startAdornment:(0,P.jsxs)(g.A,{position:"start",children:[(0,P.jsx)(C.A,{sx:{color:"skyblue"}})," "]})}})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"insta",name:"insta",label:"Instagram",size:"large",type:"url",value:null===le||void 0===le||null===(n=le.values)||void 0===n?void 0:n.insta,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.insta&&Boolean(le.errors.insta),helperText:le.touched.insta&&le.errors.insta,InputProps:{startAdornment:(0,P.jsxs)(g.A,{position:"start",children:[(0,P.jsx)(N.A,{sx:{color:"red"}})," "]})}})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"lkd",name:"lkd",label:"LinkedIn",size:"large",type:"url",value:null===le||void 0===le||null===(j=le.values)||void 0===j?void 0:j.lkd,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.lkd&&Boolean(le.errors.lkd),helperText:le.touched.lkd&&le.errors.lkd,InputProps:{startAdornment:(0,P.jsxs)(g.A,{position:"start",children:[(0,P.jsx)(A.A,{sx:{color:"blue"}})," "]})}})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"ytb",name:"ytb",label:"Youtube",size:"large",type:"url",value:null===le||void 0===le||null===(L=le.values)||void 0===L?void 0:L.ytb,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.ytb&&Boolean(le.errors.ytb),helperText:le.touched.ytb&&le.errors.ytb,InputProps:{startAdornment:(0,P.jsxs)(g.A,{position:"start",children:[(0,P.jsx)(y.A,{sx:{color:"red"}})," "]})}})})]})}),(0,P.jsxs)("div",{className:"col",children:[(0,P.jsx)("h6",{children:"About"}),(0,P.jsxs)("p",{children:[null===le||void 0===le||null===(z=le.values)||void 0===z||null===(q=z.bio)||void 0===q?void 0:q.length," Characters ("," ",350-(null===le||void 0===le||null===(B=le.values)||void 0===B||null===(Y=B.bio)||void 0===Y?void 0:Y.length)," left)"]})]}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"bio",name:"bio",multiline:!0,rows:4,size:"large",value:null===le||void 0===le||null===(S=le.values)||void 0===S?void 0:S.bio,onChange:le.handleChange,error:le.touched.bio&&Boolean(le.errors.bio),helperText:le.touched.bio&&le.errors.bio})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsx)("h6",{children:"Address"})}),(0,P.jsx)("div",{className:"col",children:(0,P.jsxs)("div",{className:"row g-2",children:[(0,P.jsx)("div",{className:"col-12",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"address",name:"address",label:"Address",multiline:!0,rows:3,size:"large",value:null===le||void 0===le||null===(W=le.values)||void 0===W?void 0:W.address,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.address&&Boolean(le.errors.address),helperText:le.touched.address&&le.errors.address})}),(0,P.jsx)("div",{className:"col-12 col-lg-6",children:(0,P.jsxs)(u.A,{fullWidth:!0,children:[(0,P.jsx)("span",{id:"state-label",children:"State"}),(0,P.jsx)("select",{labelId:"state-label",id:"state",name:"state",value:null===le||void 0===le||null===(T=le.values)||void 0===T?void 0:T.state,onChange:le.handleChange,InputLabelProps:{shrink:!0},className:null!==le&&void 0!==le&&le.errors.state&&Boolean(null===le||void 0===le?void 0:le.touched.state)?"border-danger form-select py-3":" form-select py-3",children:null===$||void 0===$?void 0:$.map((e,l)=>(0,P.jsx)("option",{value:null===e||void 0===e?void 0:e.State,children:null===e||void 0===e?void 0:e.State},l))}),(0,P.jsx)(f.A,{className:"text-danger",children:(null===(D=le.touched)||void 0===D?void 0:D.state)&&(null===(F=le.errors)||void 0===F?void 0:F.state)})]})}),(0,P.jsx)("div",{className:"col-12 col-lg-6",children:(0,P.jsxs)(u.A,{fullWidth:!0,children:[(0,P.jsx)("span",{id:"district-label",children:"District"}),(0,P.jsx)("select",{labelId:"district-label",id:"district",name:"district",value:null===(E=le.values)||void 0===E?void 0:E.district,onChange:le.handleChange,InputLabelProps:{shrink:!0},className:null!==le&&void 0!==le&&le.errors.district&&Boolean(null===le||void 0===le?void 0:le.touched.district)?"border-danger form-select py-3":" form-select py-3",children:Boolean(X.length)?null===X||void 0===X?void 0:X.map((e,l)=>(0,P.jsx)("option",{value:null===e||void 0===e?void 0:e.District,children:null===e||void 0===e?void 0:e.District},l)):(0,P.jsx)("option",{value:null===(M=le.values)||void 0===M?void 0:M.state,children:null===(U=le.values)||void 0===U?void 0:U.state})}),(0,P.jsx)(f.A,{className:"text-danger",children:(null===(O=le.touched)||void 0===O?void 0:O.district)&&(null===(G=le.errors)||void 0===G?void 0:G.district)})]})}),(0,P.jsx)("div",{className:"col-12 col-lg-6",children:(0,P.jsx)(v.A,{fullWidth:!0,id:"pincode",name:"pincode",label:"Pin Code",size:"large",value:le.values.pincode,onChange:le.handleChange,InputLabelProps:{shrink:!0},error:le.touched.pincode&&Boolean(le.errors.pincode),helperText:le.touched.pincode&&le.errors.pincode})})]})})]})})]})}}}]);
//# sourceMappingURL=7201.f7295e86.chunk.js.map