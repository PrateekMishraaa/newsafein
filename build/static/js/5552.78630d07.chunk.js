"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[5552],{75552:(s,e,a)=>{a.r(e),a.d(e,{default:()=>v});var r=a(65043),o=a(20648),d=a(42518),n=a(45543),i=a(85595),l=a(17392),t=a(3632),c=a(43559),w=a(53193),p=a(18356),h=a(69859),m=a(51787),u=a(81673),x=a(71080),j=a(47503),g=a(73033),A=a(70579);const v=()=>{const s=g.Ik({oldpassword:g.Yj().required("Old Password is required"),password:g.Yj().required("New Password is required").min(8,"New Password must be at least 8 characters").matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]+$/,"New Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"),confirm_password:g.Yj().oneOf([g.KR("password"),null],"Passwords must match").required("Confirm New Password is required")}),{userData:e,token:a}=(0,i.SF)(),{ErrorResponder:v}=(0,x.A)(),[f,b]=r.useState(!1),[N,C]=r.useState(!1),[y,P]=r.useState(!1),_=s=>s(s=>!s),k=s=>{s.preventDefault()},R=(0,o.Wx)({initialValues:{oldpassword:"",password:"",confirm_password:""},validationSchema:s,onSubmit:async(s,r)=>{let{resetForm:o}=r;j.oR.dismiss(),j.oR.loading("Updating Password please wait.");const d=new FormData;if(d.append("password",s.oldpassword),d.append("newpassword",s.password),d.append("type",e.type),d.append("email",e.email),a)try{var i;const s=await n.DX.post("/auth/changepassword?id=".concat(e.id),d,{headers:{Authorization:a}});switch(null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.status){case"success":j.oR.dismiss(),j.oR.success(s.data.message),o();break;case"warning":j.oR.dismiss(),j.oR.warning(s.data.message);break;case"error":j.oR.dismiss(),j.oR.error(s.data.message);break;default:j.oR.dismiss(),(0,j.oR)(s.data.message)}}catch(l){v(l)}o()}});return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("form",{onSubmit:R.handleSubmit,children:(0,A.jsxs)("div",{className:"row justify-content-between  gy-4 mt-2",children:[(0,A.jsx)("div",{className:"col-12 col-lg-6",children:(0,A.jsx)("h6",{children:"Change Account Password"})}),(0,A.jsx)("div",{className:"col-12 col-lg-6",children:(0,A.jsxs)("div",{className:"row g-2",children:[(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)(w.A,{variant:"outlined",fullWidth:!0,children:[(0,A.jsx)(p.A,{htmlFor:"outlined-adornment-password",children:"Old Password"}),(0,A.jsx)(h.A,{id:"oldpassword",name:"oldpassword",label:"Old Password",type:f?"text":"password",value:R.values.oldpassword,onChange:R.handleChange,error:R.touched.oldpassword&&Boolean(R.errors.oldpassword),endAdornment:(0,A.jsx)(m.A,{position:"end",children:(0,A.jsx)(l.A,{"aria-label":"toggle password visibility",onClick:()=>_(b),onMouseDown:k,edge:"end",children:f?(0,A.jsx)(c.A,{}):(0,A.jsx)(t.A,{})})})}),(0,A.jsx)(u.A,{className:"text-danger",children:R.touched.oldpassword&&R.errors.oldpassword})]})}),(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)(w.A,{variant:"outlined",fullWidth:!0,children:[(0,A.jsx)(p.A,{htmlFor:"outlined-adornment-password",children:"New Password"}),(0,A.jsx)(h.A,{id:"password",name:"password",label:"New Password",type:N?"text":"password",value:R.values.password,onChange:R.handleChange,error:R.touched.password&&Boolean(R.errors.password),endAdornment:(0,A.jsx)(m.A,{position:"end",children:(0,A.jsx)(l.A,{"aria-label":"toggle password visibility",onClick:()=>_(C),onMouseDown:k,edge:"end",children:N?(0,A.jsx)(c.A,{}):(0,A.jsx)(t.A,{})})})}),(0,A.jsx)(u.A,{className:"text-danger",children:R.touched.password&&R.errors.password})]})}),(0,A.jsx)("div",{className:"col-12",children:(0,A.jsxs)(w.A,{variant:"outlined",fullWidth:!0,children:[(0,A.jsx)(p.A,{htmlFor:"outlined-adornment-password",children:"Confirm New Password"}),(0,A.jsx)(h.A,{id:"confirm_password",name:"confirm_password",label:"Confirm New Password",type:y?"text":"password",value:R.values.confirm_password,onChange:R.handleChange,error:R.touched.confirm_password&&Boolean(R.errors.confirm_password),endAdornment:(0,A.jsx)(m.A,{position:"end",children:(0,A.jsx)(l.A,{"aria-label":"toggle password visibility",onClick:()=>_(P),onMouseDown:k,edge:"end",children:y?(0,A.jsx)(c.A,{}):(0,A.jsx)(t.A,{})})})}),(0,A.jsx)(u.A,{className:"text-danger",children:R.touched.confirm_password&&R.errors.confirm_password})]})}),(0,A.jsx)("div",{className:"col-12",children:(0,A.jsx)(d.A,{color:"warning",variant:"contained",className:"py-3",size:"large",fullWidth:!0,type:"submit",children:"Submit"})})]})})]})})})}}}]);
//# sourceMappingURL=5552.78630d07.chunk.js.map