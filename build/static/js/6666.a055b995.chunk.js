"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[6666],{6666:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var s=l(45543),i=l(65043),n=l(73216),o=l(28514),a=l(20648),d=l(65324),c=l(13412),r=l(33464),u=l(17392),h=l(30064),v=l.n(h),m=l(42744),x=l(86178),f=l.n(x),j=l(85595),p=l(70579);const g=function(){var e,t;let[l,o]=(0,i.useState)(!1),[h,x]=(0,i.useState)(!1),[g,b]=(0,i.useState)([]),[y,N]=(0,i.useState)(0),[C,w]=(0,i.useState)(),[A,k]=(0,i.useState)(),[S,I]=(0,i.useState)(),[_,D]=(0,i.useState)(!1);const{adminRoles:B}=(0,j.SF)();let R=(0,n.g)();(0,i.useEffect)(()=>{(async()=>{try{const l=await s.DX.get("admin/institute-resources/".concat(R.id));var e,t;console.log("admin/institute-resources/".concat(R.id)),200==l.status&&(console.log(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.result),b(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.result))}catch(l){console.log("All Quotes Error: ",l)}})()},[y]),console.log();const E=(0,a.Wx)({initialValues:{title:"",resource_link:"",resource_file:""},onSubmit:async function(e,t){if((0,d.z)("loading..."),console.log(e),e.title&&e.resource_link&&e.resource_file)try{200==(await s.DX.post("admin/institute-resources/".concat(R.id),e)).status&&(t.resetForm(),N(y+1))}catch(n){var l,i;(0,d.z)("error",null===n||void 0===n||null===(l=n.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)}else d.g.warning({title:"please fill all the fields"})}}),F=(0,a.Wx)({initialValues:{id:S||"",title:C||"",resource_link:A||"",resource_file:""},enableReinitialize:!0,onSubmit:async function(e,t){(0,d.z)("loading...");try{200==(await s.DX.put("admin/institute-resources",e)).status&&(t.resetForm(),N(y+1),d.g.success({title:"Data Updated Succesfully"}))}catch(n){var l,i;(0,d.z)("error",null===n||void 0===n||null===(l=n.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)}}});return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,p.jsx)("h4",{children:"Resources Table"}),(0,p.jsx)("button",{className:"btn btn-primary",hidden:!(1===B()),onClick:()=>{D(!_)},children:"Add Resources"})]}),(0,p.jsx)("div",{className:"resources-data table-responsive border rounded-3 mt-2",children:(0,p.jsxs)("table",{className:"table",children:[(0,p.jsx)("thead",{className:"table-danger",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col",children:"id"}),(0,p.jsx)("th",{scope:"col",children:"title"}),(0,p.jsx)("th",{scope:"col",children:"resource_link"}),(0,p.jsx)("th",{scope:"col",children:"resource_file"}),(0,p.jsx)("th",{scope:"col",children:"instituteId"}),(0,p.jsx)("th",{scope:"col",children:"createdAt"}),(0,p.jsx)("th",{scope:"col",children:"updatedAt"}),(0,p.jsx)("th",{hidden:5===B(),scope:"col",children:"action"})]})}),(0,p.jsx)("tbody",{children:null===g||void 0===g?void 0:g.map((e,t)=>(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:null===e||void 0===e?void 0:e.id}),(0,p.jsx)("td",{children:null===e||void 0===e?void 0:e.title}),(0,p.jsx)("td",{children:null===e||void 0===e?void 0:e.resource_link}),(0,p.jsxs)("td",{children:[" ",(0,p.jsx)("a",{href:null===e||void 0===e?void 0:e.resource_file,children:(0,p.jsx)(m.A,{})})," "]}),(0,p.jsx)("td",{children:null===e||void 0===e?void 0:e.instituteId}),(0,p.jsx)("td",{children:f()(null===e||void 0===e?void 0:e.createdAt).fromNow()}),(0,p.jsx)("td",{children:f()(null===e||void 0===e?void 0:e.updatedAt).fromNow()}),(0,p.jsxs)("td",{hidden:5===B(),children:[(0,p.jsx)(u.A,{onClick:()=>{w(null===e||void 0===e?void 0:e.title),k(null===e||void 0===e?void 0:e.resource_link),I(null===e||void 0===e?void 0:e.id),o(!0)},children:(0,p.jsx)(c.A,{})}),(0,p.jsx)(u.A,{hidden:3===B(),sx:{color:"tomato"},onClick:async()=>{v().fire({title:"Are you sure?",text:"You wanted to delete this Resouorce!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async t=>{if(t.isConfirmed)try{console.log(e.id);const t=await s.hr.delete("admin/institute-resources?id=".concat(null===e||void 0===e?void 0:e.id));200==(null===t||void 0===t?void 0:t.status)&&(v().fire({title:t.data.message,icon:"success"}),N(y+1))}catch(a){var l,i,n,o;v().fire({width:400,title:null!==a&&void 0!==a&&null!==(l=a.response)&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&i.message?null===a||void 0===a||null===(n=a.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message:"Something Went Wrong Check  your Network Connection",icon:"error"})}})},children:(0,p.jsx)(r.A,{})})]})]}))})]})}),_?(0,p.jsx)("div",{children:l?(0,p.jsxs)("div",{className:"border rounded-4 p-3 mt-4",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center justify-content-between p-4",children:[(0,p.jsx)("h2",{className:"fs-3",children:"Edit Resources"}),(0,p.jsx)("button",{className:"btn btn-primary col-2 me-1 mt-3 text-center",onClick:()=>{o(!1)},children:"Cancel"})]}),(0,p.jsxs)("form",{onSubmit:F.handleSubmit,children:[(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("label",{for:"id",class:"form-label",children:"id"}),(0,p.jsx)("input",{type:"text",name:"id",className:"form-control ",id:"id",value:F.values.id,onChange:E.handleChange})]}),(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("label",{for:"title",class:"form-label",children:"Title"}),(0,p.jsx)("input",{type:"text",name:"title",className:"form-control",value:null===F||void 0===F||null===(e=F.values)||void 0===e?void 0:e.title,id:"title",onChange:F.handleChange})]}),(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("label",{for:"upload-resources-link",class:"form-label",children:"Resource Link"}),(0,p.jsx)("input",{type:"text",name:"resource_link",className:"form-control",id:"upload-resources-link",value:null===F||void 0===F||null===(t=F.values)||void 0===t?void 0:t.resource_link,onChange:F.handleChange})]}),(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("label",{for:"upload-resources-file",class:"form-label",children:"Resource File"}),(0,p.jsx)("input",{type:"file",name:"resource_file",className:"form-control pt-3",id:"upload-resources-file",onChange:e=>{e.target.files.length&&F.setFieldValue("resource_file",e.target.files[0])}})]}),(0,p.jsx)("button",{type:"submit",class:"btn btn-primary",children:"Submit"})]})]}):(0,p.jsxs)("div",{hidden:!(1===B()),className:"border rounded-4 p-3 mt-4",children:[(0,p.jsx)("h2",{className:"fs-3",children:"Upload Resources"}),(0,p.jsxs)("form",{onSubmit:E.handleSubmit,children:[(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("label",{for:"title",class:"form-label",children:"Title"}),(0,p.jsx)("input",{type:"text",name:"title",className:"form-control ",id:"title",value:E.values.title,onChange:E.handleChange})]}),(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("label",{for:"upload-resources-link",class:"form-label",children:"Resource Link"}),(0,p.jsx)("input",{type:"text",name:"resource_link",className:"form-control ",id:"upload-resources-link",value:E.values.resource_link,onChange:E.handleChange})]}),(0,p.jsxs)("div",{class:"mb-3",children:[(0,p.jsx)("label",{for:"upload-resources-file",class:"form-label",children:"Resource File"}),(0,p.jsx)("input",{type:"file",name:"resource_file",className:"form-control pt-3",id:"upload-resources-file",onChange:e=>{e.target.files.length&&E.setFieldValue("resource_file",e.target.files[0])}})]}),(0,p.jsx)("button",{type:"submit",class:"btn btn-primary",children:"Submit"})]})]})}):""]})};var b=l(81045),y=l(6686),N=l(62290),C=l(5328),w=l(44304);const A=function(){var e,t;let[l,a]=(0,i.useState)(""),[d,c]=(0,i.useState)([]),[r,u]=(0,i.useState)([]),[h,v]=(0,i.useState)(),[m,x]=(0,i.useState)([]),[f,A]=(0,i.useState)(0),{adminRoles:k}=(0,j.SF)(),[S,I]=(0,i.useState)([]);const _=(0,n.Zp)();let D=(0,n.g)(),B=(0,n.zy)().pathname.split("/"),R=D.id;const E=async()=>{console.log(null===D||void 0===D?void 0:D.id);try{const e=await s.hr.get("admin/students/".concat(null===D||void 0===D?void 0:D.id));200==e.status&&c(null===e||void 0===e?void 0:e.data.result)}catch(e){console.log("All News Error: ",e)}};return(0,i.useEffect)(()=>{(async()=>{try{const t=await s.hr.get("admin/institute/".concat(D.id));var e;200==t.status&&a(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.result)}catch(t){console.log("All Error: ",t)}})(),E(),(async()=>{try{const t=await s.hr.get("admin/delegates/".concat(null===D||void 0===D?void 0:D.id));var e;200==t.status&&u(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.result)}catch(t){console.log("All News Error: ",t)}})(),(async()=>{try{const t=await s.hr.get("admin/institute-certificates/".concat(D.id));var e;200==t.status&&v(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.result)}catch(t){console.log("All certificates Error: ",t)}})()},[S]),(0,i.useEffect)(()=>{!async function(){try{const t=await s.DX.get("admin/institute-affiliate/".concat(D.id));var e;200==t.status&&x(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.result)}catch(t){console.log("All Errors: ",t)}}(),E()},[f]),(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"container py-3",children:[(0,p.jsxs)("div",{className:"d-flex flex-column flex-lg-row align-items-center justify-content-between mb-3",children:[(0,p.jsxs)("div",{className:"d-flex align-items-start mb-2",children:[(0,p.jsx)(b.A,{src:l.logo,className:"rounded-0",children:(0,p.jsx)(o.A,{})}),(0,p.jsxs)("div",{className:"px-2",children:[(0,p.jsxs)("h4",{className:"m-0 lh-sm",children:["\xa0",null===l||void 0===l?void 0:l.institution_name]}),(0,p.jsxs)("small",{children:["\xa0",null===l||void 0===l?void 0:l.district,",",null===l||void 0===l?void 0:l.state,",",null===l||void 0===l?void 0:l.pincode]})]})]}),"affiliate-institutes"!==B[2]?(0,p.jsxs)("div",{className:"d-flex justify-content-end mb-2",children:[(0,p.jsx)("button",{hidden:5===k(),className:"btn me-1",onClick:()=>{_("/admin/editdetail/institute/"+R)},type:"button",children:"Edit Details"}),null!==(e=m[0])&&void 0!==e&&e.instituteId?(0,p.jsx)("button",{hidden:5===k(),className:"btn btn-primary m-3 ",onClick:()=>{var e;(0,y.M)(null===(e=m[0])||void 0===e?void 0:e.id,()=>{A(f+1)})},type:"button",children:"Remove Affiliate Institute"}):(0,p.jsx)("button",{hidden:5===k(),className:"btn",onClick:()=>{(0,y.$)(D.id,()=>{A(f+1)})},type:"button",children:"Affiliate to Institute"}),(null===(t=m[0])||void 0===t?void 0:t.instituteId)==(null===D||void 0===D?void 0:D.id)?(0,p.jsx)("p",{className:"fs-3 mt-4",children:"This Institute is Affiliated"}):""]}):""]}),(0,p.jsxs)(N.A,{defaultActiveKey:"detail",id:"institute-detail-tab",className:"my-3 settings-navs",children:[(0,p.jsx)(C.A,{eventKey:"detail",title:(0,p.jsx)("small",{children:"Details"}),children:(0,p.jsx)(w.InstituteDetail,{datas:l,dataStudent:d,dataDelegates:r,certificatesByInstitutes:h})}),(0,p.jsx)(C.A,{eventKey:"students-data",title:(0,p.jsx)("small",{children:"Users Data"}),children:(0,p.jsx)(w.AdminInstituteStudents,{})}),(0,p.jsx)(C.A,{eventKey:"gallery",title:(0,p.jsx)("small",{children:"Gallery"}),children:(0,p.jsx)(w.AdminInstituteGallery,{})}),(0,p.jsx)(C.A,{eventKey:"resources",title:(0,p.jsx)("small",{children:"Institute Resources"}),children:(0,p.jsx)(g,{})}),(0,p.jsx)(C.A,{eventKey:"certificates",title:(0,p.jsx)("small",{children:"Certificates Data"}),children:(0,p.jsx)(w.CertificateData,{certificatesByInstitutes:h,idToSend:R})}),(0,p.jsx)(C.A,{eventKey:"participants-data",title:(0,p.jsx)("small",{children:"Participants Data"}),children:(0,p.jsx)("div",{className:"delegates-data m-3 table-responsive",children:(0,p.jsxs)("table",{className:"table table-borderless",children:[(0,p.jsx)("thead",{className:"table-light",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{scope:"col",className:"p-3 px-2",children:"ID"}),(0,p.jsx)("th",{scope:"col",className:"p-3 px-2",children:"StudentId"}),(0,p.jsx)("th",{scope:"col",className:"p-3 px-2",children:"DesignationId"}),(0,p.jsx)("th",{scope:"col",className:"p-3 px-2",children:"CountryId"})]})}),(0,p.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((e,t)=>(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"p-3 px-2",scope:"row",children:null===e||void 0===e?void 0:e.id}),(0,p.jsx)("td",{className:"p-3 px-2",children:null===e||void 0===e?void 0:e.studentId}),(0,p.jsx)("td",{className:"p-3 px-2",children:null===e||void 0===e?void 0:e.designationId}),(0,p.jsx)("td",{className:"p-3 px-2",children:null===e||void 0===e?void 0:e.countryId})]})}))})]})})})]})]})})}},6686:(e,t,l)=>{l.d(t,{$:()=>o,M:()=>a});var s=l(45543),i=l(30064),n=l.n(i);async function o(e,t){n().fire({title:"Are you sure?",text:"You wanted to Affiliate this Institute",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(async l=>{if(console.log(l),l.isConfirmed){console.log(l);try{const l=await s.DX.post("admin/institute-affiliate/".concat(e));200===l.status&&(n().fire({title:l.data.message,icon:"success"}),t())}catch(c){var i,o,a,d;n().fire({width:400,title:null!==c&&void 0!==c&&null!==(i=c.response)&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.message?null===c||void 0===c||null===(a=c.response)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message:"Something Went Wrong Check  your Network Connection",icon:"error"})}}})}async function a(e,t){console.log("ID ::::  ",e),n().fire({title:"Are you sure?",text:"You wanted to remove this institute!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(async l=>{if(console.log(l),l.isConfirmed){console.log(l);try{const l=await s.DX.delete("admin/institute-affiliate?id="+e);console.log("del"),200===l.status&&(n().fire({title:l.data.message,icon:"success"}),console.log(l),t())}catch(c){var i,o,a,d;n().fire({width:400,title:null!==c&&void 0!==c&&null!==(i=c.response)&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.message?null===c||void 0===c||null===(a=c.response)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message:"Something Went Wrong Check  your Network Connection",icon:"error"})}}})}}}]);
//# sourceMappingURL=6666.a055b995.chunk.js.map