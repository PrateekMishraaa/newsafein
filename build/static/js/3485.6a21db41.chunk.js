"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[3485],{3485:(e,l,s)=>{s.r(l),s.d(l,{default:()=>oe});var a=s(45543),i=s(65043),t=s(47503),d=s(12110),n=s(79958),o=s(26494),r=s(81045),c=s(64851),m=s(33464),h=s(36260),x=s(51214),u=s(48262),v=s(80564),j=s(32674),g=s(30064),p=s.n(g),b=s(18483),f=s(27600),N=s(42518),A=s(85595),y=s(35721),w=s(30681),k=s(23851),C=s(26353),_=s(17392),S=s(86178),D=s.n(S),F=s(26762),z=s(43640),E=s(28458),Y=s(57525),R=s(51982),T=s(35835),B=s(70579);const M=e=>{let{student:l,ApplyForParticipation:s}=e;return(0,B.jsx)("div",{id:"ProfileModal"+(null===l||void 0===l?void 0:l.id),className:"modal",tabIndex:"-1",children:(0,B.jsx)("div",{className:"modal-dialog p-0 modal-lg",style:{backgroundColor:"transparent"},children:(0,B.jsx)("div",{className:"modal-content bg-light border rounded-4 border-2",children:(0,B.jsxs)("div",{className:"modal-body p-0",children:[(0,B.jsxs)("div",{className:"shadow-sm",children:[(0,B.jsx)("button",{type:"button",className:"btn-close bg-white p-2 text-dark p-absolute","data-bs-dismiss":"modal",style:{top:"10px",right:"10px",zIndex:2e3},"aria-label":"Close"}),(0,B.jsxs)("div",{className:"d-flex align-items-center justify-content-start p-2 p-lg-3",children:[(0,B.jsx)("div",{className:"",children:(0,B.jsx)("div",{className:" p-2",children:(0,B.jsx)(r.A,{alt:null===l||void 0===l?void 0:l.first_name,className:"shadow-lg",src:null===l||void 0===l?void 0:l.profile,sx:{width:106,height:106,backgroundColor:"tomato"},"data-bs-toggle":"modal","data-bs-target":"#ProfileModal"+(null===l||void 0===l?void 0:l.id)})})}),(0,B.jsx)("div",{className:"",children:(0,B.jsxs)("div",{className:"p-2",children:[(0,B.jsxs)("h4",{className:"text-dark",children:[null===l||void 0===l?void 0:l.first_name," ",null===l||void 0===l?void 0:l.last_name," ",null===l||void 0===l?void 0:l.middle_name]}),(null===l||void 0===l?void 0:l.assigned_flag)&&(0,B.jsxs)("small",{className:"d-inline-block mb-1 me-1 text-center border p-1 px-2 rounded-2 text-dark",children:[(0,B.jsx)("img",{width:20,src:null===l||void 0===l?void 0:l.assigned_flag,alt:null===l||void 0===l?void 0:l.assigned_flag})," ",null===l||void 0===l?void 0:l.assigned_country]}),(null===l||void 0===l?void 0:l.assigned_designation)&&(0,B.jsxs)("small",{className:"d-inline-block mb-1 me-1 text-center border me-1 mb-1 p-1 px-2 rounded-2  text-dark",children:[(0,B.jsx)(F.A,{sx:{color:"blue",fontSize:20}})," ",null===l||void 0===l?void 0:l.assigned_designation]}),(0,B.jsxs)("div",{className:"mt-2",children:[(null===l||void 0===l?void 0:l.fb)&&(0,B.jsx)(_.A,{target:"_blank",href:null===l||void 0===l?void 0:l.fb,className:"text-secondary me-1 bg-white shadow-sm",children:(0,B.jsx)(z.A,{className:"fs-6"})}),(null===l||void 0===l?void 0:l.insta)&&(0,B.jsx)(_.A,{target:"_blank",href:null===l||void 0===l?void 0:l.insta,className:"text-secondary mx-1 bg-white shadow-sm",children:(0,B.jsx)(E.A,{className:"fs-6"})}),(null===l||void 0===l?void 0:l.twitter)&&(0,B.jsx)(_.A,{target:"_blank",href:null===l||void 0===l?void 0:l.twitter,className:"text-secondary mx-1 bg-white shadow-sm",children:(0,B.jsx)(Y.A,{className:"fs-6"})}),(null===l||void 0===l?void 0:l.lkd)&&(0,B.jsx)(_.A,{target:"_blank",href:null===l||void 0===l?void 0:l.lkd,className:"text-secondary mx-1 bg-white shadow-sm",children:(0,B.jsx)(R.A,{className:"fs-6"})}),(null===l||void 0===l?void 0:l.ytb)&&(0,B.jsx)(_.A,{target:"_blank",href:null===l||void 0===l?void 0:l.ytb,className:"text-secondary mx-1 bg-white shadow-sm",children:(0,B.jsx)(T.A,{className:"fs-6"})})]})]})})]})]}),(0,B.jsx)("div",{className:"container p-3",children:(0,B.jsxs)(y.A,{className:"row",sx:{width:"100%",color:"white"},children:[(0,B.jsxs)("div",{className:"col-12",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{className:"text-dark fs-6",children:"Bio"}),(0,B.jsx)("div",{children:(0,B.jsx)("small",{className:"text-dark",children:null===l||void 0===l?void 0:l.bio})})]}),(null===l||void 0===l?void 0:l.address)&&(0,B.jsxs)("div",{className:"mt-3",children:[(0,B.jsx)("span",{className:"text-dark fs-6 ",children:"Address"}),(0,B.jsx)("div",{children:(0,B.jsx)("small",{className:"text-dark",children:(null===l||void 0===l?void 0:l.address)+" "+(null===l||void 0===l?void 0:l.state)+" "+(null===l||void 0===l?void 0:l.pincode)})})]})]}),(0,B.jsx)("div",{className:"col-12 col-lg-6",children:(0,B.jsxs)(w.Ay,{className:"p-0 py-2",children:[(0,B.jsx)(k.A,{children:(0,B.jsx)(r.A,{sx:{backgroundColor:"orange"},children:(0,B.jsx)(u.A,{})})}),(0,B.jsx)(C.A,{primary:"Email Address",secondary:(0,B.jsx)("span",{className:"text-dark",children:null===l||void 0===l?void 0:l.email})})]})}),(0,B.jsx)("div",{className:"col-12 col-lg-6",children:(0,B.jsxs)(w.Ay,{className:"p-0 py-2",children:[(0,B.jsx)(k.A,{children:(0,B.jsx)(r.A,{sx:{backgroundColor:"orange"},children:(0,B.jsx)(v.A,{})})}),(0,B.jsx)(C.A,{primary:"Contact",secondary:(0,B.jsx)("span",{className:"text-dark",children:null===l||void 0===l?void 0:l.contact})})]})}),(0,B.jsx)("div",{className:"col-12 col-lg-6",children:(0,B.jsxs)(w.Ay,{className:"p-0 py-2",children:[(0,B.jsx)(k.A,{children:(0,B.jsx)(r.A,{sx:{backgroundColor:"orange"},children:(0,B.jsx)(x.A,{})})}),(0,B.jsx)(C.A,{primary:"Date Of Birth",secondary:(0,B.jsx)("span",{className:"text-dark",children:D()(null===l||void 0===l?void 0:l.dob).format("DD-MM-YYYY")})})]})}),(0,B.jsx)("div",{className:"col-12",children:(null===l||void 0===l?void 0:l.topic)&&(0,B.jsxs)(w.Ay,{className:"p-0 py-2",children:[(0,B.jsx)(k.A,{children:(0,B.jsx)(r.A,{sx:{backgroundColor:"orange"},children:(0,B.jsx)(u.A,{})})}),(0,B.jsx)(C.A,{primary:"Preferred Theme",secondary:(0,B.jsx)("span",{className:"text-dark",children:null===l||void 0===l?void 0:l.topic})})]})}),(0,B.jsx)("div",{className:"col-12",children:(null===l||void 0===l?void 0:l.sub_topic)&&(0,B.jsxs)(w.Ay,{className:"p-0 py-2",children:[(0,B.jsx)(k.A,{children:(0,B.jsx)(r.A,{sx:{backgroundColor:"orange"},children:(0,B.jsx)(u.A,{})})}),(0,B.jsx)(C.A,{primary:"Preferred Topic",secondary:(0,B.jsx)("span",{className:"text-dark",children:null===l||void 0===l?void 0:l.sub_topic})})]})})]})})]})})})})};var I=s(71080);function L(e){let{student:l,reload:s,role:i}=e;const{token:g}=(0,A.SF)(),{ErrorResponder:y}=(0,I.A)();return(0,B.jsxs)("div",{className:"col",children:[(0,B.jsx)(d.A,{className:"rounded-4 certified-wrapper position-relative w-100 h-100 p-0 bg-white border text-dark",children:(0,B.jsxs)("div",{className:"h-100 d-flex flex-column w-100 justify-content-between",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)(b.A,{title:"Delete ".concat(i,"'s Account"),children:(0,B.jsx)("span",{color:"red",className:"position-absolute top-0 end-0 m-2",onClick:()=>(async e=>{p().fire({title:"Are you sure?",text:"You wanted to delete this School safety ".concat(i,"!"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(async l=>{if(l.isConfirmed&&g)try{200==(await a.DX.delete("/institute/student?studentId="+e,{headers:{Authorization:g}})).status&&(t.oR.dismiss(),t.oR.success("Delete Successfully."),s())}catch(i){y(i)}})})(null===l||void 0===l?void 0:l.id),children:(0,B.jsx)(m.A,{sx:{fontSize:20,color:"grey",cursor:"pointer","&:hover":{margin:0,color:"red"}}})})}),null!==l&&void 0!==l&&l.certified?(0,B.jsx)("div",{class:"badge-promo",children:(0,B.jsxs)("span",{class:"badge-promo-content fw-semibold",children:[(0,B.jsx)("i",{className:"bi bi-patch-check-fill"})," Certified"]})}):"",(0,B.jsx)(n.A,{avatar:(0,B.jsx)(r.A,{alt:l.first_name,src:null===l||void 0===l?void 0:l.profile,sx:{width:46,height:46,bgcolor:c.A[500]}}),title:(0,B.jsxs)("div",{children:[(0,B.jsxs)("span",{className:"font-ubd fw-bold fs-6",children:[null===l||void 0===l?void 0:l.first_name," ",null===l||void 0===l?void 0:l.last_name]})," ",(0,B.jsx)("br",{}),(null===l||void 0===l?void 0:l.assigned_flag)&&(0,B.jsxs)("small",{className:"d-inline-block mb-1 me-1 text-center border p-1 px-2 rounded-2 text-dark",children:[(0,B.jsx)("img",{width:20,src:null===l||void 0===l?void 0:l.assigned_flag,alt:null===l||void 0===l?void 0:l.assigned_flag})," ",null===l||void 0===l?void 0:l.assigned_country]})]})}),(0,B.jsx)(o.A,{className:"py-0",children:(0,B.jsxs)("div",{className:"row",children:[(0,B.jsx)("div",{className:"col-12",children:(null===l||void 0===l?void 0:l.assigned_designation)&&(0,B.jsxs)("small",{className:"d-inline-block mb-1 me-1 text-center border me-1 mb-1 p-1 px-2 rounded-2  text-dark",children:[(0,B.jsx)(h.A,{sx:{color:"blue",fontSize:20}})," ",null===l||void 0===l?void 0:l.assigned_designation]})}),(0,B.jsxs)("div",{className:"col-12",children:[(null===l||void 0===l?void 0:l.dob)&&(0,B.jsx)(x.A,{sx:{fontSize:16,color:"grey",borderRadius:1,mr:1}})," ",(0,B.jsxs)("small",{children:["DOB :"," ",(null===l||void 0===l?void 0:l.dob)&&D()(null===l||void 0===l?void 0:l.dob).format("DD-MM-YYYY")]})]}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("a",{href:"mailto:".concat(null===l||void 0===l?void 0:l.email),className:"text-dark",children:[(0,B.jsx)(u.A,{sx:{fontSize:16,color:"grey",mr:1}})," ",(0,B.jsx)("small",{children:null===l||void 0===l?void 0:l.email})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)("a",{href:"tel:".concat(null===l||void 0===l?void 0:l.contact),className:"text-dark",children:[(0,B.jsx)(v.A,{sx:{fontSize:16,color:"grey",mr:1}})," ",(0,B.jsx)("small",{children:null===l||void 0===l?void 0:l.contact})]})}),null!==l&&void 0!==l&&l.class?(0,B.jsxs)("div",{className:"col-12",children:[(0,B.jsx)(j.A,{sx:{fontSize:16,color:"grey",mr:1}})," ",(0,B.jsx)("small",{children:null===l||void 0===l?void 0:l.class})]}):""]})})]}),(0,B.jsx)(f.A,{className:"mb-0 px-0",children:(0,B.jsxs)("div",{className:"container-fluid mb-2 mt-2",children:[(0,B.jsx)("div",{className:"row g-1"}),(0,B.jsxs)(N.A,{variant:"outlined","data-bs-toggle":"modal",fullWidth:!0,"data-bs-target":"#ProfileModal"+(null===l||void 0===l?void 0:l.id),className:"rounded-3 text-capitalize mt-1",size:"large","aria-label":"add to favorites",children:[(0,B.jsx)("i",{className:"bi bi-arrows-angle-expand me-2"}),"View Details"]})]})})]})}),(0,B.jsx)(M,{student:l})]})}var W=s(73216),P=s(10463),O=s(30079),q=s(79484),V=s(38093),U=s(47968),H=s(65324),G=s(11238),X=s(20648),K=s(73033),Z=s(67784),$=s(14256),J=s(57972),Q=s(59182),ee=s(53193),le=s(51292);const se=e=>{let{collegeId:l,reload:s,closeBtn:d,role:n}=e;const o=(0,I.A)(),{token:r}=(0,A.SF)(),[c,m]=i.useState(!1),h=(0,X.Wx)({initialValues:{email:"",dob:"2001-01-26",first_name:"",middle_name:"",last_name:"",contact:"",father_name:"",gender:"male"},validationSchema:K.Ik().shape({email:K.Yj().email().required("Email is required"),dob:K.Yj().required("Pin code is Required"),first_name:K.Yj().max(100).required("First Name is Required"),last_name:K.Yj().max(100).required("Last Name is Required"),contact:K.Yj().required("Phone Number is Required").matches(/^[0-9]{10}$/,"Invalid Mobile Number"),gender:K.Yj().required("Gender is required")}),onSubmit:async(e,i)=>{var c,h,x;let{resetForm:u}=i;if(r)try{var v;m(!0);const i=await a.hr.post("/institute/addStudent",{email:null===e||void 0===e?void 0:e.email,password:null===e||void 0===e?void 0:e.password,confirm_password:null===e||void 0===e?void 0:e.confirm_password,dob:null===e||void 0===e?void 0:e.dob,instituteId:l,first_name:null===e||void 0===e?void 0:e.first_name,last_name:null===e||void 0===e?void 0:e.last_name,contact:null===e||void 0===e?void 0:e.contact,gender:null===e||void 0===e?void 0:e.gender,role:n},{headers:{Authorization:r}});switch(i&&m(!1),null===i||void 0===i||null===(v=i.data)||void 0===v?void 0:v.status){case"success":u(),d.current.click(),s(),t.oR.dismiss(),t.oR.success(null===i||void 0===i||null===(c=i.data)||void 0===c?void 0:c.message);break;case"warning":t.oR.dismiss(),t.oR.warning(null===i||void 0===i||null===(h=i.data)||void 0===h?void 0:h.message);break;case"error":t.oR.dismiss(),t.oR.error(null===i||void 0===i||null===(x=i.data)||void 0===x?void 0:x.message)}}catch(j){m(!1),o(j)}}});return(0,B.jsx)("div",{className:"p-2 p-md-3 p-lg-4",children:(0,B.jsx)("form",{onSubmit:h.handleSubmit,children:(0,B.jsxs)("div",{className:"row g-3",children:[(0,B.jsx)("div",{className:"col-12 col-lg-6",children:(0,B.jsx)(Z.A,{fullWidth:!0,id:"first_name",name:"first_name",label:"First Name",size:"large",value:h.values.first_name,onChange:h.handleChange,error:h.touched.first_name&&Boolean(h.errors.first_name),helperText:h.touched.first_name&&h.errors.first_name})}),(0,B.jsx)("div",{className:"col-12 col-lg-6",children:(0,B.jsx)(Z.A,{fullWidth:!0,id:"last_name",name:"last_name",label:"Last Name",size:"large",value:h.values.last_name,onChange:h.handleChange,error:h.touched.last_name&&Boolean(h.errors.last_name),helperText:h.touched.last_name&&h.errors.last_name})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(Z.A,{fullWidth:!0,id:"contact",name:"contact",label:"Mobile Number",size:"large",value:h.values.contact,onChange:h.handleChange,error:h.touched.contact&&Boolean(h.errors.contact),helperText:h.touched.contact&&h.errors.contact})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(Z.A,{fullWidth:!0,id:"email",name:"email",label:"Email Address",size:"large",value:h.values.email,onChange:h.handleChange,error:h.touched.email&&Boolean(h.errors.email),helperText:h.touched.email&&h.errors.email})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(Z.A,{fullWidth:!0,id:"dob",name:"dob",type:"date",label:"Date of Birth",size:"large",max:"2022-01-01",min:"2007-01-01",value:h.values.dob,onChange:h.handleChange,error:h.touched.dob&&Boolean(h.errors.dob),helperText:h.touched.dob&&h.errors.dob})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsxs)(ee.A,{children:[(0,B.jsx)(le.A,{id:"gender-label",children:"Gender"}),(0,B.jsxs)(J.A,{"aria-labelledby":"gender-label",defaultValue:h.values.gender,id:"gender",name:"gender",onChange:h.handleChange,row:!0,children:[(0,B.jsx)(Q.A,{value:"female",control:(0,B.jsx)($.A,{}),label:"Female"}),(0,B.jsx)(Q.A,{value:"male",control:(0,B.jsx)($.A,{}),label:"Male"}),(0,B.jsx)(Q.A,{value:"other",control:(0,B.jsx)($.A,{}),label:"Other"})]})]})}),(0,B.jsx)("div",{className:"col-12",children:(0,B.jsx)(N.A,{type:"submit",color:"warning",variant:"contained",disabled:c,className:c?"py-3 bg-success":"py-3",size:"large",fullWidth:!0,children:c?(0,B.jsxs)("div",{className:"d-flex justify-content-around text-light",children:[" ",(0,B.jsx)("div",{class:"spinner-border",role:"status",children:(0,B.jsx)("span",{class:"visually-hidden",children:"loading..."})}),(0,B.jsx)("span",{className:"text-light mx-3 text-capitalize",children:"Submitting..."})," "]}):"Submit"})})]})})})};var ae=s(8594),ie=s(84208);const te=function(e){let{details:l,data:s,searchTerm:t,setSearchTerm:d,reload:n,role:o}=e;const[r,c]=i.useState(),[m,h]=i.useState(),[x,u]=(0,i.useState)(!1),[v,j]=i.useState(),[g,p]=i.useState(),[f,y]=i.useState(),{token:w}=(0,A.SF)(),k=(0,i.useRef)(),{ErrorResponder:C}=(0,I.A)();let[_,S]=(0,i.useState)(0);const D=e=>{if(e){const l=G.Wp.json_to_sheet(e),s=G.Wp.book_new();G.Wp.book_append_sheet(s,l,"sheet1"),G._h(s,"SampleData.xlsx")}};(0,i.useEffect)(()=>{w&&""===t&&n()},[t]),(0,i.useEffect)(()=>{n()},[_]);let[F,z]=(0,i.useState)([]);return(0,i.useEffect)(()=>{null===s||void 0===s||s.forEach((e,l)=>{if(null!==e&&void 0!==e&&e.certified){const l=F.map((e,l)=>e.id);null!==l&&void 0!==l&&l.includes(null===e||void 0===e?void 0:e.id)||z([...F,e])}})},[s,n]),(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{className:"container",children:(0,B.jsxs)("div",{className:"row g-2",children:[(0,B.jsx)("div",{className:"col-12 col-lg-6 rounded",children:(0,B.jsxs)("div",{className:"input-group",children:[(0,B.jsx)("input",{className:"form-control",onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n()},value:t,placeholder:"Search ".concat(o," Name Here....")}),Boolean(t.length)&&(0,B.jsxs)("button",{className:"btn btn-outline-danger",onClick:()=>{d(""),n()},children:[(0,B.jsx)(O.A,{style:{fontSize:18}})," Clear"]}),(0,B.jsxs)("button",{className:"btn btn-primary",onClick:()=>{n()},children:[(0,B.jsx)(q.A,{style:{fontSize:18}})," Search"]})]})}),(0,B.jsx)("div",{className:"col",children:(0,B.jsxs)("div",{className:"d-flex align-items-center h-100 flex-wrap",children:[(0,B.jsxs)("button",{type:"button",className:"btn btn-outline-dark rounded-3 h-100","data-bs-toggle":"modal","data-bs-target":"#exampleModalLong",children:["Add\xa0",o]}),"coordinator"!==o&&(0,B.jsxs)("button",{type:"button",className:"btn btn-outline-dark rounded-3 ms-2 h-100","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[(0,B.jsx)(V.A,{}),"Upload\xa0CSV"]})]})})]})}),(0,B.jsx)("div",{className:"modal fade",id:"exampleModalLong",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true",children:(0,B.jsx)("div",{className:"modal-dialog",role:"document",children:(0,B.jsxs)("div",{className:"modal-content",style:{minWidth:"800px"},children:[(0,B.jsxs)("div",{className:"modal-header",children:[(0,B.jsxs)("h5",{className:"modal-title text-capitalize",id:"exampleModalLongTitle",children:["Register School Safety ",o]}),(0,B.jsx)("button",{ref:k,type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,B.jsx)("div",{className:"modal-body  p-0",children:(0,B.jsx)(se,{role:o,closeBtn:k,collegeId:l.id,reload:n})})]})})}),(0,B.jsx)("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,B.jsx)("div",{className:"modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg",children:(0,B.jsxs)("div",{className:"modal-content rounded-4",children:[(0,B.jsxs)("div",{className:"modal-header border-0",children:[(0,B.jsxs)("h1",{className:"modal-title font-weight-bold fs-5",id:"exampleModalLabel",children:[o," Bulk Register"]}),(0,B.jsx)("button",{type:"button",onClick:function(){p(),y(),j(),c(),h()},className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,B.jsxs)("div",{className:"modal-body",children:[(0,B.jsx)("div",{className:"container-fluid p-0 p-lg-2",children:!g&&(0,B.jsx)("div",{children:v?(0,B.jsx)(ae.A,{data:v,setFileData:j,setFile:h,upload:async()=>{if(m&&v&&w)try{var e;const i=new FormData;i.append("file",m,m.originalname),i.append("role",o);const t=await a.hr.post("institute/bulklogin",i,{headers:{"Content-Type":"multipart/form-data",Authorization:w}});var l,s;if((0,H.z)("success",null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message),t.data.dataSaved)p(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.dataSaved),S(_+1);if(t.data.dataFailed)y(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.dataFailed)}catch(i){C(i)}else(0,H.z)("warning","File Not Found!")}}):(0,B.jsxs)("div",{children:[(0,B.jsxs)("div",{className:"text-center item-center text-danger",children:[(0,B.jsx)("span",{className:"font-weight-bold",children:"NOTE"}),(0,B.jsx)("br",{}),(0,B.jsxs)("span",{className:"lh-1 fw-semibold",children:["1. Only the Provided Format is allowed for file upload ",(0,B.jsx)("br",{})," 2. Data limit is 1000 Users per Upload."," "]})," ",(0,B.jsx)("br",{}),(0,B.jsx)(b.A,{title:"Use Provided file format to upload the student details",children:(0,B.jsx)(N.A,{className:"mt-2 rounded",variant:"contained",color:"success",href:"https://yuvamanthan.s3.ap-south-1.amazonaws.com/uploads/bulkregister-template.xlsx",target:"_blank",startIcon:(0,B.jsx)(U.A,{}),children:"Download\xa0Template"})})]}),(0,B.jsxs)("div",{className:"rounded-4 pb-3 mt-4 mx-auto",style:{position:"relative",overflow:"hidden",maxWidth:"500px",border:"2px dashed grey"},children:[(0,B.jsx)("input",{className:"fade",style:{minHeight:240,width:"100%",zIndex:200,position:"relative"},type:"file",onClick:e=>{j(),h(),e.target.value=null},onChange:e=>{u(!0),h(e.target.files[0]),(e=>{if(e.target.files[0]){const l=e.target.files[0];let s=null===l||void 0===l?void 0:l.name.split(".").slice(-1);if(console.log(s[0]),!l||"csv"!==s[0]&&"xlsx"!==s[0]&&"xls"!==s[0])(0,H.z)("error","File Format is not Suported!!");else{c(l.name);const e=new FileReader;e.readAsArrayBuffer(l),e.onload=e=>{var l,s,a;const i=e.target.result,t=G.LF(i,{type:"buffer",skiprows:0}),d=t.Sheets[t.SheetNames[0]],n=G.Wp.sheet_to_json(d);0===n.length?((0,H.z)("error","Data Not Found!"),h()):n.length>1e3?((0,H.z)("error","Exceed Data Limit !!! \n Data Limit : 1000"),h()):null!==(l=n[0])&&void 0!==l&&l.First_name||null!==(s=n[0])&&void 0!==s&&s.Contact||null!==(a=n[0])&&void 0!==a&&a.Email?j(n):((0,H.z)("error","File Format Incorrect"),h())}}}})(e),u(!1)},id:"fileData"}),x&&(0,B.jsx)(ie.default,{}),(0,B.jsx)("div",{style:{position:"absolute",top:0,left:0,zIndex:100},className:"w-100 h-100",children:(0,B.jsx)("div",{className:"h-100 w-100 bg-light",children:(0,B.jsxs)("div",{className:"py-4 text-center",children:[(0,B.jsx)("h4",{children:"Drag and drop or Click To Add File."}),(0,B.jsx)("img",{src:"/images/upload-cloud-folder.png",alt:"",width:200,style:{objectFit:"contain"}})]})})})]})]})})}),(0,B.jsxs)("div",{hidden:!g||!g,className:"container text-center item-center m-2 p-2",children:[(0,B.jsxs)("p",{className:" text-decoration-underline lh-1",children:[" ","Download the Data in Excel File"," "]}),(0,B.jsxs)("p",{className:"text-decoration-underline lh-1",style:{color:"red",fontSize:"15px"},children:[" ","(*Only Available once.)"," "]}),(0,B.jsx)(N.A,{hidden:!(null!==g&&void 0!==g&&g.length),className:"rounded border mx-2",color:"success",onClick:function(){let e=[];g.map(l=>{e.push({ID:null===l||void 0===l?void 0:l.id,First_name:null===l||void 0===l?void 0:l.first_name,Last_name:null===l||void 0===l?void 0:l.last_name,Email:null===l||void 0===l?void 0:l.email,Password:null===l||void 0===l?void 0:l.password})}),D(e)},children:"Registered Data"}),(0,B.jsx)(N.A,{hidden:!(null!==f&&void 0!==f&&f.length),className:"rounded border mx-2",onClick:()=>{D(f)},children:"Unregistered Data"})]}),g&&!!Object.keys(g).length&&(0,B.jsxs)("div",{className:"container mx-auto my-4 align-items-center text-center",children:[(0,B.jsxs)("h5",{className:"font-weight-bold text-center",children:["Student Registered ",Object.keys(g).length," "]}),(0,B.jsxs)("table",{className:"table table-bordered table-hover",children:[(0,B.jsx)("thead",{children:(0,B.jsxs)("tr",{children:[(0,B.jsx)("th",{children:"Student ID"}),(0,B.jsx)("th",{children:"First Name"}),(0,B.jsx)("th",{children:"Last Name"}),(0,B.jsx)("th",{children:"Contact"}),(0,B.jsx)("th",{children:"Email"}),(0,B.jsx)("th",{children:"Password"})]})}),(0,B.jsx)("tbody",{children:g&&g.map(e=>{let{id:l,first_name:s,last_name:a,contact:i,email:t,password:d}=e;return(0,B.jsxs)("tr",{children:[(0,B.jsx)("td",{children:l}),(0,B.jsx)("td",{children:s}),(0,B.jsxs)("td",{children:[a," "]}),(0,B.jsx)("td",{children:i}),(0,B.jsx)("td",{children:t}),(0,B.jsx)("td",{children:d})]})})})]})]}),f&&!!Object.keys(f).length&&(0,B.jsxs)("div",{className:"container mx-auto my-4 aline-cengter text-center",children:[(0,B.jsx)("h5",{className:"font-weight-bold text-center",children:"Student Failed To Register"}),(0,B.jsxs)("table",{className:"table table-bordered table-hover",children:[(0,B.jsx)("thead",{children:(0,B.jsxs)("tr",{children:[(0,B.jsx)("th",{children:"First Name"}),(0,B.jsx)("th",{children:"Last Name"}),(0,B.jsx)("th",{children:"Contact"}),(0,B.jsx)("th",{children:"Email"}),(0,B.jsx)("th",{children:"Reason"})]})}),(0,B.jsx)("tbody",{children:f&&f.map(e=>{let{First_name:l,Last_name:s,Contact:a,Email:i,Error:t}=e;return(0,B.jsxs)("tr",{children:[(0,B.jsx)("td",{children:l}),(0,B.jsxs)("td",{children:[s," "]}),(0,B.jsx)("td",{children:a}),(0,B.jsx)("td",{children:i}),(0,B.jsx)("td",{className:"text-danger font-weight-bold",children:t})]})})})]})]})]})]})})})]})};var de=s(90131),ne=s(79722);const oe=()=>{const{ErrorResponder:e}=(0,I.A)(),[l,s]=(0,i.useState)([]),[d,n]=(0,i.useState)({}),{token:o,userData:r}=(0,A.SF)(),{role:c}=(0,W.g)(),[m,h]=(0,i.useState)(""),[x,u]=(0,i.useState)(1),[v,j]=(0,i.useState)([]),[g,p]=(0,i.useState)(0),[b,f]=(0,i.useState)({}),[N,y]=(0,i.useState)([]),[w,k]=(0,i.useState)([]),C=(0,W.Zp)(),_=async l=>{if(window.confirm("Are you sure you want to delete")&&o)try{const e=await a.DX.delete("/institute/student?studentId="+l,{headers:{Authorization:o}});200==e.status&&(t.oR.dismiss(),t.oR.success(e.data.message),S())}catch(d){var s,i;e(d),t.oR.dismiss(),t.oR.error(null===d||void 0===d||null===(s=d.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)}},S=async()=>{if(o)try{const e=await a.hr.get("/institute/data?type=students&search=".concat(m,"&role=").concat(c,"&page=").concat(x,"&instituteId=").concat(null===r||void 0===r?void 0:r.instituteId),{headers:{Authorization:o}});200===e.status&&(s(e.data.result),p(e.data.totalPages))}catch(l){e(l)}},D=()=>{x>1&&u(x-1)},F=()=>{x<g&&u(x+1)};(0,i.useEffect)(()=>{S()},[c,x]),(0,i.useEffect)(()=>{(async()=>{if(o)try{const e=await a.hr.get("/institute?instituteId=".concat(null===r||void 0===r?void 0:r.instituteId),{headers:{Authorization:o}});null!==e&&void 0!==e&&e.data&&200===(null===e||void 0===e?void 0:e.status)&&n(e.data.result[0])}catch(l){e(l)}})()},[]),(0,i.useEffect)(()=>{(async()=>{const e=await ne.A.get("http://localhost:3100/api/institute/getAllTeacherCount/role/".concat(null===r||void 0===r?void 0:r.role,"/").concat(null===r||void 0===r?void 0:r.id));console.log("sutututu",e),j(e.data)})()},[]);const z=(e,l)=>(0,B.jsx)("div",{className:"card h-100 shadow-sm",children:(0,B.jsxs)("div",{className:"card-body d-flex flex-column justify-content-center align-items-center",children:[(0,B.jsx)("h5",{className:"card-title",children:e}),void 0!==(null===v||void 0===v?void 0:v.count)?(0,B.jsx)("p",{className:"card-text fs-2 fw-bold",children:v.count}):(0,B.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,B.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})});return(0,B.jsxs)("div",{children:[(0,B.jsx)(de.AD,{heading:"Safety ".concat(c,"s")}),(0,B.jsx)("div",{className:"container",children:(0,B.jsx)("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 g-2 mt-2",children:b&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"col",style:{cursor:"pointer"},onClick:()=>C("/All-Teacher"),children:z("Total Teacher",null===b||void 0===b||b.totalTeachers)}),(0,B.jsx)("div",{className:"col",style:{cursor:"pointer"},onClick:()=>C("/certified-Teacher"),children:z("Certified Teacher",null===b||void 0===b||b.result)}),(0,B.jsx)("div",{className:"col",style:{cursor:"pointer"},onClick:()=>C("/uncertified-Teacher"),children:z("Active Course",null===b||void 0===b||b.enrollresult)}),(0,B.jsx)("div",{className:"col",style:{cursor:"pointer"},children:z("Total Pending",null===b||void 0===b||b.count)})]})})}),(0,B.jsx)("div",{className:"py-3",children:(0,B.jsx)(te,{role:c,details:d,data:l,searchTerm:m,setSearchTerm:h,reload:S})}),(0,B.jsxs)("div",{className:"container py-2",children:[(0,B.jsxs)("p",{className:"fs-6 text-capitalize",children:["Total ",c+"s"," is ",null===l||void 0===l?void 0:l.length]}),l.length?(0,B.jsxs)("div",{children:[(0,B.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 g-1 g-md-2 g-lg-3 row-cols-lg-4",children:l.map((e,l)=>(0,B.jsx)(L,{role:c,details:d,student:e,reload:S,handleDelete:_},l))}),(()=>{const e=[];for(let l=1;l<=g;l++)e.push((0,B.jsx)("li",{className:"page-item ".concat(x===l?"active":""),"aria-current":x===l?"page":null,children:(0,B.jsx)("a",{className:"page-link",onClick:()=>u(l),children:l})},l));if(e.length>1)return(0,B.jsx)("nav",{"aria-label":"...",children:(0,B.jsxs)("ul",{className:"pagination mt-5",children:[(0,B.jsx)("li",{className:"page-item disabled",children:(0,B.jsx)("a",{className:"page-link",onClick:D,children:"Prev"})}),e,(0,B.jsx)("li",{className:"page-item",children:(0,B.jsx)("a",{className:"page-link",onClick:F,children:"Next"})})]})})})()]}):(0,B.jsx)(P.A,{text:"No ".concat(c," Has Registered Yet!")})]})]})}},8594:(e,l,s)=>{s.d(l,{A:()=>w});var a=s(89379),i=s(91794),t=s(17296),d=s(29289),n=s(65550),o=s(29931),r=s(42518),c=s(67784),m=s(18483),h=s(45543),x=s(65324),u=s(65043),v=s(11238),j=s(47503),g=s(95540),p=s(30064),b=s.n(p),f=s(86178),N=s.n(f),A=s(57313),y=s(70579);const w=function(e){let{data:l,setFileData:s,setFile:p,upload:f}=e;const[w,k]=(0,u.useState)(l),[C,_]=(0,u.useState)(),[S,D]=(0,u.useState)([]),[F,z]=(0,u.useState)(!1),[E,Y]=(0,u.useState)({First_name:"",Last_name:"",Email:"",Contact:"",DOB:""});function R(e){return null!==S&&void 0!==S&&S.includes(null===e||void 0===e?void 0:e.Email)?{message:"Emails Already Exists"}:function(e,l){var s=-1;return null===l||void 0===l||l.map(l=>{let{Email:a}=l;e===a&&(s+=1)}),s}(null===e||void 0===e?void 0:e.Email,w)?{message:"Duplicate Email"}:function(e,l){var s=-1;return null===l||void 0===l||l.map(l=>{let{Contact:a}=l;e===a&&(s+=1)}),s}(null===e||void 0===e?void 0:e.Contact,w)?{message:"Duplicate Contact"}:null!==e&&void 0!==e&&e.First_name&&null!==e&&void 0!==e&&e.Contact&&null!==e&&void 0!==e&&e.Email?(10!=String(null===e||void 0===e?void 0:e.Contact).length||!Number(null===e||void 0===e?void 0:e.Contact))&&{message:"Incorrect Contact"}:{message:"Data Missing"}}return(0,u.useEffect)(()=>{x.g.loading();const e=[];null===w||void 0===w||w.map(l=>{let{Email:s}=l;e.push(s)}),h.hr.post("institute/allEmails",e).then(e=>{let{data:l}=e;D(null===l||void 0===l?void 0:l.emails)}).catch(e=>{console.log(e),x.g.error("Something Went Wrong!!")}),function(e){try{const s=v.Wp.json_to_sheet(e),a=v.Wp.book_new();v.Wp.book_append_sheet(a,s,"sheet1");var l=new Blob([new Uint8Array(v.M9(a,{bookType:"xlsx",type:"array"}))],{type:"application/octet-stream"});const i=new File([l],"demo.xlsx",{type:"xlsx"});p(i)}catch(s){console.log("Error:",s)}}(w)},[w,C]),(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"mb-2",children:[(0,y.jsx)(r.A,{className:"me-2 p-2 px-3",variant:"outlined",color:"error",size:"small",onClick:()=>{s(),p()},startIcon:(0,y.jsx)(i.A,{}),children:"Cancel"}),(0,y.jsx)(r.A,{className:"p-2 px-3",variant:"contained",color:"success",size:"small",onClick:()=>{!function(){var e=!0;w.length?(null===w||void 0===w||w.map(l=>{R(l)&&(e=!1)}),e?f():j.oR.warning("Error In Data")):j.oR.error("No Data Found!")}()},startIcon:(0,y.jsx)(o.A,{}),children:"Upload"})]}),(0,y.jsxs)("table",{className:"table position-relative pb-0 mb-0",style:{fontSize:"15px"},children:[(0,y.jsx)("thead",{className:"bg-light-white2-grad",children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{scope:"col",children:"#"}),(0,y.jsx)("th",{scope:"col",children:"First\xa0Name"}),(0,y.jsx)("th",{scope:"col",children:"Last\xa0Name"}),(0,y.jsx)("th",{scope:"col",children:"Email"}),(0,y.jsx)("th",{scope:"col",children:"Contact"}),(0,y.jsx)("th",{scope:"col",children:"DOB"}),(0,y.jsx)("th",{scope:"col",children:"Error(If\xa0Any) "}),(0,y.jsx)("th",{scope:"col",children:"Edit"})]})}),(0,y.jsx)("tbody",{children:null===w||void 0===w?void 0:w.map((e,l)=>{var s,i;return console.log(e,"item===>"),(0,y.jsxs)("tr",{title:null===(s=R(e))||void 0===s?void 0:s.message,className:R(e)?"table-danger":"",onDoubleClick:()=>{z(l),Y(e)},children:[(0,y.jsx)("th",{scope:"row",children:l+1}),F===l?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("td",{children:(0,y.jsx)(c.A,{defaultValue:null===E||void 0===E?void 0:E.First_name,onChange:e=>{Y(l=>(0,a.A)((0,a.A)({},l),{},{First_name:e.target.value}))},size:"small"})}),(0,y.jsx)("td",{children:(0,y.jsx)(c.A,{defaultValue:null===E||void 0===E?void 0:E.Last_name,onChange:e=>{Y(l=>(0,a.A)((0,a.A)({},l),{},{Last_name:e.target.value}))},size:"small"})}),(0,y.jsx)("td",{children:(0,y.jsx)(c.A,{type:"email",defaultValue:E.Email,onChange:e=>{Y(l=>(0,a.A)((0,a.A)({},l),{},{Email:e.target.value}))},size:"small"})}),(0,y.jsx)("td",{children:(0,y.jsx)(c.A,{defaultValue:E.Contact,onChange:e=>{Y(l=>(0,a.A)((0,a.A)({},l),{},{Contact:e.target.value}))},size:"small"})}),(0,y.jsx)("td",{children:(0,y.jsx)(c.A,{defaultValue:N()(E.DOB,"DD-MM-YYYY").format("DD-MM-YYYY"),onChange:e=>{Y(l=>(0,a.A)((0,a.A)({},l),{},{DOB:e.target.value}))},size:"small"})}),(0,y.jsx)("td",{children:(0,y.jsx)("small",{children:(0,y.jsx)(m.A,{title:"Update",children:(0,y.jsx)(d.A,{sx:{color:"blue"},onClick:()=>{let e=w;e[l]=E,k(e),z(!1),z(),_(!C)}})})})}),(0,y.jsx)("td",{children:(0,y.jsx)("small",{children:(0,y.jsx)(m.A,{title:"Back",children:(0,y.jsx)(n.A,{sx:{color:"black"},onClick:()=>{z(!1)}})})})})]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("td",{children:null===e||void 0===e?void 0:e.First_name}),(0,y.jsx)("td",{children:null===e||void 0===e?void 0:e.Last_name}),(0,y.jsx)("td",{children:null===e||void 0===e?void 0:e.Email}),(0,y.jsx)("td",{children:null===e||void 0===e?void 0:e.Contact}),(0,y.jsx)("td",{children:N()(null===e||void 0===e?void 0:e.DOB,"DD-MM-YYYY").format("DD-MM-YYYY")}),(0,y.jsx)("td",{children:null===(i=R(e))||void 0===i?void 0:i.message}),(0,y.jsxs)("td",{className:"p-0",children:[(0,y.jsx)(m.A,{title:"Edit",children:(0,y.jsxs)(A.Ay,{className:"m-2 text-success bg-success bg-opacity-25",onClick:()=>{z(l),Y(e)},children:[" ",(0,y.jsx)(g.A,{})," "]})}),(0,y.jsx)(m.A,{title:"Delete",children:(0,y.jsxs)(A.Ay,{className:"text-danger bg-danger bg-opacity-25",onClick:()=>{!function(e){b().fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, remove it!"}).then(l=>{let{isConfirmed:s}=l;if(s){let l=w;delete l[e],k(l),_(!C),j.oR.success("Deleted Successfully.")}})}(l)},children:[" ",(0,y.jsx)(t.A,{})]})})]})]})]},l+1)})})]})]})}},10463:(e,l,s)=>{s.d(l,{A:()=>i});s(65043);var a=s(70579);const i=e=>{let{text:l}=e;return(0,a.jsxs)("div",{className:"h-100",children:[(0,a.jsx)("img",{src:"/images/gif/Nodata.jpg",alt:"",className:"w-100",style:{maxHeight:"400px",objectFit:"contain"}}),(0,a.jsx)("h6",{className:"text-center text-body-emphasis fs-4",children:l})]})}}}]);
//# sourceMappingURL=3485.6a21db41.chunk.js.map