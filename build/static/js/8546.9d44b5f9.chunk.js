"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[8546],{37276:(e,s,t)=>{var a=t(24994);s.A=void 0;var o=a(t(40039)),l=t(70579);s.A=(0,o.default)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBackTwoTone")},46143:(e,s,t)=>{t.d(s,{A:()=>b});var a=t(89379),o=t(65043),l=t(42518),n=t(67784),i=t(90035),r=t(35316),d=t(98533),c=t(4219),u=t(53193),v=t(18356),h=t(69285),m=t(32143),x=t(39336),g=t(20648),p=t(85595),A=t(45543),j=t(65324),w=t(73216),y=t(96621),f=t(70579);function b(e){let{open:s,handleClose:t,getQuestions:b,categories:S}=e;const[N,C]=o.useState(""),{userData:k}=(0,p.SF)(),_=(0,w.Zp)(),F=(0,g.Wx)({initialValues:{email:null===k||void 0===k?void 0:k.email,title:"",categoryId:null},onSubmit:async(e,s)=>{e=(0,a.A)((0,a.A)({},e),{},{body:N});try{const s=await A.e_.post("/v1/api/questions",e);var o;if(200===s.status)t(),_("/dashboard/forum/".concat(null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.slug))}catch(l){t(),j.g.error(l.response.data.message)}}}),Q=150-F.values.title.length;return(0,f.jsx)("div",{children:(0,f.jsxs)(i.A,{open:s,onClose:t,children:[(0,f.jsx)(c.A,{children:"Ask Question"}),(0,f.jsxs)(r.A,{className:"border rounded-4 p-4 mx-3 mb-3 bg-light",children:[(0,f.jsx)(d.A,{children:"To ask your question, please enter your question details here. Our team will update the answers as soon as possible."}),(0,f.jsxs)(u.A,{fullWidth:!0,className:"mt-3",variant:"standard",children:[(0,f.jsx)(v.A,{id:"category-select-label",className:"fw-bold",children:"Choose Category"}),(0,f.jsxs)(h.A,{labelId:"category-select-label",id:"category-select",value:F.values.categoryId,label:"Choose Category",name:"categoryId",className:"fw-bold text-secondary",onChange:F.handleChange,children:[(0,f.jsx)(m.A,{value:"",children:(0,f.jsx)("em",{children:"None"})}),null===S||void 0===S?void 0:S.map(e=>(0,f.jsx)(m.A,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name}))]})]}),(0,f.jsx)(x.A,{className:"py-2"}),(0,f.jsx)(n.A,{autoFocus:!0,margin:"dense",id:"title",label:(0,f.jsx)("h6",{className:"text-secondary",children:"Question Title"}),type:"text",placeholder:"Ex- What is yuvamanthan? Can I participate?",fullWidth:!0,variant:"standard",onChange:F.handleChange,inputProps:{maxLength:150},helperText:"".concat(Q," characters left")}),(0,f.jsx)(y.A,{content:N,setContent:C,placeholder:"Describe your question...."}),(0,f.jsx)("br",{}),(0,f.jsx)(x.A,{}),(0,f.jsxs)("div",{className:"mt-3 d-flex align-items-center",children:[(0,f.jsxs)("div",{className:"col controls",children:[(0,f.jsx)(l.A,{onClick:F.handleSubmit,variant:"outlined",className:"text-capitalize fw-bold",disabled:!(!F.isSubmitting&&F.values.title&&N&&"<p><br></p>"!==N&&F.values.categoryId),children:"Post Now"}),(0,f.jsx)(l.A,{onClick:t,variant:"outlined",className:"mx-3 text-capitalize fw-bold",children:"Cancel"})]}),(0,f.jsx)("div",{className:"col brand text-end",children:(0,f.jsxs)("p",{className:"fs-6",children:["Powered by ",(0,f.jsx)("a",{href:"https://www.eksathi.com",target:"_blank",className:"text-info fw-bolder",children:"EkSathi"})]})})]})]})]})})}},58546:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(42518),o=t(45543),l=t(20648),n=t(85595),i=t(65043),r=t(73216),d=t(35475),c=t(46143),u=t(78923),v=(t(56787),t(71080)),h=t(57609),m=t(46074),x=t(45572),g=t(29749),p=t(14599),A=t(70579);const j=e=>{let{question:s,getQuestions:t}=e;const[a,l]=(0,i.useState)(!0),[n,r]=(0,i.useState)(),[d,c]=(0,i.useState)(!0),u=async()=>{try{const t=await o.e_.get("/v1/api/answer?id=".concat(null===s||void 0===s?void 0:s.id));var e;if(200===t.status)r(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.results),console.log("Answer Data: ",t)}catch(t){console.log(t.response.data.error)}};return(0,i.useEffect)(()=>{u()},[]),(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{className:"rounded-4 border mb-3 shadow-sm",children:[(0,A.jsx)(p.A,{showAnswerHandler:()=>{l(!a)},showAnswer:a,question:s,className:"border rounded-4",getQuestions:t,isAnswered:null===n||void 0===n?void 0:n.length,isSingle:!0}),null===n||void 0===n?void 0:n.map(e=>(0,A.jsx)(g.A,{showAnswer:a,answer:e,getQuestions:t})),(0,A.jsx)(x.A,{questionId:null===s||void 0===s?void 0:s.id,showWriteAnswerBox:d,setShowWriteAnswerBox:c,showAnswerBoxHandler:()=>{c(!d)},getAnswers:u})]})})};var w=t(37276);const y=()=>{const[e,s]=(0,i.useState)(),[t,x]=(0,i.useState)(!0),[g,p]=(0,i.useState)(!1),[y,f]=(0,i.useState)(!0),{userData:b}=(0,n.SF)(),[S,N]=(0,i.useState)(!1),[C,k]=(0,i.useState)("Top Questions"),[_,F]=(0,i.useState)(""),[Q,q]=(0,i.useState)(""),[T,D]=(0,i.useState)(1),[I,W]=(0,i.useState)(10),[z,B]=(0,i.useState)(),[E,M]=(0,i.useState)([]),[P,R]=(0,i.useState)(""),[H,L]=(0,i.useState)(!1),[V,O]=(0,i.useState)(!0),[U,Z]=(0,i.useState)({}),{ErrorResponder:G}=(0,v.A)(),{token:J}=(0,n.SF)(),[K,X]=i.useState(!1),{slug:Y}=(0,r.g)(),$=async()=>{x(!0);try{const t=await o.e_.get("/v1/api/question/".concat(Y));var e;if(200===t.status)s(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.results),k("Top Questions"),console.log("Question Data: ",t),x(!1)}catch(t){console.log(t.response.data.error)}};(0,l.Wx)({initialValues:{search:""},onSubmit:async(e,t)=>{console.log("Serching...  :",e),x(!0);try{const i=await o.e_.get("/v1/api/search?keyword=".concat(e.search));var a,l,n;if(200===i.status)t.resetForm(),s(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.result),k("Search Results (".concat(null===i||void 0===i||null===(l=i.data)||void 0===l||null===(n=l.result)||void 0===n?void 0:n.length,")")),x(!1)}catch(i){console.error(i)}}});return(0,i.useEffect)(()=>{(async()=>{try{const e=await o.e_.post("/v1/api/verify-user",{email:null===b||void 0===b?void 0:b.email});200===(null===e||void 0===e?void 0:e.status)&&(console.log("Verified User"),f(!0),$())}catch(l){var e;if(console.log(l),403===(null===l||void 0===l||null===(e=l.response)||void 0===e?void 0:e.status))try{const e=await o.hr.get("/student/detail",{headers:{Authorization:J}});if(200===(null===e||void 0===e?void 0:e.status)){var s,t;let a=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.result[0];console.log("User :",null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.result[0]);const l=await o.e_.post("/v1/api/create-user",{name:(null===a||void 0===a?void 0:a.first_name)+" "+(null===a||void 0===a?void 0:a.last_name),email:null===a||void 0===a?void 0:a.email,profile_pic:null===a||void 0===a?void 0:a.profile,instituteName:null===a||void 0===a?void 0:a.institution_name,delegateCountry:null===a||void 0===a?void 0:a.g20_country,delegateDesignation:null===a||void 0===a?void 0:a.g20_designation});200===(null===l||void 0===l?void 0:l.status)&&(f(!0),$(),F("top-questions"))}}catch(l){var a;console.log(l),409===(null===l||void 0===l||null===(a=l.response)||void 0===a?void 0:a.status)?(f(!0),$()):f(!1)}}})(),(async()=>{try{const t=await o.e_.get("/v1/api/categories");var e,s;200===(null===t||void 0===t?void 0:t.status)&&(M(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.results),console.log("Categories: ",null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.results))}catch(t){console.log(t)}})()},[]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"",children:[(0,A.jsxs)(d.N_,{to:"/dashboard/forum",className:"mb-5",children:[(0,A.jsx)(w.A,{})," Back"]}),y?(0,A.jsx)("div",{children:t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(u.A,{}),(0,A.jsx)(u.A,{}),(0,A.jsx)(u.A,{})]}):e?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(j,{question:e,getQuestions:$})}):(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center mt-5",children:[(0,A.jsx)("img",{src:"/images/questionnotfound.jpg",alt:"",className:"w-100",style:{maxWidth:"400px",objectFit:"contain"}}),(0,A.jsx)("h3",{children:"No Questions Found2"}),(0,A.jsx)("p",{children:"It seems like you are lost, but you can ask now!"}),(0,A.jsx)(a.A,{varient:"outlined",className:"border text-capitalize fs-5 px-4 rounded-3",size:"large",color:"success",onClick:()=>{p(!0)},children:"Ask Question Now"})]})})}):(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(h.A,{message:"It seems like you don't have access to the Q&A portal currently, Please contact your admin to activate the feature.",contact:"support@yuvamanthan.org"})})]}),(0,A.jsx)(c.A,{open:g,handleClose:()=>{p(!1)},getQuestions:$,categories:E}),(0,A.jsx)(m.A,{open:K,setOpen:X})]})}},98533:(e,s,t)=>{t.d(s,{A:()=>A});var a=t(98587),o=t(58168),l=t(65043),n=t(58387),i=t(98610),r=t(34535),d=t(61475),c=t(98206),u=t(85865),v=t(92532),h=t(72372);function m(e){return(0,h.Ay)("MuiDialogContentText",e)}(0,v.A)("MuiDialogContentText",["root"]);var x=t(70579);const g=["children","className"],p=(0,r.Ay)(u.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,s)=>s.root})({}),A=l.forwardRef(function(e,s){const t=(0,c.b)({props:e,name:"MuiDialogContentText"}),{className:l}=t,r=(0,a.A)(t,g),d=(e=>{const{classes:s}=e,t=(0,i.A)({root:["root"]},m,s);return(0,o.A)({},s,t)})(r);return(0,x.jsx)(p,(0,o.A)({component:"p",variant:"body1",color:"text.secondary",ref:s,ownerState:r,className:(0,n.A)(d.root,l)},t,{classes:d}))})}}]);
//# sourceMappingURL=8546.9d44b5f9.chunk.js.map