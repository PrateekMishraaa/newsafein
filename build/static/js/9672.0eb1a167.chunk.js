"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[9672],{4598:(e,t,a)=>{a.d(t,{A:()=>A});var s=a(98587),i=a(58168),l=a(65043),n=a(58387),c=a(98610),o=a(67266),r=a(6803),d=a(33064),h=a(34535),u=a(98206),m=a(92532),p=a(72372);function v(e){return(0,p.Ay)("MuiSwitch",e)}const x=(0,m.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var g=a(70579);const j=["className","color","edge","size","sx"],b=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t["edge".concat((0,r.A)(a.edge))],t["size".concat((0,r.A)(a.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(x.thumb)]:{width:16,height:16},["& .".concat(x.switchBase)]:{padding:4,["&.".concat(x.checked)]:{transform:"translateX(16px)"}}}}]}),y=(0,h.Ay)(d.A,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{["& .".concat(x.input)]:t.input},"default"!==a.color&&t["color".concat((0,r.A)(a.color))]]}})(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(x.checked)]:{transform:"translateX(20px)"},["&.".concat(x.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(x.checked," + .").concat(x.track)]:{opacity:.5},["&.".concat(x.disabled," + .").concat(x.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(x.input)]:{left:"-100%",width:"300%"}}},e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,o.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[a]=e;return{props:{color:a},style:{["&.".concat(x.checked)]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[a].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,o.X4)(t.palette[a].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(x.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(a,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,o.a)(t.palette[a].main,.62):(0,o.e$)(t.palette[a].main,.55))}},["&.".concat(x.checked," + .").concat(x.track)]:{backgroundColor:(t.vars||t).palette[a].main}}}})]}}),f=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}),w=(0,h.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}),A=l.forwardRef(function(e,t){const a=(0,u.b)({props:e,name:"MuiSwitch"}),{className:l,color:o="primary",edge:d=!1,size:h="medium",sx:m}=a,p=(0,s.A)(a,j),x=(0,i.A)({},a,{color:o,edge:d,size:h}),A=(e=>{const{classes:t,edge:a,size:s,color:l,checked:n,disabled:o}=e,d={root:["root",a&&"edge".concat((0,r.A)(a)),"size".concat((0,r.A)(s))],switchBase:["switchBase","color".concat((0,r.A)(l)),n&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=(0,c.A)(d,v,t);return(0,i.A)({},t,h)})(x),C=(0,g.jsx)(w,{className:A.thumb,ownerState:x});return(0,g.jsxs)(b,{className:(0,n.A)(A.root,l),sx:m,ownerState:x,children:[(0,g.jsx)(y,(0,i.A)({type:"checkbox",icon:C,checkedIcon:C,ref:t,ownerState:x},p,{classes:(0,i.A)({},A,{root:A.switchBase})})),(0,g.jsx)(f,{className:A.track,ownerState:x})]})})},79672:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(89379),i=a(87332),l=a(33464),n=a(83560),c=a(42518),o=a(67784),r=a(4598),d=a(45543),h=a(20648),u=a(85595),m=a(65324),p=a(65043),v=a(72557),x=a(73216),g=a(35475),j=a(47503),b=a(70579);const y=function(){let[e,t]=(0,p.useState)("active"),[a,y]=(0,p.useState)([]);const[f,w]=(0,p.useState)(!1),[A,C]=(0,p.useState)(!1),[N,k]=(0,p.useState)(!1),[S,z]=(0,p.useState)(null),[R,B]=(0,p.useState)(!1),[I,T]=(0,p.useState)(""),[W,D]=(0,p.useState)(!1),[V,q]=(0,p.useState)(null),[E,M]=(0,p.useState)(null);let[F,H]=(0,p.useState)(0),O=(0,x.zy)();(0,x.Zp)();const{token:_}=(0,u.SF)();let X=O.pathname.split("/"),P=X[X.length-1];const Q=(0,h.Wx)({initialValues:{title:"",courseId:P,path:"",type:"1",status:"",order:""},enableReinitialize:!0,onSubmit:async(t,a)=>{j.oR.loading("loading");const i=(0,s.A)((0,s.A)({},t),{},{status:e,sectionId:P});try{const e=await d.hr.post("admin/course/section/video",i);200===e.status&&(j.oR.dismiss(),(0,j.oR)("Video Added Successfully"),y(t=>[...t,e.data.result]),a.resetForm(),w(!1))}catch(l){m.g.warning("Error: "+l.message)}}});(0,p.useEffect)(()=>{(async()=>{try{const e=await d.DX.get("admin/course/section/video?id=".concat(P));200===e.status&&y(e.data.result)}catch(e){m.g.warning("Error: "+e.message)}})()},[P]);const L=(0,h.Wx)({initialValues:{title:"",quiz_duration:"",level:"Easy",passing_criteria:"",sectionId:P,desc:"",order:"",type:"3",status:"active"},onSubmit:async(e,t)=>{j.oR.loading("Creating Quiz."),d.hr.post("/course/quiz/create",e,{headers:{Authorization:_}}).then(async a=>{var s,i;(j.oR.dismiss(),200===a.data.status)?(e.path=null===(s=a.data)||void 0===s||null===(i=s.result)||void 0===i?void 0:i.id,await d.hr.post("admin/course/section/video",e).catch(e=>{console.log(e),j.oR.warning("Something Went Wrong!")}),t.resetForm(),H(F+1),j.oR.success("Quiz is Created!"),C(!1)):(console.log(a),j.oR.warning("Something Went Wrong!"))}).catch(e=>{j.oR.dismiss(),console.error(e)})}}),G=e=>{switch(e){case 1:return"vedio";case 2:return"pdf";case 3:return"quiz";default:return"invalid"}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)(c.A,{onClick:()=>window.history.back(),startIcon:(0,b.jsx)(i.A,{}),children:"Go Back"}),(0,b.jsx)("div",{className:"row",children:(0,b.jsxs)("div",{className:"col-12",children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,b.jsx)("h4",{children:"Section Content"}),(0,b.jsx)(c.A,{onClick:()=>C(!0),variant:"outlined",color:"primary",children:"Add New Quiz"}),(0,b.jsx)(c.A,{onClick:()=>w(!0),variant:"outlined",color:"primary",children:"Add New Content"})]}),(0,b.jsxs)("div",{className:"table-responsive border rounded mt-3",children:[(0,b.jsxs)("table",{className:"designed-table table table-borderless align-middle mb-0",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-light",children:[(0,b.jsx)("th",{className:"fw-semibold p-3",children:"Title"}),(0,b.jsx)("th",{className:"fw-semibold p-3",children:"Url"}),(0,b.jsx)("th",{className:"fw-semibold p-3",children:"Type"}),(0,b.jsx)("th",{className:"fw-semibold p-3",children:"Order"}),(0,b.jsx)("th",{className:"fw-semibold p-3",children:"Status"}),(0,b.jsx)("th",{className:"fw-semibold p-3",style:{width:100},children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.map(e=>(0,b.jsxs)("tr",{className:"border-bottom",children:[(0,b.jsx)("td",{className:"p-2",children:e.title}),(0,b.jsx)("td",{className:"p-3 line-clamp",children:3===e.type?(0,b.jsx)(g.N_,{to:e.path,children:"Go to Quiz"}):e.path}),(0,b.jsx)("td",{className:"p-3",children:G(e.type)}),(0,b.jsx)("td",{className:"p-3",children:e.order}),(0,b.jsx)("td",{className:"p-3",children:(0,b.jsx)("span",{className:"".concat("active"===e.status?"bg-success":"bg-danger"," p-1 px-3 rounded-pill text-white"),children:e.status})}),(0,b.jsxs)("td",{children:[(0,b.jsx)(c.A,{fullWidth:!0,variant:"outlined",color:"success",size:"small",startIcon:(0,b.jsx)(n.A,{}),onClick:()=>(async e=>{console.log("Editing video ID:",e.id);try{const a=await d.DX.get("admin/course/section/video/by/".concat(e.id));if(200===a.status){const e=a.data.result;M(e),t(e.status||"active"),k(!0)}}catch(a){m.g.warning("Error fetching video details: "+a.message)}})(e),children:"Edit"}),(0,b.jsx)(c.A,{className:"mt-1",fullWidth:!0,variant:"outlined",color:"error",size:"small",startIcon:(0,b.jsx)(l.A,{}),onClick:()=>{return t=e.id,q(t),void D(!0);var t},children:"Delete"})]})]},e.id))})]}),(0,b.jsxs)(v.A,{show:W,onHide:()=>D(!1),children:[(0,b.jsx)(v.A.Header,{closeButton:!0,children:(0,b.jsx)(v.A.Title,{children:"Confirm Deletion"})}),(0,b.jsx)(v.A.Body,{children:(0,b.jsx)("p",{children:"Are you sure you want to delete this video?"})}),(0,b.jsxs)(v.A.Footer,{children:[(0,b.jsx)(c.A,{variant:"outlined",color:"error",onClick:()=>D(!1),children:"Cancel"}),(0,b.jsx)(c.A,{variant:"contained",color:"success",onClick:async()=>{if(V){try{200===(await d.DX.delete("admin/delete/course/section/video/".concat(V))).status&&(m.g.success("Video deleted successfully!"),y(e=>e.filter(e=>e.id!==V)))}catch(e){m.g.warning("Error deleting video: "+e.message)}D(!1),q(null)}},children:"Confirm"})]})]}),(0,b.jsxs)(v.A,{show:N,onHide:()=>k(!1),children:[(0,b.jsx)(v.A.Header,{closeButton:!0,children:(0,b.jsx)(v.A.Title,{children:"Edit Course Content"})}),(0,b.jsx)(v.A.Body,{children:(0,b.jsxs)("form",{onSubmit:t=>{t.preventDefault();(async t=>{try{200===(await d.DX.put("admin/course/section/video/updated/".concat(E.id),(0,s.A)((0,s.A)({},t),{},{status:e}))).status&&(m.g.success("Video updated successfully!"),y(a=>a.map(a=>a.id===E.id?(0,s.A)((0,s.A)((0,s.A)({},a),t),{},{status:e}):a)),k(!1))}catch(a){m.g.warning("Error updating video: "+a.message)}})({title:t.target.title.value,path:t.target.path.value,order:t.target.order.value,type:t.target.type.value})},autoComplete:"off",children:[(0,b.jsxs)("div",{className:"row row-cols-2 g-2",children:[(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)(o.A,{fullWidth:!0,id:"title",label:"Title",type:"text",name:"title",defaultValue:(null===E||void 0===E?void 0:E.title)||""})}),(0,b.jsx)("div",{className:"col",children:(0,b.jsx)(o.A,{fullWidth:!0,required:!0,id:"path",name:"path",label:"Path",type:"text",defaultValue:(null===E||void 0===E?void 0:E.path)||""})}),(0,b.jsx)("div",{className:"col",children:(0,b.jsx)(o.A,{id:"order",label:"Order",type:"number",name:"order",defaultValue:(null===E||void 0===E?void 0:E.order)||""})}),(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{htmlFor:"type",children:"Type"}),(0,b.jsxs)("select",{className:"form-select py-2",name:"type",id:"type",defaultValue:(null===E||void 0===E?void 0:E.type)||"1",children:[(0,b.jsx)("option",{value:"1",children:"Video"}),(0,b.jsx)("option",{value:"2",children:"PDF"}),(0,b.jsx)("option",{value:"3",children:"Quiz"})]})]})]}),(0,b.jsx)("div",{className:"row mt-4",children:(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)(r.A,{checked:"active"===e,onChange:()=>t("active"===e?"inactive":"active")}),(0,b.jsx)("span",{children:"active"===e?"Active":"Inactive"})]})}),(0,b.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,b.jsx)(c.A,{type:"submit",variant:"contained",color:"success",children:"Save Changes"})})]})})]})]})]})})]}),(0,b.jsxs)(v.A,{show:f,onHide:()=>w(!1),children:[(0,b.jsx)(v.A.Header,{closeButton:!0,children:(0,b.jsx)(v.A.Title,{className:"",children:"Add Course Content"})}),(0,b.jsx)(v.A.Body,{children:(0,b.jsxs)("form",{onSubmit:Q.handleSubmit,autoComplete:"off",children:[(0,b.jsxs)("div",{className:"row row-cols-2 g-2",children:[(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)(o.A,{fullWidth:!0,id:"title",label:"Title",type:"text",name:"title",value:Q.values.title,onChange:Q.handleChange})}),(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)("input",{disabled:!0,id:"courseId",name:"courseId",type:"hidden",value:null===Q||void 0===Q?void 0:Q.courseId,onChange:Q.handleChange})}),(0,b.jsx)("div",{className:"col",children:(0,b.jsx)(o.A,{fullWidth:!0,required:!0,id:"path",name:"path",label:"Path",type:"text",value:Q.values.path,onChange:Q.handleChange})}),(0,b.jsx)("div",{className:"col",children:(0,b.jsx)(o.A,{id:"order",fullWidth:!0,name:"order",label:"Order",value:Q.values.order,type:"number",onChange:Q.handleChange})}),(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("span",{className:"text-dark",children:"Content Type"}),(0,b.jsxs)("select",{required:!0,name:"type",id:"type",value:Q.values.type,onChange:Q.handleChange,className:"form-select py-2",children:[(0,b.jsx)("option",{value:"1",children:"Youutube Vedio Link"}),(0,b.jsx)("option",{value:"2",children:"Pdf Link"})]})]}),(0,b.jsx)("div",{className:"col",children:(0,b.jsxs)("div",{class:"form-check form-switch p-0 ms-2",children:[(0,b.jsx)("label",{class:"form-check-label fs-6 text-dark",htmlfor:"status",children:"Course Status"}),(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[(0,b.jsx)(r.A,{color:"success",id:"status",className:"text-start ",onClick:()=>{t("active"===e?"inactive":"active")},defaultChecked:!0}),(0,b.jsxs)("span",{className:"fs-6 text-center text-capitalize  bg-opacity-25 border rounded-pill px-3\n                        ".concat("active"===e?"text-success bg-success border-success":"text-danger bg-danger border-danger"," "),children:[" ",e," "]})]})]})})]}),(0,b.jsx)("div",{className:"col-12",children:(0,b.jsxs)("div",{className:"d-flex justify-content-end mt-3",children:[(0,b.jsx)(c.A,{onClick:()=>{w(!1),null===Q||void 0===Q||Q.resetForm()},"data-bs-dismiss":"modal","aria-label":"Close",color:"error",variant:"outlined",className:"py-2 px-4 rounded me-2",children:"Cancel"}),(0,b.jsx)(c.A,{type:"submit",color:"success",variant:"contained",className:"py-2 px-4 rounded",children:"Submit"})]})})]})})]}),(0,b.jsxs)(v.A,{show:A,onHide:()=>C(!1),children:[(0,b.jsx)(v.A.Header,{closeButton:!0,children:(0,b.jsx)(v.A.Title,{className:"",children:"Add Course Content"})}),(0,b.jsx)(v.A.Body,{children:(0,b.jsx)("form",{onSubmit:L.handleSubmit,autoComplete:"off",children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)(o.A,{className:"my-2",required:!0,size:"small",label:"Title",name:"title",fullWidth:!0,value:L.values.title,onChange:L.handleChange}),(0,b.jsx)(o.A,{className:"my-2",maxRows:3,multiline:!0,size:"small",label:"Descriptions",name:"desc",fullWidth:!0,value:L.values.desc,onChange:L.handleChange}),(0,b.jsx)(o.A,{type:"number",className:"my-2 px-1 w-50",size:"small",label:"Duration (Min)",required:!0,name:"quiz_duration",value:L.values.quiz_duration,onChange:L.handleChange}),(0,b.jsx)(o.A,{type:"number",className:"my-2 px-1 w-50",size:"small",label:"Passing Criteria (%)",required:!0,name:"passing_criteria",value:L.values.passing_criteria,onChange:L.handleChange}),(0,b.jsx)(o.A,{type:"number",className:"my-2 px-1 w-50",size:"small",label:"Order",required:!0,name:"order",value:L.values.order,onChange:L.handleChange}),(0,b.jsxs)("select",{name:"level",className:"text-dark px-1 w-25 p-2 my-2 border-1 rounded-2 border-secondary",value:L.values.level,onChange:L.handleChange,defaultValue:"",children:[(0,b.jsx)("option",{children:"Easy"}),(0,b.jsx)("option",{children:"Medium"}),(0,b.jsx)("option",{children:"Hard"})]}),(0,b.jsxs)("div",{className:"w-25 px-2 d-inline-block py-1",children:[(0,b.jsx)("input",{type:"checkbox",class:"btn-check p-0 m-0",id:"btn-check-outlined",autocomplete:"off",name:"status",checked:"active"===L.values.status,onChange:()=>{L.setFieldValue("status","active"===L.values.status?"inactive":"active")}}),(0,b.jsx)("label",{class:"btn px-3 py-1 m-1 btn-outline-success",for:"btn-check-outlined",children:"Active"})]}),(0,b.jsx)(c.A,{type:"submit",className:"px-4 w-25 mx-2 p-2",variant:"outlined",children:"Create"})]})})})]})]})}}}]);
//# sourceMappingURL=9672.0eb1a167.chunk.js.map