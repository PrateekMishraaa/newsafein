"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[5890],{73874:(e,t,l)=>{l.r(t),l.d(t,{default:()=>h});var i=l(81045),a=l(45543),n=l(57313),s=l(65043),o=l(73216),d=l(85595),r=l(71080),c=l(65324),u=l(47503),m=l(21179),v=l(70579);const h=()=>{const{ErrorResponder:e}=(0,r.A)(),{token:t}=(0,d.SF)(),[l]=(0,o.KC)(),[h,p]=s.useState(null);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"row row-cols-1 row-cols-lg-2 mb-3 g-2",children:[(0,v.jsx)("div",{className:"col",children:(0,v.jsx)("h6",{children:"Profile Picture"})}),(0,v.jsx)("div",{className:"col",children:(0,v.jsxs)("form",{onSubmit:async function(l){l.preventDefault(),u.oR.loading("Please wait...");const i=new FormData;if(i.append("file",h),t)try{const e=await a.DX.put("/institute/profile?update_type=logo",i,{headers:{Authorization:t}});200===e.status&&(u.oR.dismiss(),u.oR.success(e.data.message))}catch(n){e(n)}},className:"d-flex align-items-center justify-content-between",children:[(0,v.jsx)(i.A,{alt:"profile",name:"profilepic",className:"rounded",src:h?URL.createObjectURL(h):null===l||void 0===l?void 0:l.logo,sx:{width:80,height:80}}),(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-start",children:[(0,v.jsxs)(n.Ay,{color:"success",size:"lg",component:"label",children:[(0,v.jsx)("input",{hidden:!0,name:"profile",accept:".png, .jpg, .jpeg",type:"file",onChange:e=>{var t,l,i;(null===(t=e.target)||void 0===t||null===(l=t.files[0])||void 0===l?void 0:l.size)<5e6?p(e.target.files[0]):null!==(i=e.target)&&void 0!==i&&i.files[0]&&(e.target.value=null,(0,c.z)("warning","Exceed Logo size Limit!! \n Size Limit : 5 MB "))}}),(0,v.jsx)(m.A,{})]}),(0,v.jsx)("button",{className:"btn btn-outline-success ms-1 rounded-3 fw-semibold",type:"submit",children:"Upload Logo"})]})]})})]})})}},95890:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var i=l(65043),a=l(20648),n=l(67784),s=l(53193),o=l(45543),d=l(85595),r=l(81673),c=l(30064),u=l.n(c),m=l(73216),v=l(71080),h=l(54420),p=l(43640),g=l(57525),x=l(28458),b=l(51982),j=l(35835),f=l(73033),_=l(51787),w=l(65324),N=l(39078);const A=()=>{const[e,t]=(0,i.useState)([]),[l,a]=(0,i.useState)([]);let[n,s]=(0,i.useState)(null),[d,r]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[m,v]=(0,i.useState)(null);const[h,p]=(0,i.useState)(""),[g,x]=(0,i.useState)(!1),[b,j]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{try{const l=await o.TR.get("/public/stateanddistrict");var e;200===l.status&&t(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.data)}catch(l){console.log(l),w.g.warning({title:"Registeration is not available right now. Please try again"})}})(),(()=>{var e,t,l;null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t||null===(l=t.geolocation)||void 0===l||l.getCurrentPosition(e=>{const t=null===e||void 0===e?void 0:e.coords;j(t)})})()},[]),(0,i.useEffect)(()=>{var e;e=b,N.A.setApiKey("AIzaSyBxphSkk_cMLJE6Ii12fiToBaXuxGYQukQ"),N.A.setLanguage("en"),N.A.setRegion("IN"),N.A.setLocationType("ROOFTOP"),N.A.enableDebug(),e?N.A.fromLatLng(e.latitude,e.longitude).then(e=>{let t=e.results[0].formatted_address;e.results[0].address_components.forEach((e,l)=>{"postal_code"===e.types[0].toLowerCase()&&(t=t.replace(e.long_name,""),v(e.long_name)),"country"===e.types[0].toLowerCase()&&(t=t.replace(e.long_name,""),u(e.long_name)),"administrative_area_level_3"===e.types[0].toLowerCase()&&(t=t.replace(e.long_name,""),r(e.long_name)),"administrative_area_level_1"===e.types[0].toLowerCase()&&(t=t.replace(e.long_name,""),s(e.long_name)),t=t.replace(",  ,","").trim()}),p(t)},e=>{console.error(e)}):x(!1)},[b]),{findingLocation:g,liveState:n,liveDistrict:d,liveCountry:c,livePostalCode:m,currentAddress:h,states:e}};var y=l(73874),k=l(70579);const C=(new f.Ik).shape({title:f.Yj().max(10).required("Title is Required"),first_name:f.Yj().max(100).required("First Name is Required"),last_name:f.Yj().max(100).required("Last Name is Required"),email:f.Yj().email().required("Email is required"),contact:f.Yj().required("Phone Number is Required").matches(/^[0-9]{10}$/,"Invalid Mobile Number"),fb:f.Yj().matches(/(?:www.facebook.com|www.fb.com|facebook.com|fb.com)/,"facebook profile url must match www.facebook.com").notRequired(),twitter:f.Yj().matches(/(?:twitter.com|www.twitter.com)/,"twitter profile url must match www.twitter.com").notRequired(),insta:f.Yj().matches(/(?:instagram.com|www.instagram.com)/,"Instagram profile url must match www.instagram.com").notRequired(),lkd:f.Yj().matches(/(?:linkedin.com|www.linkedin.com)/,"Linkedin profile url must match www.linkedin.com").notRequired(),ytb:f.Yj().matches(/(?:youtube.com|www.youtube.com)/,"Youtube profile url must match www.youtube.com").notRequired(),institution_name:f.Yj().required("Institution name is required"),bio:f.Yj().max(350,"Too long! ( max 350 characters )").required("Bio is required"),institution_address:f.Yj().required("Institution Address is required"),state:f.Yj().max(200).required("State is required"),pincode:f.Yj().required("Pin code is Required").matches(/^[0-9]{6}$/,"Invalid Pin code")}),S=()=>{var e,t,l,c,f,w,N,S,L,I,q,P,R,T,z,F,Y,B,W,E,D;const{ErrorResponder:M}=(0,v.A)(),{token:V}=(0,d.SF)(),[O,K]=(0,m.KC)(),[U,X]=(localStorage.getItem("token",V),(0,i.useState)(null));(0,i.useEffect)(()=>{const e=localStorage.getItem("token")||V;if(e)try{const t=(0,h.s)(e);console.log("Decoded token details:",t),X(t)}catch(t){console.error("Error decoding JWT token:",t),localStorage.removeItem("token")}},[V]);const J=(0,a.Wx)({initialValues:{title:(null===O||void 0===O?void 0:O.title)||"Mr.",first_name:(null===O||void 0===O?void 0:O.first_name)||(null===U||void 0===U||null===(e=U.data)||void 0===e?void 0:e.first_name)||"",middle_name:(null===O||void 0===O?void 0:O.middle_name)||"",last_name:(null===O||void 0===O?void 0:O.last_name)||(null===U||void 0===U||null===(t=U.data)||void 0===t?void 0:t.last_name)||"",contact:(null===O||void 0===O?void 0:O.contact)||(null===U||void 0===U||null===(l=U.data)||void 0===l?void 0:l.contact)||"",email:(null===O||void 0===O?void 0:O.email)||(null===U||void 0===U||null===(c=U.data)||void 0===c?void 0:c.email)||"",fb:(null===O||void 0===O?void 0:O.fb)||"",twitter:(null===O||void 0===O?void 0:O.twitter)||"",insta:(null===O||void 0===O?void 0:O.insta)||"",lkd:(null===O||void 0===O?void 0:O.lkd)||"",ytb:(null===O||void 0===O?void 0:O.ytb)||"",institution_name:(null===O||void 0===O?void 0:O.institution_name)||(null===U||void 0===U||null===(f=U.data)||void 0===f?void 0:f.institution_name)||"",bio:(null===O||void 0===O?void 0:O.bio)||(null===U||void 0===U||null===(w=U.data)||void 0===w?void 0:w.about_institute)||"",institution_address:(null===O||void 0===O?void 0:O.institution_address)||(null===U||void 0===U||null===(N=U.data)||void 0===N?void 0:N.institution_address)||"",state:(null===O||void 0===O?void 0:O.state)||"",district:(null===O||void 0===O?void 0:O.district)||"",pincode:(null===O||void 0===O?void 0:O.pincode)||""},enableReinitialize:!0,validationSchema:C,onSubmit:async(e,t)=>{let{resetForm:l}=t;console.log(e,"====>>>val"),u().fire({width:300,title:"Loading...",didOpen:()=>{u().showLoading()}});const i=e.bio.replaceAll("'","'"),a=new FormData;a.append("title",e.title),a.append("first_name",e.first_name),a.append("middle_name",e.middle_name),a.append("last_name",e.last_name),a.append("contact",e.contact),a.append("fb",e.fb),a.append("twitter",e.twitter),a.append("insta",e.insta),a.append("lkd",e.lkd),a.append("ytb",e.ytb),a.append("institution_name",e.institution_name),a.append("bio",i),a.append("institution_address",e.institution_address),a.append("state",e.state),a.append("district",e.district),a.append("pincode",e.pincode);const n=localStorage.getItem("token")||V;if(n)try{const e=await o.DX.put("/institute/profile?update_type=basic",a,{headers:{Authorization:n}});200===e.status&&(u().fire({title:e.data.message,icon:"success",width:400}),l(),K())}catch(s){M(s)}}});(0,i.useEffect)(()=>{null!==U&&void 0!==U&&U.data&&(null!==O&&void 0!==O&&O.first_name||!U.data.first_name||J.setFieldValue("first_name",U.data.first_name),null!==O&&void 0!==O&&O.last_name||!U.data.last_name||J.setFieldValue("last_name",U.data.last_name),null!==O&&void 0!==O&&O.contact||!U.data.contact||J.setFieldValue("contact",U.data.contact),null!==O&&void 0!==O&&O.email||!U.data.email||J.setFieldValue("email",U.data.email),null!==O&&void 0!==O&&O.institution_name||!U.data.institution_name||J.setFieldValue("institution_name",U.data.institution_name),null!==O&&void 0!==O&&O.institution_address||!U.data.institution_address||J.setFieldValue("institution_address",U.data.institution_address))},[U,O]);const[Q,$]=(0,i.useState)([]),{states:G}=A();return(0,i.useEffect)(()=>{var e;(async e=>{if(null!==e&&void 0!==e&&e.length&&null!==G&&void 0!==G&&G.length){var t;let l=await(null===G||void 0===G?void 0:G.findIndex(t=>{var l;return(null===t||void 0===t||null===(l=t.state)||void 0===l?void 0:l.toLowerCase())===e.toLowerCase()}));$(null===(t=G[l])||void 0===t?void 0:t.District)}})(null===J||void 0===J||null===(e=J.values)||void 0===e?void 0:e.state)},[null===J||void 0===J||null===(S=J.values)||void 0===S?void 0:S.state,G]),(0,i.useEffect)(()=>{null!==O&&void 0!==O&&O.title&&J.setFieldValue("title",null===O||void 0===O?void 0:O.title)},[O]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.default,{}),(0,k.jsx)("form",{onSubmit:J.handleSubmit,children:(0,k.jsxs)("div",{className:"row row-cols-1 row-cols-lg-2 g-2 gy-4",children:[(0,k.jsx)("div",{className:"col",children:(0,k.jsx)("h6",{children:"Full Name"})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsxs)("div",{className:"row cols-1 row-cols-lg-2 g-2",children:[(0,k.jsx)("div",{className:"col-12 col-lg-2",children:(0,k.jsxs)("select",{id:"title",name:"title",className:"form-select h-100 py-3",label:"Title",value:J.values.title,onChange:J.handleChange,required:!0,children:[(0,k.jsx)("option",{value:"Mr.",children:"Mr."}),(0,k.jsx)("option",{value:"Ms.",children:"Ms."}),(0,k.jsx)("option",{value:"Miss",children:"Miss"})]})}),(0,k.jsx)("div",{className:"col-12 col-lg-5",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"first_name",name:"first_name",label:"First Name",size:"large",InputLabelProps:{shrink:!0},value:J.values.first_name,disabled:!0,error:J.touched.first_name&&Boolean(J.errors.first_name),required:!0,helperText:J.touched.first_name&&J.errors.first_name})}),(0,k.jsx)("div",{className:"col-12 col-lg-5",children:(0,k.jsx)(n.A,{fullWidth:!0,required:!0,id:"last_name",name:"last_name",label:"Last Name",size:"large",InputLabelProps:{shrink:!0},value:J.values.last_name,disabled:!0,onChange:J.handleChange,error:J.touched.last_name&&Boolean(J.errors.last_name),helperText:J.touched.last_name&&J.errors.last_name})})]})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)("h6",{children:"Contact Number"})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,required:!0,id:"contact",name:"contact",label:"Contact",size:"large",InputLabelProps:{shrink:!0},value:J.values.contact,onChange:J.handleChange,error:J.touched.contact&&Boolean(J.errors.contact),helperText:J.touched.contact&&J.errors.contact})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)("h6",{children:"Email"})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"email",name:"email",label:"Email Address",size:"large",InputLabelProps:{shrink:!0},value:J.values.email,onChange:J.handleChange,error:J.touched.email&&Boolean(J.errors.email),disabled:!0,helperText:J.touched.email&&J.errors.email})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)("h6",{children:"About"})}),(0,k.jsxs)("div",{className:"col",children:[(0,k.jsx)(n.A,{fullWidth:!0,id:"bio",name:"bio",label:"Bio",multiline:!0,rows:4,size:"large",InputLabelProps:{shrink:!0},value:J.values.bio,disabled:!0,onChange:J.handleChange,error:J.touched.bio&&Boolean(J.errors.bio),helperText:J.touched.bio&&J.errors.bio}),null===J||void 0===J||null===(L=J.values)||void 0===L||null===(I=L.bio)||void 0===I?void 0:I.length," Characters ("," ",350-(null===J||void 0===J||null===(q=J.values)||void 0===q||null===(P=q.bio)||void 0===P?void 0:P.length)," left)"]}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)("h6",{children:"School Name"})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"institution_name",name:"institution_name",label:"School Name",multiline:!0,rows:3,size:"large",InputLabelProps:{shrink:!0},value:J.values.institution_name,disabled:!0,onChange:J.handleChange,error:J.touched.institution_name&&Boolean(J.errors.institution_name),helperText:J.touched.institution_name&&J.errors.institution_name})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)("h6",{children:"School Address"})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsxs)("div",{className:"row g-2",children:[(0,k.jsx)("div",{className:"col-12",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"institution_address",name:"institution_address",label:"School Address",multiline:!0,rows:3,size:"large",InputLabelProps:{shrink:!0},value:J.values.institution_address,disabled:!0,onChange:J.handleChange,error:J.touched.institution_address&&Boolean(J.errors.institution_address),helperText:J.touched.institution_address&&J.errors.institution_address})}),(0,k.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,k.jsxs)(s.A,{fullWidth:!0,children:[(0,k.jsxs)("label",{children:["Select State ",(0,k.jsx)("b",{className:"text-danger",children:"*"})]}),(0,k.jsx)("select",{id:"state",name:"state",className:"form-select py-3",onChange:null===J||void 0===J?void 0:J.handleChange,value:null===J||void 0===J||null===(R=J.values)||void 0===R?void 0:R.state,children:null===G||void 0===G?void 0:G.map((e,t)=>(0,k.jsx)("option",{value:null===e||void 0===e?void 0:e.state,children:null===e||void 0===e?void 0:e.state},t))})]}),(0,k.jsx)(r.A,{className:"text-danger",children:(null===J||void 0===J||null===(T=J.touched)||void 0===T?void 0:T.state)&&(null===J||void 0===J||null===(z=J.errors)||void 0===z?void 0:z.state)})]}),(0,k.jsx)("div",{className:"col-12 col-lg-6",children:(0,k.jsxs)(s.A,{fullWidth:!0,children:[(0,k.jsxs)("label",{children:["Select District ",(0,k.jsx)("b",{className:"text-danger",children:"*"})]}),(0,k.jsx)("select",{id:"district",name:"district",className:"form-select py-3",value:null===J||void 0===J||null===(F=J.values)||void 0===F?void 0:F.district,onChange:null===J||void 0===J?void 0:J.handleChange,children:null===Q||void 0===Q?void 0:Q.map((e,t)=>(0,k.jsx)("option",{value:null===e||void 0===e?void 0:e.district,children:null===e||void 0===e?void 0:e.district},t))}),(0,k.jsx)(r.A,{className:"text-danger",children:(null===J||void 0===J?void 0:J.touched.district)&&(null===J||void 0===J?void 0:J.errors.district)})]})}),(0,k.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,k.jsxs)("span",{children:["Pincode ",(0,k.jsx)("b",{className:"text-danger",children:"*"})]}),(0,k.jsx)(n.A,{id:"pincode",name:"pincode",fullWidth:!0,InputLabelProps:{shrink:!0},value:null===J||void 0===J||null===(Y=J.values)||void 0===Y?void 0:Y.pincode,onChange:null===J||void 0===J?void 0:J.handleChange,error:(null===J||void 0===J||null===(B=J.errors)||void 0===B?void 0:B.pincode)&&(null===J||void 0===J||null===(W=J.touched)||void 0===W?void 0:W.pincode),type:"number",helperText:(null===J||void 0===J||null===(E=J.touched)||void 0===E?void 0:E.pincode)&&(null===J||void 0===J||null===(D=J.errors)||void 0===D?void 0:D.pincode)})]})]})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)("h5",{children:"Social Links"})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsxs)("div",{className:"row row-cols-1 row-cols-lg-2 g-3",children:[(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"fb",name:"fb",label:"Facebook",size:"large",type:"url",value:J.values.fb,onChange:J.handleChange,error:J.touched.fb&&Boolean(J.errors.fb),helperText:J.touched.fb&&J.errors.fb,InputProps:{startAdornment:(0,k.jsxs)(_.A,{position:"start",children:[(0,k.jsx)(p.A,{sx:{color:"blue"}})," "]})}})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"twitter",name:"twitter",label:"Twitter",type:"url",size:"large",value:J.values.twitter,onChange:J.handleChange,error:J.touched.twitter&&Boolean(J.errors.twitter),helperText:J.touched.twitter&&J.errors.twitter,InputProps:{startAdornment:(0,k.jsxs)(_.A,{position:"start",children:[(0,k.jsx)(g.A,{sx:{color:"skyblue"}})," "]})}})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"insta",name:"insta",label:"Instagram",type:"url",size:"large",value:J.values.insta,onChange:J.handleChange,error:J.touched.insta&&Boolean(J.errors.insta),helperText:J.touched.insta&&J.errors.insta,InputProps:{startAdornment:(0,k.jsxs)(_.A,{position:"start",children:[(0,k.jsx)(x.A,{sx:{color:"red"}})," "]})}})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"lkd",name:"lkd",label:"LinkedIn",type:"url",size:"large",value:J.values.lkd,onChange:J.handleChange,error:J.touched.lkd&&Boolean(J.errors.lkd),helperText:J.touched.lkd&&J.errors.lkd,InputProps:{startAdornment:(0,k.jsxs)(_.A,{position:"start",children:[(0,k.jsx)(b.A,{sx:{color:"blue"}})," "]})}})}),(0,k.jsx)("div",{className:"col",children:(0,k.jsx)(n.A,{fullWidth:!0,id:"ytb",name:"ytb",label:"Youtube",type:"url",size:"large",InputLabelProps:{shrink:!0},value:J.values.ytb,onChange:J.handleChange,error:J.touched.ytb&&Boolean(J.errors.ytb),helperText:J.touched.ytb&&J.errors.ytb,InputProps:{startAdornment:(0,k.jsxs)(_.A,{position:"start",children:[(0,k.jsx)(j.A,{sx:{color:"red"}})," "]})}})})]})})]})})]})}}}]);
//# sourceMappingURL=5890.fe5a008d.chunk.js.map