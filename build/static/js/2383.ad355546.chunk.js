(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[2383],{17640:()=>{},23237:()=>{},31815:()=>{},66671:()=>{},77185:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var o=s(45543),l=s(65043),n=s(73216),i=s(81e3),r=s(1580),a=s(70579);const d=e=>{let{content:t,postProgress:s}=e;const[o,n]=(0,l.useState)("");(0,l.useEffect)(()=>{if(null!==t&&void 0!==t&&t.path){const e=function(e){const t=e.split(/[?&#]/)[0];if(/^[a-zA-Z0-9_-]{11}$/.test(t))return t;const s=/(?:https?:\/\/)?(?:www\.)?youtube\.com\/(?:watch\?v=|embed\/|v\/|user\/[^\s\/]+\/videos\/|watch\/videos\/|shorts\/)?([^"&?\/\s]{11})/,o=/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([^"&?\/\s]{11})/;return s.test(e)?e.match(s)[1]:o.test(e)?e.match(o)[1]:(console.log("Invalid YouTube URL or ID"),null)}(null===t||void 0===t?void 0:t.path);console.log("Extracted video ID:",e),n(e)}},[null===t||void 0===t?void 0:t.path]);return(0,l.useEffect)(()=>{const e=()=>{console.log("Scroll event detected")};return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[]),(0,a.jsx)(a.Fragment,{children:o?(0,a.jsx)(i.A,{className:"theatre",sx:{"& .video-container":{height:"70vh",width:"100%"}},children:(0,a.jsx)(r.A,{videoId:o,opts:{height:"100%",width:"100%",playerVars:{autoplay:!0}},className:"video-container",onEnd:()=>{s(null===t||void 0===t?void 0:t.id)}})}):(0,a.jsx)("p",{children:"Loading video..."})})};var c=s(18204),u=(s(71975),s(66601),s(78185)),v=s(81637);const m=()=>(0,a.jsxs)("div",{className:"p-relative",children:[(0,a.jsx)(u.A,{variant:"rectangular",className:"w-100",style:{height:"550px"}}),(0,a.jsx)("div",{className:"p-absolute",style:{top:"50%",left:"50%"},children:(0,a.jsx)(v.A,{color:"inherit"})})]}),h=e=>{let{content:t,postProgress:s}=e;const[o,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{},[t]);c.Uy.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(c.Uy.version,"/pdf.worker.js");const[i,r]=(0,l.useState)(null),[d,u]=(0,l.useState)(null),[v,h]=(0,l.useState)(1);function x(e){h(t=>t+e)}return document.addEventListener("contextmenu",e=>{e.preventDefault()}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"main container px-0",style:{width:d||"auto",maxWidth:"100%",overflow:"hidden"},children:[(0,a.jsx)(c.yo,{file:"http://localhost:3100/v2/pdf?url="+t.path,error:(0,a.jsx)(m,{}),onLoadSuccess:function(e){r(e.numPages),h(1),n(!0)},loading:(0,a.jsx)(m,{}),children:(0,a.jsx)(c.YW,{pageNumber:v,renderAnnotationLayer:!1,error:(0,a.jsx)(m,{}),loading:(0,a.jsx)(m,{}),onRenderSuccess:function(e){u(e.width)}})}),o&&(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-center p-2",children:[(0,a.jsxs)("div",{className:"buttonc input-group align-items-center justify-content-center",children:[(0,a.jsx)("button",{type:"button",className:"btn rounded-3 me-1 btn-outline-success fw-semibold btn-sm pre",disabled:v<=1,onClick:function(){x(-1)},children:"Prev"}),v>=i?(0,a.jsx)("button",{type:"button",className:"btn btn-success border border-success fw-semibold rounded-3 btn-sm",onClick:()=>{s(null===t||void 0===t?void 0:t.id)},children:"Submit"}):(0,a.jsx)("button",{type:"button",className:"btn rounded-3 btn-outline-success fw-semibold btn-sm",disabled:v>=i,onClick:function(){x(1)},children:"Next"})]}),(0,a.jsx)("div",{className:"pagec",children:(0,a.jsxs)("small",{className:"fw-semibold",children:["Page\xa0",v||(i?1:"--"),"\xa0of\xa0",i||"--"]})})]})]})," "]})};var x=s(42518),p=(s(38421),s(89379)),j=s(68862),g=s(38628),b=s(57972),f=s(59182),N=s(14256),y=s(23768);const w=s(86178);const S=function(e){let{quizInfo:t,responseData:s,question:n,studentResult:i,setStudentResult:r,reload:d}=e;const[c,u]=(0,l.useState)(null===localStorage.getItem("CurrectQuiz")?{}:JSON.parse(localStorage.getItem("CurrectQuiz"))),v=e=>{try{return JSON.parse(e),!0}catch(t){return!1}},m=async e=>{try{var t;if((null===Object||void 0===Object||null===(t=Object.keys(c))||void 0===t?void 0:t.length)<n.length)return void y.oR.error("Sorry you cannot submit, you should answer all questions first.");const{totalQuestions:e,totalAttemted:l,totalCorrected:a,result:u}=((e,t,s)=>{t=Object(t);const o=e.length,l=Object.keys(t).length;let n=0;return e.forEach(e=>{const s=e.id;let o=e.ans;v(o)&&(o=JSON.parse(o));const l=t[s]?t[s].toString().trim().toLowerCase():null,i=o?o.toString().trim().toLowerCase():null;console.log("Comparing: User Answer: ".concat(JSON.stringify(l),", Correct Answer: ").concat(JSON.stringify(i))),l===i?(n++,console.log("Match found for id: ".concat(s),"Correct Answer: ".concat(i))):console.log("No match for id: ".concat(s),"Correct Answer: ".concat(i))}),{totalQuestions:o,totalAttemted:l,totalCorrected:n,result:n/o*100>=s?"PASS":"FAIL"}})(n,c,s.data.passing_criteria);(async(e,t,l,n)=>{try{var a;y.oR.loading("Calculating Result.."),200===(await o.hr.put("/course/quiz/",{quizId:null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.id,totalQuestions:e,totalAttemted:t,totalCorrected:l,studentResult:n,progress:JSON.stringify(c),date:w().format()})).status?(y.oR.dismiss(),localStorage.removeItem("CurrectQuiz"),r((0,p.A)((0,p.A)({},i),{},{reattempt:!0})),d()):(y.oR.dismiss(),y.oR.error("Something Went Wrong!!!!!"))}catch(u){y.oR.dismiss(),console.error(u),y.oR.error("Something Went Wrong!!!!!")}})(e,l,a,u)}catch(l){console.log(l)}};return(0,a.jsxs)("div",{className:"pb-3",children:[(0,a.jsxs)("div",{className:"bg-light border border-bottom container py-3",children:[null!==t&&void 0!==t&&t.title?(0,a.jsx)("h5",{children:null===t||void 0===t?void 0:t.title}):"",(0,a.jsx)("p",{className:"mb-0",children:null===t||void 0===t?void 0:t.desc})]}),(0,a.jsx)("div",{children:(0,a.jsxs)(j.A,{onSubmit:e=>{e.preventDefault()},children:[null===n||void 0===n?void 0:n.map((e,t)=>{var s;return 1===e.type?(0,a.jsxs)(g.A,{className:"container border-0",children:[(0,a.jsxs)(g.A.Header,{className:"border-0 bg-white",children:[(0,a.jsxs)("div",{className:"d-flex fw-semibold text-dark",children:["Q",t+1,". ",(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.ques}})]}),Boolean(null===e||void 0===e||null===(s=e.image)||void 0===s?void 0:s.length)&&v(null===e||void 0===e?void 0:e.image)&&(0,a.jsx)("div",{className:"row row-cols-1 row-cols-lg-2 g-2",children:JSON.parse(null===e||void 0===e?void 0:e.image).map((e,t)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)("img",{className:"w-100",src:e,alt:"image-".concat(t)})},t))})]}),(0,a.jsxs)(g.A.Body,{children:[(0,a.jsx)("h6",{children:"Options :"}),(0,a.jsx)(b.A,{name:"case-1-radio",className:"row row-cols-1 p-2 g-1",onChange:t=>((e,t,s)=>{let o=(0,p.A)({},c),l=o[t];if(3===s)if(null===l||void 0===l?void 0:l.includes(e)){let t=l.indexOf(e);t>-1&&l.splice(t,1)}else o[t]?o[t].push(e):o[t]=[e];else o[t]=e;u(o),localStorage.setItem("CurrectQuiz",JSON.stringify(o))})(t.target.value,e.id,e.type),children:v(null===e||void 0===e?void 0:e.options)&&JSON.parse(null===e||void 0===e?void 0:e.options).map((e,t)=>(0,a.jsx)(f.A,{value:e,className:"border border-1 rounded py-2",control:(0,a.jsx)(N.A,{sx:{"& .MuiSvgIcon-root":{fontSize:28},"&.Mui-checked":{color:"green"}}}),label:(0,a.jsx)("small",{className:"text-dark text-capitalize me-2 d-block lh-sm",children:e})},t))})]})]},t):null}),(0,a.jsx)("div",{className:"text-center ",children:(0,a.jsx)(x.A,{onClick:e=>m(),type:"submit",variant:"contained",className:"text-capitalize py-2 px-4 rounded",color:"success",children:"Submit"})})]})})]})},A=e=>{let{questions:t,response:s}=e;console.log({questions:t,response:s});const o=!!Boolean(s)&&JSON.parse(s);function l(e,t){try{if(5==t.type)return(0,a.jsx)("img",{src:e[null===t||void 0===t?void 0:t.id],className:"w-50"});if(3!==t.type){let s=String(e[null===t||void 0===t?void 0:t.id]);return null===s||void 0===s?void 0:s.replaceAll('"',"")}return e[null===t||void 0===t?void 0:t.id].map((e,t)=>(0,a.jsx)("div",{className:"d-inline-block me-2 border px-2 rounded bg-light mb-1",children:e}))}catch(s){console.log(s)}}function n(e,t){try{if(5==t.type)return"";let s=JSON.parse(e).map((e,s)=>(0,a.jsxs)("li",{className:"option d-block me-2 p-1 ".concat(r(e,t)),children:[s+1,".\xa0",e]}));return(0,a.jsxs)("ul",{className:"options ps-1",children:[(0,a.jsx)("b",{children:"Options :"})," ",s]})}catch(s){return console.log(s),""}}function i(e){try{return e.replaceAll('"',"")}catch(t){return console.log(t),""}}function r(e,t){try{let l="";if(o){var s;(null===t||void 0===t||null===(s=t.ans)||void 0===s?void 0:s.replaceAll('"',"").toLowerCase())===e.toLowerCase()&&(l+="text-success")}return l}catch(l){return console.log(l),""}}function d(e,t){try{let o="";if(e){var s;const l=Boolean(e[null===t||void 0===t?void 0:t.id])?e[null===t||void 0===t?void 0:t.id].replaceAll('"',"").toLowerCase():"";o+=l===(null===t||void 0===t||null===(s=t.ans)||void 0===s?void 0:s.replaceAll('"',"").toLowerCase())?"text-success":"text-danger"}return o}catch(o){return console.log(o),""}}return(0,a.jsx)("div",{className:"py-3",children:(0,a.jsx)("div",{className:"ques-summary",children:null===t||void 0===t?void 0:t.map((e,s)=>{var r,c;return(0,a.jsxs)("div",{className:"ques-summary-list mb-2",children:[(0,a.jsxs)("h6",{className:"mb-1 d-flex",children:[(0,a.jsx)("span",{children:"Q".concat(s+1,"- ")}),"\xa0",(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:null===e||void 0===e?void 0:e.ques}})]}),Boolean(null===e||void 0===e?void 0:e.image)&&Boolean(JSON.parse(null===e||void 0===e?void 0:e.image).length)&&(0,a.jsx)("div",{className:"row row-cols-1 row-cols-lg-2 g-2",children:JSON.parse(null===e||void 0===e?void 0:e.image).map((e,t)=>(0,a.jsx)("div",{className:"col",children:(0,a.jsx)("img",{className:"w-100",src:e})},t))}),Boolean(null===e||void 0===e?void 0:e.ans)&&(null===e||void 0===e?void 0:e.type)<3&&(null===e||void 0===e||null===(r=e.ans)||void 0===r?void 0:r.length)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Correct Answer :"})," ",i(null===e||void 0===e?void 0:e.ans)]}),Boolean(o[null===e||void 0===e?void 0:e.id])&&(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Your's Ans :"}),(0,a.jsx)("span",{className:d(o,e),children:l(o,e)})]}),Boolean(null===e||void 0===e?void 0:e.options)&&n(null===e||void 0===e?void 0:e.options,e),Boolean(null===e||void 0===e?void 0:e.desc)&&(0,a.jsx)("div",{className:"border border-2 border-success p-2 bg-success bg-opacity-25 rounded mt-2",children:null===e||void 0===e||null===(c=e.desc)||void 0===c?void 0:c.replaceAll('"',"")}),s+1<t.length&&(0,a.jsx)("hr",{})]},s)})})})},C=e=>{let{content:t,activeContentId:s,postProgress:n,progress:i,fetchNextStop:r}=e;const[d,c]=l.useState({}),[u,v]=l.useState({}),[m,h]=l.useState({reattempt:!0}),[p,j]=l.useState([]);async function g(){try{var e,s,l,a;const x=await o.hr.post("/course/quiz/",{quizId:null===t||void 0===t?void 0:t.path});var d,u,m;if(console.log({response:null===x||void 0===x?void 0:x.data}),v(null===x||void 0===x?void 0:x.data),c(null===x||void 0===x||null===(e=x.data)||void 0===e?void 0:e.data),j(null===x||void 0===x||null===(s=x.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.question),null!==x&&void 0!==x&&null!==(a=x.data)&&void 0!==a&&a.result)h(null===x||void 0===x||null===(d=x.data)||void 0===d?void 0:d.result),"PASS"!==(null===x||void 0===x||null===(u=x.data)||void 0===u||null===(m=u.result)||void 0===m?void 0:m.result)||null!==i&&void 0!==i&&i.includes(null===t||void 0===t?void 0:t.id)||(r(4),n(null===t||void 0===t?void 0:t.id));else h({reattempt:!0})}catch(x){console.error(x)}}return l.useEffect(()=>{g()},[null===t||void 0===t?void 0:t.path]),(0,a.jsx)("div",{className:"d-flex align-items-top justify-content-center",style:{height:600,overflowY:"auto"},children:(0,a.jsxs)("div",{className:"w-100 p-2",children:[console.log({question:p,result:Boolean(null===m||void 0===m?void 0:m.progress)&&(null===m||void 0===m?void 0:m.progress)}),null!==m&&void 0!==m&&m.result?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"container item-center px-3 mx-auto m-5",style:{maxWidth:"550px"},children:["FAIL"===m.result?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("img",{src:"http://glcloud.in/uploads/Yuvamanthan/course/64f9b391abc92.jpg",className:"w-100 mx-auto d-block",alt:"",style:{maxWidth:300}}),(0,a.jsx)("h4",{className:"mt-3 text-danger",children:"You Have to Retake This Activity"})]}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("img",{src:"http://glcloud.in/uploads/Yuvamanthan/course/64f9b367c31a3.jpg",className:"w-100 mx-auto d-block",alt:"",style:{maxWidth:300}}),(0,a.jsx)("h4",{className:"mt-3 text-success",children:"You Have Successfully Completed This Activity"})]}),(0,a.jsx)("div",{className:"container item-center text-center",children:"FAIL"===m.result&&(0,a.jsx)(x.A,{onClick:()=>{h({reattempt:!0})},variant:"outlined",color:"error",size:"large",className:"mx-auto text-capitalize rounded-3 fw-semibold",children:"Reattempt"})})]}),"PASS"===m.result&&(0,a.jsxs)("div",{className:"container border-top pt-4",children:[(0,a.jsx)("h5",{children:"Summary:"}),(0,a.jsx)(A,{questions:p,response:null===m||void 0===m?void 0:m.progress})," "]})]}):null!==m&&void 0!==m&&m.reattempt?(0,a.jsxs)("div",{className:"container item-center py-4",style:{maxWidth:"550px"},children:[(0,a.jsx)("div",{className:"table-responsive rounded-4 border overflow-hidden mb-3",children:(0,a.jsxs)("table",{className:"table w-100 table-borderless",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{className:"bg-light",children:(0,a.jsxs)("td",{colSpan:2,className:"text-center",children:[(0,a.jsx)("h6",{children:null===d||void 0===d?void 0:d.title}),(0,a.jsx)("p",{children:null===d||void 0===d?void 0:d.desc})]})})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:"Duration"}),(0,a.jsxs)("td",{children:[null===d||void 0===d?void 0:d.quiz_duration," Min"]})]}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"3",children:(0,a.jsx)("div",{children:(0,a.jsx)("b",{children:"Note: You Must Attempt All Questions"})})})})]})]})}),(0,a.jsx)("div",{className:"container item-center text-center",children:(0,a.jsx)(x.A,{onClick:()=>{h({reattempt:!1})},variant:"outlined",color:"success",size:"large",className:"mx-auto text-capitalize rounded",children:"Let's Begin"})})]}):(0,a.jsx)(S,{quizInfo:d,responseData:u,reload:g,question:p,studentResult:m,setStudentResult:h})]})})},k=(e,t,s,o,l,n)=>{switch(null===e||void 0===e?void 0:e.type){case 1:return(0,a.jsx)(d,{content:e,postProgress:s});case 2:return(0,a.jsx)(h,{content:e,postProgress:s});case 3:return(0,a.jsx)(C,{content:e,progress:t,postProgress:s,activeContentId:o,setActiveContentId:l,fetchNextStop:n});default:return(0,a.jsx)(m,{})}},I=()=>{const{courseDetail:e,activeContentId:t,setActiveContentId:s,fetchNextContent:i,progress:r,postProgress:d,fetchNextStop:c}=(0,n.KC)(),[u,v]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{var e;const s=await o.DX.get("/v2/course/play/content-detail/"+t);var l;"success"===(null===(e=s.data)||void 0===e?void 0:e.status)&&v(null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.result)})()},[t]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"border-bottom",children:u?k(u,r,d,t,s,c):(0,a.jsx)(m,{})})})}},82787:()=>{},97492:()=>{}}]);
//# sourceMappingURL=2383.ad355546.chunk.js.map