"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[4221],{39880:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(66734),a=n(70579);const o=(0,s.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"SearchTwoTone")},39983:(e,t,n)=>{var s=n(24994);t.A=void 0;var a=s(n(40039)),o=n(70579);t.A=(0,a.default)((0,o.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp")},40430:(e,t,n)=>{var s=n(24994);t.A=void 0;var a=s(n(40039)),o=n(70579);t.A=(0,a.default)((0,o.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown")},42949:(e,t,n)=>{n.d(t,{HB:()=>r,Kx:()=>l,PJ:()=>c});var s=n(45543),a=n(47503),o=n(30064),i=n.n(o);const l=async e=>{const t=await i().fire({title:"Please type 'confirm' for Delete the User.",input:"text",inputValue:"",showCancelButton:!0,inputValidator:e=>{if(!e)return"Please Enter Text 'confirm' in Input Field."},customClass:{title:"title_text"}});if(t.isConfirmed){const i=t.value;try{let t=await s.TR.delete("/admin/deleteUserData/".concat(e,"?confirmation=").concat(i));200==t.status&&a.oR.success(t.data.message)}catch(c){var n,o,l,r;a.oR.error(null!==c&&void 0!==c&&null!==(n=c.response)&&void 0!==n&&null!==(o=n.data)&&void 0!==o&&o.message?null===c||void 0===c||null===(l=c.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message:"Something Went Wrong Check your Network Connection")}}},r=async e=>{const t=await i().fire({title:"Please type 'confirm' for Delete the Institute.",input:"text",inputValue:"",showCancelButton:!0,inputValidator:e=>{if(!e)return"Please Enter Text 'confirm' in Input Field."},customClass:{title:"title_text"}});if(t.isConfirmed){const i=t.value;try{let t=await s.TR.delete("/admin/deleteInstituteData/".concat(e,"?confirmation=").concat(i));200==t.status&&a.oR.success(t.data.message)}catch(c){var n,o,l,r;a.oR.error(null!==c&&void 0!==c&&null!==(n=c.response)&&void 0!==n&&null!==(o=n.data)&&void 0!==o&&o.message?null===c||void 0===c||null===(l=c.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message:"Something Went Wrong Check your Network Connection")}}},c=async e=>{if((await i().fire({title:"Are you sure?",text:"You want to delete this certifate.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"})).isConfirmed)try{let t=await s.TR.delete("/admin/deleteCertifate/".concat(e));200==t.status&&a.oR.success(t.data.message)}catch(r){var t,n,o,l;a.oR.error(null!==r&&void 0!==r&&null!==(t=r.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message?null===r||void 0===r||null===(o=r.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message:"Something went wrong check your Network connection.")}}},51387:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(66734),a=n(70579);const o=(0,s.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},54221:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var s=n(67784),a=n(51787),o=n(42518),i=n(72949),l=n(81045),r=n(65324),c=n(86178),d=n.n(c),u=n(40430),m=n(39983),h=n(65043),v=n(45543),x=n(51387),p=n(39880),g=n(66734),f=n(70579);const j=(0,g.A)((0,f.jsx)("path",{d:"M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66M9.78 12h4.44c1.21 0 2.14-1.06 1.98-2.26l-.32-2.45C15.57 5.39 13.92 4 12 4S8.43 5.39 8.12 7.29L7.8 9.74c-.16 1.2.77 2.26 1.98 2.26"}),"Person2");var w=n(71080),N=n(30064),y=n.n(N),b=n(85595),C=n(73216),A=n(42949);const k=[{name:"id",sort:"id"},{name:"Student Name",sort:"first_name"},{name:"Institute Name",sort:"instituteId"},{name:"Guardian Name",sort:"father_name"},{name:"email",sort:"email"},{name:"contact",sort:"contact"},{name:"Joining Date",sort:"createdAt"},{name:"status",sort:"status"}];function S(){var e,t;const{ErrorResponder:n}=(0,w.A)(),[c,g]=h.useState([]),[N,S]=h.useState(["student","teacher","coordinator"]),[D,z]=h.useState(10),[B,_]=h.useState(0),[I,R]=h.useState(""),[T,P]=h.useState("student"),[W,E]=h.useState("createdAt"),[M,V]=h.useState(!0),{adminRoles:Y}=(0,b.SF)(),F=(0,C.Zp)();async function U(){try{const e=await v.DX.get("admin?data=students&role=".concat(T,"&limit=").concat(D,"&sort=").concat(W,"&sortattr=").concat(M,"&offset=").concat(B,"&search=").concat(I));console.log("response",e),200==e.status&&g(null===e||void 0===e?void 0:e.data)}catch(e){(0,r.z)("error","Something went wrong")}}h.useEffect(()=>{U()},[B,W,M,D,T]);return(0,f.jsxs)("div",{children:[(0,f.jsxs)("h5",{className:"text-capitalize",children:[T," Data"]}),(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)("div",{className:"col-lg-8",children:(0,f.jsx)(s.A,{value:I,onChange:e=>R(e.target.value),variant:"outlined",label:"Type Something here... ",fullWidth:!0,onKeyDown:e=>{"Enter"==e.key&&U()},InputProps:{endAdornment:(0,f.jsxs)(a.A,{position:"end",children:[I.length?(0,f.jsxs)(o.A,{color:"error",onClick:()=>{R(""),async function(){try{const e=await v.DX.get("admin?data=students&limit=".concat(D,"&sort=").concat(W,"&sortattr=").concat(M,"&offset=").concat(B,"&search="));console.log("response",e),200==e.status&&g(null===e||void 0===e?void 0:e.data)}catch(e){(0,r.z)("error","Something went wrong")}}()},children:[(0,f.jsx)(x.A,{})," clear"]}):"",(0,f.jsxs)(o.A,{onClick:U,children:[(0,f.jsx)(p.A,{})," Search"]})]})}})}),(0,f.jsx)("div",{className:"col",children:(0,f.jsx)("select",{name:"role-select",id:"role-select",value:T,onChange:e=>P(e.target.value),className:"form-select py-3 rounded-0 text-capitalize",children:N.map(e=>(0,f.jsx)("option",{value:e,children:e}))})})]}),(0,f.jsxs)("div",{className:"table-responsive border rounded mt-3",children:[(0,f.jsxs)("table",{className:"designed-table table table-borderless align-middle mb-0",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"bg-light ",children:[k.map((e,t)=>(0,f.jsx)("th",{scope:"col",children:(0,f.jsx)(i.A,{onClick:()=>{var t;(t=e.sort)==W?V(!M):E(t)},onDoubleClick:()=>E(null),className:"fw-semibold text-capitalize p-2",children:(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsx)("span",{className:"text-nowrap",children:e.name}),W===e.sort&&1==M&&(0,f.jsx)(m.A,{sx:{color:"green"}}),W===e.sort&&0==M&&(0,f.jsx)(u.A,{sx:{color:"tomato"}})]})})})),(0,f.jsx)("th",{hidden:5===Y(),scope:"col",className:"fw-semibold text-capitalize p-3",children:"Actions"})]})}),(0,f.jsx)("tbody",{children:null===c||void 0===c||null===(e=c.result)||void 0===e?void 0:e.map((e,t)=>(0===t&&console.log(e),(0,f.jsxs)("tr",{className:"border-bottom",children:[(0,f.jsx)("td",{className:"p-2",width:50,children:(0,f.jsx)(l.A,{alt:e.first_name,src:null===e||void 0===e?void 0:e.profile,sx:{width:36,height:36,backgroundColor:"grey"},children:(0,f.jsx)(j,{})})}),(0,f.jsxs)("td",{className:"p-3",style:{width:200},children:[null===e||void 0===e?void 0:e.title," ",null===e||void 0===e?void 0:e.first_name," ",null===e||void 0===e?void 0:e.last_name]}),(0,f.jsx)("td",{className:"p-3",style:{width:200},children:null!==e&&void 0!==e&&e.institution_name?null===e||void 0===e?void 0:e.institution_name:"No Institute"}),(0,f.jsx)("td",{className:"p-3 ",style:{width:200},children:(0,f.jsx)("span",{children:null===e||void 0===e?void 0:e.father_name})}),(0,f.jsx)("td",{className:"p-3 text-wrap",style:{width:"200 !important"},children:e.email}),(0,f.jsx)("td",{className:"p-3",style:{width:150},children:e.contact}),(0,f.jsx)("td",{className:"p-3",style:{width:150},children:e.createdAt&&d()(e.createdAt).calendar()}),(0,f.jsx)("td",{className:"p-3",style:{width:150},children:(0,f.jsx)("span",{className:"".concat("active"==e.status?"bg-success":"bg-danger"," p-1 px-3 rounded-pill text-white"),children:e.status?e.status:"Inactive"})}),(0,f.jsx)("td",{hidden:5===Y(),children:(0,f.jsx)("div",{className:"d-flex h-100",children:(0,f.jsxs)("div",{className:"dropdown",children:[(0,f.jsx)("button",{className:"btn border-0 p-0 mx-2",type:"button","data-bs-toggle":"dropdown",children:(0,f.jsx)("i",{className:"bi bi-three-dots-vertical"})}),(0,f.jsxs)("ul",{className:"dropdown-menu border rounded-4 p-3 shadow",children:[(0,f.jsx)("li",{children:(0,f.jsx)("button",{className:"btn  btn-outline-primary w-100",onClick:()=>F("/admin/editdetail/users/".concat(e.id)),children:"Edit Details"})}),(0,f.jsx)("li",{children:(0,f.jsx)("button",{type:"button",className:"btn btn-outline-danger w-100 my-2",onClick:t=>(async(e,t)=>{e.preventDefault();try{await(0,A.Kx)(t),U()}catch(n){console.error("Error deleting user:",n)}})(t,"".concat(e.id)),children:"Delete User"})}),(0,f.jsx)("li",{children:(0,f.jsx)(o.A,{onClick:()=>(async(e,t,s)=>{const a=new FormData;if(a.append("studentId",e),a.append("email",t),"active"==s)try{y().fire({title:"Are you sure?",text:"You wanted to Deactivate this Student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Deactivate it!"}).then(async e=>{if(e.isConfirmed)try{const e=await v.DX.post("admin/student?req_type=deactivate",a);200==e.status&&(y().fire({title:e.data.message,icon:"success"}),U())}catch(i){var t,n,s,o;y().fire({width:400,title:null!==i&&void 0!==i&&null!==(t=i.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message?null===i||void 0===i||null===(s=i.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message:"Something Went Wrong Check your Network Connection",icon:"error"})}})}catch(o){n(o)}else try{y().fire({title:"Are you sure?",text:"You wanted to Activate this Student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Activate it!"}).then(async e=>{if(e.isConfirmed)try{const e=await v.DX.post("admin/student?req_type=activate",a);200==e.status&&(y().fire({title:e.data.message,icon:"success"}),U())}catch(o){var t,n,s,i;y().fire({width:400,title:null!==o&&void 0!==o&&null!==(t=o.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message?null===o||void 0===o||null===(s=o.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message:"Something Went Wrong Check your Network Connection",icon:"error"})}})}catch(o){n(o)}})(e.id,e.email,e.status),variant:"outlined",className:"dropdown-item w-100 p-2 my-2",children:"active"==e.status?"Mark Inactive":"Mark Active"})})]})]})})})]},t)))})]}),(0,f.jsx)("div",{className:"bg-light p-3",children:(0,f.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,f.jsxs)("span",{className:"text-dark",children:["Showing ",null===c||void 0===c||null===(t=c.result)||void 0===t?void 0:t.length," out of ",null===c||void 0===c?void 0:c.count]}),(0,f.jsxs)("div",{className:"d-flex align-items-center",children:[(0,f.jsxs)("select",{name:"limit",value:D,className:"form-select",onChange:e=>z(e.target.value),children:[(0,f.jsx)("option",{value:"5",children:"5"}),(0,f.jsx)("option",{value:"10",children:"10"}),(0,f.jsx)("option",{value:"15",children:"15"}),(0,f.jsx)("option",{value:"20",children:"20"}),(0,f.jsx)("option",{value:"25",children:"25"}),(0,f.jsx)("option",{value:"30",children:"30"})]}),(0,f.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>{let e=Number(B)-Number(D);e>0?(_(e),console.log("Pagination to prev page "+B)):_(0)},className:"text-capitalize h-100 mx-2",disabled:Number(B)<Number(D),children:"prev"}),(0,f.jsx)(i.A,{children:B?B/D+1:1}),(0,f.jsx)(o.A,{size:"small",onClick:()=>{let e=Number(B)+Number(D);console.log("Clicked"),e<(null===c||void 0===c?void 0:c.count)&&(_(e),console.log("Pagination to next page "+B)),console.log(B)},variant:"outlined",className:"text-capitalize h-100 ms-2",disabled:Number(B)+Number(D)+1>c.count,children:"next"})]})]})})]})]})}}}]);
//# sourceMappingURL=4221.12a29b09.chunk.js.map