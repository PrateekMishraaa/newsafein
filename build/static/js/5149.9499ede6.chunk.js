"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[5149],{45149:(e,t,l)=>{l.r(t),l.d(t,{default:()=>u});var n=l(45543),s=l(79722),a=l(44304),i=l(65043),c=l(14282),o=l(38628),r=l(72557),d=l(73216),m=l(47503),h=l(70579);const u=()=>{(0,d.Zp)();const[e,t]=(0,i.useState)(!1),[l,u]=(0,i.useState)(""),[p,b]=(0,i.useState)(0),[j,x]=(0,i.useState)(""),[f,g]=(0,i.useState)(null),[v,y]=(0,i.useState)(""),A=()=>{t(!e),u(""),x(""),g({})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{className:"btn btn-sm btn-primary",onClick:A,children:"Add Compliance"}),(0,h.jsxs)(r.A,{show:e,onHide:A,children:[(0,h.jsx)(r.A.Header,{closeButton:!0,children:(0,h.jsx)(r.A.Title,{children:"Add Compliance"})}),(0,h.jsx)(r.A.Body,{children:(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!l||""===l.trim())return m.oR.dismiss(),void m.oR.error("Title cannot be blank");try{const e=await s.A.post("".concat("http://localhost:3100/","admin/compliance"),{title:l,description:j,thumbnail:v});console.log("Compliance created:",e.data.result),u(""),x(""),t(!1),b(p+1)}catch(n){console.error("Error creating compliance:",n)}},children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{htmlFor:"title",className:"form-label",children:"Title"}),(0,h.jsx)("input",{type:"text",className:"form-control",id:"title",value:l,onChange:e=>u(e.target.value)})]}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("button",{onClick:e=>{e.preventDefault(),document.getElementById("img").click()},className:"btn btn-success btn-sm",children:"Add Thumbnail"}),(0,h.jsx)("input",{type:"file",className:"form-control",id:"img",style:{display:"none"},onChange:e=>{const t=e.target.files[0];n.DX.post("/admin/temp",{img:e.target.files[0]}).then(e=>{var t,l;y(null===(t=e.data)||void 0===t||null===(l=t.file)||void 0===l?void 0:l.Location)}).catch(e=>console.log(e));let l={file:t,name:t.name,link:URL.createObjectURL(t)};g(l)}})]}),f&&f.name&&(0,h.jsx)(o.A,{children:(0,h.jsxs)(o.A.Body,{children:[(0,h.jsx)("div",{children:f.name}),(0,h.jsx)("div",{style:{height:"350px",overflow:"hidden",justifyContent:"center",alignItems:"center"},children:(0,h.jsx)("img",{style:{height:"100%",objectFit:"contain"},src:f.link,alt:"alt"})})]})}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),(0,h.jsx)("textarea",{className:"form-control",id:"description",value:j,onChange:e=>x(e.target.value)})]}),(0,h.jsx)(c.A,{variant:"primary",type:"submit",children:"Add"})]})})]}),(0,h.jsx)(a.ComplianceTable,{reload:p})]})}}}]);
//# sourceMappingURL=5149.9499ede6.chunk.js.map