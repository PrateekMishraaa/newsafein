"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[9037],{17171:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});var n,i=s(65043),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(){return a.default.createElement("svg",{width:"14",height:"11",viewBox:"0 0 14 11"},a.default.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}))}},22505:(e,t,s)=>{var n=s(24994);t.A=void 0;var i=n(s(40039)),a=s(70579);t.A=(0,i.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},46575:(e,t,s)=>{var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},i=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),a=s(65043),o=h(a),l=h(s(98139)),r=h(s(65173)),c=h(s(17171)),d=h(s(94019)),u=s(74671);function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleClick=s.handleClick.bind(s),s.handleTouchStart=s.handleTouchStart.bind(s),s.handleTouchMove=s.handleTouchMove.bind(s),s.handleTouchEnd=s.handleTouchEnd.bind(s),s.handleFocus=s.handleFocus.bind(s),s.handleBlur=s.handleBlur.bind(s),s.previouslyChecked=!(!e.checked&&!e.defaultChecked),s.state={checked:!(!e.checked&&!e.defaultChecked),hasFocus:!1},s}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){e.checked!==this.props.checked&&this.setState({checked:!!this.props.checked})}},{key:"handleClick",value:function(e){if(!this.props.disabled){var t=this.input;if(e.target!==t&&!this.moved)return this.previouslyChecked=t.checked,e.preventDefault(),t.focus(),void t.click();var s=this.props.hasOwnProperty("checked")?this.props.checked:t.checked;this.setState({checked:s})}}},{key:"handleTouchStart",value:function(e){this.props.disabled||(this.startX=(0,u.pointerCoord)(e).x,this.activated=!0)}},{key:"handleTouchMove",value:function(e){if(this.activated&&(this.moved=!0,this.startX)){var t=(0,u.pointerCoord)(e).x;this.state.checked&&t+15<this.startX?(this.setState({checked:!1}),this.startX=t,this.activated=!0):t-15>this.startX&&(this.setState({checked:!0}),this.startX=t,this.activated=t<this.startX+5)}}},{key:"handleTouchEnd",value:function(e){if(this.moved){var t=this.input;if(e.preventDefault(),this.startX){var s=(0,u.pointerCoord)(e).x;!0===this.previouslyChecked&&this.startX+4>s?this.previouslyChecked!==this.state.checked&&(this.setState({checked:!1}),this.previouslyChecked=this.state.checked,t.click()):this.startX-4<s&&this.previouslyChecked!==this.state.checked&&(this.setState({checked:!0}),this.previouslyChecked=this.state.checked,t.click()),this.activated=!1,this.startX=null,this.moved=!1}}}},{key:"handleFocus",value:function(e){var t=this.props.onFocus;t&&t(e),this.setState({hasFocus:!0})}},{key:"handleBlur",value:function(e){var t=this.props.onBlur;t&&t(e),this.setState({hasFocus:!1})}},{key:"getIcon",value:function(e){var s=this.props.icons;return s?void 0===s[e]?t.defaultProps.icons[e]:s[e]:null}},{key:"render",value:function(){var e=this,t=this.props,s=t.className,i=(t.icons,function(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}(t,["className","icons"])),a=(0,l.default)("react-toggle",{"react-toggle--checked":this.state.checked,"react-toggle--focus":this.state.hasFocus,"react-toggle--disabled":this.props.disabled},s);return o.default.createElement("div",{className:a,onClick:this.handleClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},o.default.createElement("div",{className:"react-toggle-track"},o.default.createElement("div",{className:"react-toggle-track-check"},this.getIcon("checked")),o.default.createElement("div",{className:"react-toggle-track-x"},this.getIcon("unchecked"))),o.default.createElement("div",{className:"react-toggle-thumb"}),o.default.createElement("input",n({},i,{ref:function(t){e.input=t},onFocus:this.handleFocus,onBlur:this.handleBlur,className:"react-toggle-screenreader-only",type:"checkbox"})))}}]),t}(a.PureComponent);t.A=m,m.displayName="Toggle",m.defaultProps={icons:{checked:o.default.createElement(c.default,null),unchecked:o.default.createElement(d.default,null)}},m.propTypes={checked:r.default.bool,disabled:r.default.bool,defaultChecked:r.default.bool,onChange:r.default.func,onFocus:r.default.func,onBlur:r.default.func,className:r.default.string,name:r.default.string,value:r.default.string,id:r.default.string,"aria-labelledby":r.default.string,"aria-label":r.default.string,icons:r.default.oneOfType([r.default.bool,r.default.shape({checked:r.default.node,unchecked:r.default.node})])}},51387:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(66734),i=s(70579);const a=(0,n.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},74671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pointerCoord=function(e){if(e){var t=e.changedTouches;if(t&&t.length>0){var s=t[0];return{x:s.clientX,y:s.clientY}}var n=e.pageX;if(void 0!==n)return{x:n,y:e.pageY}}return{x:0,y:0}}},94019:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});var n,i=s(65043),a=(n=i)&&n.__esModule?n:{default:n};t.default=function(){return a.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},a.default.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"}))}},96621:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);var n=s(77977),i=s(58345),a=s.n(i),o=s(70579);const l=e=>{let{content:t,setContent:s}=e;return(0,o.jsx)("div",{children:(0,o.jsx)(n.CKEditor,{editor:a(),data:t||"",onChange:(e,t)=>{const n=t.getData();s(n)}})})}},99037:(e,t,s)=>{s.r(t),s.d(t,{default:()=>le});var n=s(89379),i=s(79722),a=s(65043),o=s(38628),l=s(68862),r=s(75296),c=s(27417),d=s(73216),u=s(47503),h=s(80045),m=s(98139),x=s.n(m);const p="undefined"!==typeof s.g&&s.g.navigator&&"ReactNative"===s.g.navigator.product,g="undefined"!==typeof document||p?a.useLayoutEffect:a.useEffect,v=new WeakMap,j=(e,t)=>{if(!e||!t)return;const s=v.get(t)||new Map;v.set(t,s);let n=s.get(e);return n||(n=t.matchMedia(e),n.refCount=0,s.set(n.media,n)),n};function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const s=j(e,t),[n,i]=(0,a.useState)(()=>!!s&&s.matches);return g(()=>{let s=j(e,t);if(!s)return i(!1);let n=v.get(t);const a=()=>{i(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(null==n||n.delete(s.media)),s=void 0}},[e]),n}const y=function(e){const t=Object.keys(e);function s(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function n(s){const n=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(s);let i=e[n];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(t,i,o){let l;return"object"===typeof t?(l=t,o=i,i=!0):(i=i||!0,l={[t]:i}),f((0,a.useMemo)(()=>Object.entries(l).reduce((t,i)=>{let[a,o]=i;return"up"!==o&&!0!==o||(t=s(t,function(t){let s=e[t];return"number"===typeof s&&(s="".concat(s,"px")),"(min-width: ".concat(s,")")}(a))),"down"!==o&&!0!==o||(t=s(t,n(a))),t},""),[JSON.stringify(l)]),o)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});var b=s(71456),N=s(48380),k=s(18072),C=s(67852),A=s(70579);const w=["className","bsPrefix","as"],S=a.forwardRef((e,t)=>{let{className:s,bsPrefix:i,as:a="div"}=e,o=(0,h.A)(e,w);return i=(0,C.oU)(i,"offcanvas-body"),(0,A.jsx)(a,(0,n.A)({ref:t,className:x()(s,i)},o))});S.displayName="OffcanvasBody";const q=S;var _=s(9998),R=s(69791),E=s(33492),T=s(20865);const O=["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"],B={[_.ns]:"show",[_._K]:"show"},F=a.forwardRef((e,t)=>{let{bsPrefix:s,className:i,children:o,in:l=!1,mountOnEnter:r=!1,unmountOnExit:c=!1,appear:d=!1}=e,u=(0,h.A)(e,O);return s=(0,C.oU)(s,"offcanvas"),(0,A.jsx)(T.A,(0,n.A)((0,n.A)({ref:t,addEndListener:E.A,in:l,mountOnEnter:r,unmountOnExit:c,appear:d},u),{},{childRef:(0,R.am)(o),children:(e,t)=>a.cloneElement(o,(0,n.A)((0,n.A)({},t),{},{className:x()(i,o.props.className,(e===_.ns||e===_.ze)&&"".concat(s,"-toggling"),B[e])}))}))});F.displayName="OffcanvasToggling";const M=F;var D=s(31602),Y=s(42258);const I=["bsPrefix","className","closeLabel","closeButton"],L=a.forwardRef((e,t)=>{let{bsPrefix:s,className:i,closeLabel:a="Close",closeButton:o=!1}=e,l=(0,h.A)(e,I);return s=(0,C.oU)(s,"offcanvas-header"),(0,A.jsx)(Y.A,(0,n.A)((0,n.A)({ref:t},l),{},{className:x()(i,s),closeLabel:a,closeButton:o}))});L.displayName="OffcanvasHeader";const z=L;var Q=s(4488);const P=["className","bsPrefix","as"],H=(0,Q.A)("h5"),X=a.forwardRef((e,t)=>{let{className:s,bsPrefix:i,as:a=H}=e,o=(0,h.A)(e,P);return i=(0,C.oU)(i,"offcanvas-title"),(0,A.jsx)(a,(0,n.A)({ref:t,className:x()(s,i)},o))});X.displayName="OffcanvasTitle";const U=X;var W=s(95675);const K=["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"];function V(e){return(0,A.jsx)(M,(0,n.A)({},e))}function J(e){return(0,A.jsx)(k.A,(0,n.A)({},e))}const G=a.forwardRef((e,t)=>{let{bsPrefix:s,className:i,children:o,"aria-labelledby":l,placement:r="start",responsive:c,show:d=!1,backdrop:u=!0,keyboard:m=!0,scroll:p=!1,onEscapeKeyDown:g,onShow:v,onHide:j,container:f,autoFocus:k=!0,enforceFocus:w=!0,restoreFocus:S=!0,restoreFocusOptions:q,onEntered:_,onExit:R,onExiting:E,onEnter:T,onEntering:O,onExited:B,backdropClassName:F,manager:M,renderStaticNode:Y=!1}=e,I=(0,h.A)(e,K);const L=(0,a.useRef)();s=(0,C.oU)(s,"offcanvas");const[z,Q]=(0,a.useState)(!1),P=(0,b.A)(j),H=y(c||"xs","up");(0,a.useEffect)(()=>{Q(c?d&&!H:d)},[d,c,H]);const X=(0,a.useMemo)(()=>({onHide:P}),[P]);const U=(0,a.useCallback)(e=>(0,A.jsx)("div",(0,n.A)((0,n.A)({},e),{},{className:x()("".concat(s,"-backdrop"),F)})),[F,s]),G=e=>(0,A.jsx)("div",(0,n.A)((0,n.A)((0,n.A)({},e),I),{},{className:x()(i,c?"".concat(s,"-").concat(c):s,"".concat(s,"-").concat(r)),"aria-labelledby":l,children:o}));return(0,A.jsxs)(A.Fragment,{children:[!z&&(c||Y)&&G({}),(0,A.jsx)(D.A.Provider,{value:X,children:(0,A.jsx)(N.A,{show:z,ref:t,backdrop:u,container:f,keyboard:m,autoFocus:k,enforceFocus:w&&!p,restoreFocus:S,restoreFocusOptions:q,onEscapeKeyDown:g,onShow:v,onHide:P,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];null==T||T(e,...s)},onEntering:O,onEntered:_,onExit:R,onExiting:E,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];null==B||B(...s)},manager:M||(p?(L.current||(L.current=new W.A({handleContainerOverflow:!1})),L.current):(0,W.R)()),transition:V,backdropTransition:J,renderBackdrop:U,renderDialog:G})})]})});G.displayName="Offcanvas";const Z=Object.assign(G,{Body:q,Header:z,Title:U});var $=s(46575),ee=s(83560),te=s(51387),se=s(22505),ne=s(45715),ie=s(45543),ae=s(96621);const oe=e=>{var t;let{i:s,id:c,questionArray:d,getAllQuestionByCompliance:h}=e;const[m,x]=(0,a.useState)([""]),[p,g]=(0,a.useState)([]),[v,j]=(0,a.useState)(null),[f,y]=(0,a.useState)(""),[b,N]=(0,a.useState)(""),[k,C]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[q,_]=(0,a.useState)(""),[R,E]=(0,a.useState)(""),[T,O]=(0,a.useState)(null),[B,F]=(0,a.useState)(!1),[M,D]=(0,a.useState)(0),[Y,I]=(0,a.useState)(!1),[L,z]=(0,a.useState)(!1),[Q,P]=(0,a.useState)(!1),[H,X]=(0,a.useState)(!1),[U,W]=(0,a.useState)(null),[K,V]=(0,a.useState)(null),[J,G]=(0,a.useState)(!1),[oe,le]=(0,a.useState)(0),[re,ce]=(0,a.useState)(null),[de,ue]=(0,a.useState)(!1),[he,me]=(0,a.useState)(!1),[xe,pe]=(0,a.useState)([]),[ge,ve]=(0,a.useState)(null),[je,fe]=(0,a.useState)(null),[ye,be]=(0,a.useState)([{img:"",description:""}]),Ne=e=>{j(e)},ke=()=>{le(oe+1)},Ce=()=>{le(oe-1)},Ae=()=>{F(!1),Oe()},we=()=>F(!0),Se=(e,t)=>{x(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{text:t,risk:!1,riskText:"",score:0}),i})},qe=(e,t)=>{x(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{score:t}),console.log("updated option",i,t),i})},_e=(e,t)=>{x(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{riskText:t,risk:!0}),i})},Re=(e,t)=>{x(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{value:t}),i})},Ee=(e,t)=>{x(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{correct:t}),i})},Te=e=>{console.log("inside the subquestion"),O(e.categoryId),D(e.id)},Oe=()=>{y(""),_(""),N(""),C(""),D(null),S(""),O(null),z(!1),P(!1),I(!1),E(""),x([]),W(null),V(null),le(0),X(!1),ue(!1),G(!1),me(!1),ce(null)};return(0,a.useEffect)(()=>{i.A.get("http://localhost:3100/admin/compliance_category/compliance/"+c).then(e=>{g(e.data.result)})},[]),(0,A.jsxs)("div",{children:[d.length>0?d.filter(e=>e.categoryId===s.id).map((e,t)=>{var s,n;let a=0;return(0,A.jsxs)("div",{className:"mt-4",children:[(0,A.jsx)(o.A,{style:{minHeight:"100px",background:"#e8edf8",boxShadow:" rgba(0, 0, 0, 0.3) 0px 0px 25px -5px"},className:"question-card",children:(0,A.jsxs)(o.A.Body,{children:[(0,A.jsxs)("div",{className:"d-flex",children:[(0,A.jsxs)("span",{children:[" Q",t+1,"."]}),(0,A.jsx)("div",{dangerouslySetInnerHTML:{__html:e.text}})]}),(0,A.jsxs)("div",{className:"text-capitalize ",style:{marginTop:"18px",marginBottom:"12px"},children:["YesNo"===e.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{className:"mr-4",type:"radio",name:e.id}),(0,A.jsxs)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:["Yes",(0,A.jsx)(se.A,{onClick:()=>{we(),ve(0),me(!0),D(e.id),Te(e)}})]}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:e.id}),(0,A.jsxs)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:["No",(0,A.jsx)(se.A,{onClick:()=>{we(),ve(1),me(!0),D(e.id),Te(e)}})]})]}):"YesNONa"===e.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{className:"mr-4",type:"radio",name:e.id}),(0,A.jsxs)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:["Yes",(0,A.jsx)(se.A,{onClick:()=>{we(),ve(0),me(!0),D(e.id),Te(e)}})]}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:e.id}),(0,A.jsxs)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:["No",(0,A.jsx)(se.A,{onClick:()=>{we(),ve(1),me(!0),D(e.id),Te(e)}})]}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:e.id}),(0,A.jsxs)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:["NA",(0,A.jsx)(se.A,{onClick:()=>{we(),ve(2),me(!0),D(e.id),Te(e)}})]})]}):"Long"===e.question_type||"Short"===e.question_type?(0,A.jsx)("div",{children:(0,A.jsx)("textarea",{className:"form-control",style:{height:"70px"},id:"description",rows:"3",placeholder:"Enter Answer",onChange:""})}):"Number"===e.question_type?(0,A.jsxs)("div",{className:"d-flex ",children:[(0,A.jsx)("button",{style:{marginRight:"12px"},className:"btn btn-sm btn-success mr-4",onClick:Ce,children:"-"}),(0,A.jsx)("input",{className:"text-align-center",style:{textAlign:"center",width:"67px"},type:"number",value:oe,onChange:e=>le(parseInt(e.target.value))}),(0,A.jsx)("button",{style:{marginLeft:"12px"},className:"btn btn-sm btn-success ml-4",onClick:ke,children:"+"})]}):"Signature"===e.question_type?(0,A.jsx)("div",{children:(0,A.jsx)(ne.A,{})}):null,e.options.length>0?e.options.map((t,s)=>(0,A.jsx)("div",{className:"d-inline mr-3",style:{marginRight:"12px"},children:"CheckBox"===e.question_type||"mcq"===e.question_type?(0,A.jsxs)("div",{className:"d-inline",children:[(0,A.jsx)("input",{type:"radio",name:e.id}),(0,A.jsxs)("span",{className:"text-capitalize ",children:[t.text,(0,A.jsx)(se.A,{onClick:()=>{we(),ve(s),me(!0),D(e.id),Te(e)}})]},s)]}):null})):"no answer"]}),(0,A.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,A.jsxs)("span",{onClick:()=>{var t;we(),D(e.id),G(!0),ue(!1),y((t=e).description),_(t.text),N(t.question_type),C(t.media_type),O(t.categoryId),D(t.id),S(t.hint),z(t.images_required),P(t.comment_required),I(t.comment_required),E(t.category),x(t.options),W(t.file_max),V(t.image_max),X(t.files_required),pe(e.sub_question)},style:{marginRight:"12px"},children:[(0,A.jsx)(ee.A,{})," "]}),(0,A.jsxs)("span",{onClick:t=>(async(e,t)=>{e.preventDefault();try{const e=await i.A.delete("".concat("http://localhost:3100/","admin/compliance_question/").concat(t));console.log("quesiont created:",e.data.result),u.oR.dismiss(),u.oR.success("Question Delete successfully"),h()}catch(s){console.error("Error creating compliance:",s)}})(t,e.id),children:[(0,A.jsx)(te.A,{})," "]})]}),(null===e||void 0===e?void 0:e.images)&&(0,A.jsx)(o.A,{onClick:()=>window.location.href=e.images,style:{width:"500px",height:"200px",cursor:"pointer"},children:(0,A.jsx)(o.A.Body,{style:{height:"100%"},children:(0,A.jsx)("img",{style:{height:"100%",width:"100%",objectFit:"cover"},src:e.images,alt:"file"})})})]})}),null!==(s=e.sub_question)&&void 0!==s&&s.length?(0,A.jsx)("h4",{children:"SubQuestion"}):null,null===(n=e.sub_question)||void 0===n?void 0:n.map((s,n)=>{var a;return(0,A.jsx)("div",{children:(0,A.jsx)(o.A,{style:{minHeight:"100px",background:"#e8edf8",boxShadow:" rgba(0, 0, 0, 0.3) 0px 0px 25px -5px"},className:"question-card",children:(0,A.jsxs)(o.A.Body,{children:[(0,A.jsx)("div",{style:{fontSize:"19px"},className:"text-capitalize",children:s.text}),(0,A.jsxs)("div",{className:"text-capitalize ",style:{marginTop:"18px"},children:["YesNo"===s.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"Yes"}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"No"})]}):"YesNONa"===s.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"Yes"}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"No"}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"NA"})]}):"Long"===s.question_type||"Short"===s.question_type?(0,A.jsx)("div",{children:(0,A.jsx)("textarea",{className:"form-control",style:{height:"70px"},id:"description",rows:"3",placeholder:"Enter Answer",value:"",onChange:""})}):"Number"===s.question_type?(0,A.jsxs)("div",{className:"d-flex ",children:[(0,A.jsx)("button",{style:{marginRight:"12px"},className:"btn btn-sm btn-success mr-4",onClick:Ce,children:"-"}),(0,A.jsx)("input",{className:"text-align-center",style:{textAlign:"center",width:"67px"},type:"number",value:oe,onChange:e=>le(parseInt(e.target.value))}),(0,A.jsx)("button",{style:{marginLeft:"12px"},className:"btn btn-sm btn-success ml-4",onClick:ke,children:"+"})]}):"Signature"===s.question_type?(0,A.jsx)("div",{children:"signature"}):null,s.options.length>0?s.options.map((e,n)=>(0,A.jsx)("div",{className:"d-inline mr-3",style:{marginRight:"12px"},children:"CheckBox"===s.question_type||"mcq"===s.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",children:e.text},n)]}):null})):"no options"]}),(0,A.jsx)("div",{className:"row mb-4",children:null===(a=e.images)||void 0===a?void 0:a.map((e,t)=>(0,A.jsx)("div",{className:"col-4 mb-3",children:(0,A.jsx)(o.A,{children:(0,A.jsx)(o.A.Body,{children:(0,A.jsx)("div",{className:"d-flex justify-content-between",children:(0,A.jsx)("div",{style:{overflow:"hidden",height:"240px"},className:"d-flex justify-content-around",children:(0,A.jsx)("img",{src:e.link,alt:e.name})})},t)})})}))}),(0,A.jsx)("div",{className:"d-flex justify-content-end",children:(0,A.jsxs)("span",{onClick:s=>(async(e,t,s)=>{e.preventDefault();let n=[...xe];n.splice(s,1),pe(n);try{const e=await i.A.put("".concat("http://localhost:3100/","admin/compliance_question/").concat(t),{sub_question:n});console.log("quesiont created:",e.data.result),u.oR.dismiss(),u.oR.success("Question Delete successfully"),h()}catch(a){console.error("Error creating compliance:",a)}})(s,e.id,t),children:[(0,A.jsx)(te.A,{})," "]})})]})})},n)}),e.options.map((s,n)=>{var l;return(0,A.jsx)(A.Fragment,{children:s.sub_question&&(0,A.jsx)("div",{className:"mt-3",style:{transform:"scale(.9)"},children:(0,A.jsx)(o.A,{style:{minHeight:"70px",background:"#ffdada",boxShadow:" rgba(0, 0, 0, 0.3) 0px 0px 25px -5px"},className:"question-card",children:(0,A.jsxs)(o.A.Body,{children:[(0,A.jsxs)("div",{style:{fontSize:"19px"},className:"text-capitalize",children:["Q",t+1,String.fromCharCode(97+a++),". ",s.sub_question.text]}),(0,A.jsxs)("div",{className:"text-capitalize ",style:{marginTop:"18px"},children:["YesNo"===s.sub_question.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"Yes"}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"No"})]}):"YesNONa"===s.sub_question.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"Yes"}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"No"}),(0,A.jsx)("input",{className:"mr-4",type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",style:{marginRight:"12px"},children:"NA"})]}):"Long"===s.sub_question.question_type||"Short"===s.sub_question.question_type?(0,A.jsx)("div",{children:(0,A.jsx)("textarea",{className:"form-control",style:{height:"70px"},id:"description",rows:"3",placeholder:"Enter Answer",value:""})}):"Number"===s.sub_question.question_type?(0,A.jsxs)("div",{className:"d-flex ",children:[(0,A.jsx)("button",{style:{marginRight:"12px"},className:"btn btn-sm btn-success mr-4",onClick:Ce,children:"-"}),(0,A.jsx)("input",{className:"text-align-center",style:{textAlign:"center",width:"67px"},type:"number",value:oe,onChange:e=>le(parseInt(e.target.value))}),(0,A.jsx)("button",{style:{marginLeft:"12px"},className:"btn btn-sm btn-success ml-4",onClick:ke,children:"+"})]}):"Date"===s.sub_question.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"dateInput",children:"Select a date:"}),(0,A.jsx)("input",{type:"date",id:"dateInput",value:v,onChange:Ne})]}):null,s.sub_question.options.length>0?s.sub_question.options.map((e,n)=>(0,A.jsx)("div",{className:"d-inline mr-3",style:{marginRight:"12px"},children:"CheckBox"===s.sub_question.question_type||"mcq"===s.sub_question.question_type?(0,A.jsxs)("div",{children:[(0,A.jsx)("input",{type:"radio",name:t}),(0,A.jsx)("span",{className:"text-capitalize ",children:e.text},n)]}):null})):"no answer"]}),(null===s||void 0===s||null===(l=s.sub_question)||void 0===l?void 0:l.images)&&(0,A.jsx)(o.A,{onClick:()=>window.location.href=null===s||void 0===s?void 0:s.sub_question.images,style:{width:"500px",height:"200px",cursor:"pointer"},children:(0,A.jsx)(o.A.Body,{style:{height:"100%"},children:(0,A.jsx)("img",{style:{height:"100%",width:"100%",objectFit:"cover"},src:null===s||void 0===s?void 0:s.sub_question.images,alt:"files"})})}),(0,A.jsx)("div",{className:"d-flex justify-content-end",children:(0,A.jsxs)("span",{onClick:t=>(async(e,t,s)=>{e.preventDefault();const n=d.find(e=>e.id===t);console.log(n);let a=n.options;console.log(a,"thi si option"),a[s].sub_question=null,console.log(s,"this is index");try{const e=await i.A.put("".concat("http://localhost:3100/","admin/compliance_question/").concat(t),{options:a});console.log("quesiont created:",e.data.result),u.oR.dismiss(),u.oR.success("Question Delete successfully"),h()}catch(o){console.error("Error creating compliance:",o)}})(t,e.id,n),children:[(0,A.jsx)(te.A,{})," "]})})]})})},n)})})]},t)}):(0,A.jsx)("div",{children:"No questions"}),(0,A.jsxs)(Z,{style:{width:"825px"},show:B,onHide:Ae,placement:"end",children:[(0,A.jsx)(Z.Header,{closeButton:!0,children:(0,A.jsx)(Z.Title,{children:(0,A.jsx)("h4",{children:J?"Edit Question":de?"Add Sub-Question":he?"Add Sub-Question for Option":"Add Question"})})}),(0,A.jsx)(Z.Body,{style:{width:"100%"},children:(0,A.jsx)("div",{className:"container",children:(0,A.jsx)("form",{onSubmit:e=>{J?(async(e,t,s)=>{if(e.preventDefault(),!q)return u.oR.dismiss(),void u.oR.error("You have to Write Question");const n=m.find(e=>!0===e.correct);if(!n&&("CheckBox"===s||"mcq"===s))return u.oR.dismiss(),void u.oR.error("At least Choose 1 Correct Answer");if("CheckBox"===s||"mcq"===s){const e=m.find(e=>""===e.text);if(e)return u.oR.dismiss(),void u.oR.error("Can't send Blank Option");if(m.length<2)return u.oR.dismiss(),void u.oR.error("Add atleast 2 options")}try{const e=await i.A.put("".concat("http://localhost:3100/","admin/compliance_question/").concat(t),{complianceId:c,text:q,description:f,question_type:b,media_type:k,options:m,category:R,categoryId:T,hint:w,images_required:L,comment_required:Q,required:Y,image_max:K,files_required:!1,file_max:U,images:je,desc_modal:ye});console.log("quesiont created:",e.data.result),_(""),u.oR.dismiss(),N(""),u.oR.success("edit success"),C(""),S(""),z(!1),P(!1),I(!1),h(),Ae(),x([])}catch(a){console.error("Error creating compliance:",a)}})(e,M,b):de?((e,t,s)=>{if(e.preventDefault(),!q)return u.oR.dismiss(),void u.oR.error("You have to Write Question");const n=m.find(e=>!0===e.correct);if(!n)return u.oR.dismiss(),void u.oR.error("Atleast Choose 1 Correct Answer");if("CheckBox"===s||"mcq"===s){const e=m.find(e=>""===e.text);if(e)return u.oR.dismiss(),void u.oR.error("Can't send Blank Option");if(m.length<2)return u.oR.dismiss(),void u.oR.error("Add atleast 2 options")}let a=[...xe],o={text:q,description:f,question_type:b,media_type:k,options:m,subQuestionId:Date.now().toString(36)+Math.random().toString(36).substr(2),hint:w,images_required:L,comment_required:Q,required:Y,image_max:K,files_required:!1,file_max:U,images:re};a.push(o),pe(a),i.A.put("".concat("http://localhost:3100/","admin/compliance_question/").concat(t),{sub_question:a}).then(e=>{console.log("quesiont created:",e.data.result),_(""),N(""),u.oR.success("created successfully"),C(""),S(""),z(!1),P(!1),I(!1),h(),Ae(),x([])})})(e,M,b):he?((e,t,s,n)=>{e.preventDefault();const a=d.find(e=>e.id===t);if(!q)return u.oR.dismiss(),void u.oR.error("You have to Write Question");const o=m.find(e=>!0===e.correct);if(!o&&("CheckBox"===s||"mcq"===s))return u.oR.dismiss(),void u.oR.error("At least Choose 1 Correct Answer");if("CheckBox"===s||"mcq"===s){const e=m.find(e=>""===e.text);if(e)return u.oR.dismiss(),void u.oR.error("Can't send Blank Option");if(m.length<2)return u.oR.dismiss(),void u.oR.error("Add atleast 2 options")}let l=a.options,r={subQuestion4optionId:Date.now().toString(36)+Math.random().toString(36).substr(2),text:q,questionId:t,complianceId:c,description:f,question_type:b,media_type:k,options:m,hint:w,images_required:L,comment_required:Q,required:Y,image_max:K,files_required:!1,file_max:U,images:je};l[n].sub_question=r,i.A.put("".concat("http://localhost:3100/","admin/compliance_question/").concat(t),{options:l}).then(e=>{console.log("quesiont created:",e.data.result),_(""),N(""),u.oR.success("created successfully"),C(""),S(""),z(!1),P(!1),I(!1),h(),Ae(),x([])})})(e,M,b,ge):(async(e,t)=>{if(e.preventDefault(),!R||!T)return u.oR.dismiss(),void u.oR.error("You have to Select Category");if(!q)return u.oR.dismiss(),void u.oR.error("You have to Write Question");const s=m.find(e=>!0===e.correct);if(!s)return u.oR.dismiss(),void u.oR.error("Atleast Choose 1 Correct Answer");if("CheckBox"===t||"mcq"===t){const e=m.find(e=>""===e.text);if(e)return u.oR.dismiss(),void u.oR.error("Can't send Blank Option");if(m.length<2)return u.oR.dismiss(),void u.oR.error("Add atleast 2 options")}try{const e=await i.A.post("".concat("http://localhost:3100/","admin/compliance_question"),{complianceId:c,text:q,description:f,question_type:b,media_type:k,options:m,category:R,categoryId:T,hint:w,images_required:L,comment_required:Q,required:Y,image_max:K,files_required:!1,file_max:U,images:re,desc_modal:ye});console.log("quesiont created:",e.data.result),_(""),N(""),u.oR.success("created successfully"),C(""),S(""),z(!1),P(!1),I(!1),h(),Ae(),x([])}catch(n){console.error("Error creating compliance:",n)}})(e,b)},children:(0,A.jsxs)("div",{className:"row",children:[(0,A.jsxs)("div",{className:" row rounded-3 p-2 mb-3",style:{background:"#ffd3b624"},children:[de?null:(0,A.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,A.jsx)("h6",{htmlFor:"category",children:"Category * :"}),(0,A.jsxs)("select",{className:"form-control",id:"category",value:T||"",onChange:e=>{const t=e.target.value;O(t);const s=p.find(e=>e.id===parseInt(t));E(s?s.title:"")},children:[(0,A.jsx)("option",{value:"",children:"Select Category"}),p.map(e=>(0,A.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,A.jsxs)("div",{className:"form-group col-6",children:[(0,A.jsx)("h6",{htmlFor:"questionType",children:"Question Type *:"}),(0,A.jsxs)("select",{className:"form-control",id:"questionType",value:b,onChange:e=>{N(e.target.value),(e=>{"YesNo"===e.target.value?x([{text:"Yes",correct:!1,risk:!1,riskText:"",score:0},{text:"No",correct:!1,risk:!1,riskText:"",score:0}]):"YesNONa"===e.target.value?x([{text:"Yes",correct:!1,risk:!1,riskText:"",score:0},{text:"No",correct:!1,risk:!1,riskText:"",score:0},{text:"NA",correct:!1,risk:!1,riskText:"",score:0}]):"mcq"===e.target.value||"CheckBox"===e.target.value?x([{text:"",correct:!1,risk:!1,riskText:""}]):"Number"===e.target.value?x([{text:"Minimum",value:0,risk:!1,riskText:"",score:0},{text:"Maximum",value:0,risk:!1,riskText:"",score:0}]):x([{text:"",correct:!1,risk:!1,riskText:""}])})(e)},children:[(0,A.jsx)("option",{value:"",children:"Select Question Type *"}),(0,A.jsx)("option",{value:"YesNONa",children:"Yes No Na"}),(0,A.jsx)("option",{value:"YesNo",children:"Yes No"}),(0,A.jsx)("option",{value:"mcq",children:"Multiple Choice"}),(0,A.jsx)("option",{value:"CheckBox",children:"Check Box"}),(0,A.jsx)("option",{value:"Number",children:"Number"}),(0,A.jsx)("option",{value:"Long",children:"Long Text"}),(0,A.jsx)("option",{value:"Short",children:"Short Text"}),(0,A.jsx)("option",{value:"Date",children:"Date"}),(0,A.jsx)("option",{value:"Time",children:"Time"}),(0,A.jsx)("option",{value:"Upload",children:"Upload"}),(0,A.jsx)("option",{value:"Signature",children:"Signature"})]})]}),(0,A.jsxs)("div",{className:"form-group col-12 mb-3",children:[(0,A.jsx)("h6",{htmlFor:"text",children:"Question * :"}),(0,A.jsx)(ae.A,{content:q,setContent:_,placeholder:"Content goes here..."})]}),(0,A.jsxs)("div",{className:"form-group col-12 mb-4",children:[(0,A.jsx)("h6",{htmlFor:"description",children:"Description:"}),(0,A.jsx)(ae.A,{content:f,setContent:y,placeholder:"Content goes here..."})]}),(0,A.jsxs)("div",{className:"col-7 mt-3 mb-3",children:[(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-primary btn-sm mb-3",onClick:e=>{e.preventDefault(),document.getElementById("img").click()},children:"Upload Image"}),(0,A.jsx)("input",{type:"file",id:"img",name:"files[]",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:e=>{ie.DX.post("/admin/temp",{img:e.target.files[0]}).then(e=>{var t,s;fe(null===(t=e.data)||void 0===t||null===(s=t.file)||void 0===s?void 0:s.Location)}).catch(e=>console.log(e));const t=e.target.files[0],s=URL.createObjectURL(t);ce((0,n.A)((0,n.A)({},re),{},{file:t,name:t.name,link:s}))}}),je&&(0,A.jsx)(o.A,{children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,A.jsxs)("div",{style:{overflow:"hidden",height:"53px"},className:"d-flex justify-content-around",children:[(0,A.jsx)("img",{src:je,alt:re.name,style:{height:"50px"}}),(0,A.jsx)("p",{style:{margin:"0 0 0 12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"350px"},children:(null===re||void 0===re||null===(t=re.name)||void 0===t?void 0:t.length)>28?"".concat(re.name.substring(0,28),"..."):re.name})]}),(0,A.jsx)("div",{children:(0,A.jsx)("button",{style:{},className:"ml-3 px-2 py-1  btn btn-outline-danger btn-sm",onClick:e=>{e.preventDefault(),fe("")},children:"Delete"})})]})})})]})]}),(0,A.jsxs)("div",{className:"card mb-4 border-0 rounded-3",style:{background:"#0003ff14"},children:[(0,A.jsx)("h6",{className:"mb-2 mt-3",children:"Add Canvas Modal :"}),(0,A.jsx)("div",{className:"form-group card-body ",children:(0,A.jsxs)("div",{children:[ye.map((e,t)=>(0,A.jsx)(o.A,{className:"mb-4",children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"row",children:[(0,A.jsxs)("div",{className:"col-6 mb-4",children:[(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-primary btn-sm",onClick:e=>((e,t)=>{t.preventDefault(),document.getElementById("img".concat(e,"jod")).click()})(t,e),children:"upload image"}),(0,A.jsx)("input",{type:"file",id:"img".concat(t,"jod"),name:"files[]",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:e=>{(async(e,t)=>{const s=t.target.files[0];try{var i,a;const t=await ie.DX.post("/admin/temp",{img:s}),o=[...ye];o[e]=(0,n.A)((0,n.A)({},o[e]),{},{img:null===(i=t.data)||void 0===i||null===(a=i.file)||void 0===a?void 0:a.Location}),be(o)}catch(o){console.log(o)}})(t,e)}})]}),ye[t].img&&(0,A.jsx)("div",{className:"col-6",children:(0,A.jsx)("img",{src:ye[t].img,alt:"img"})}),(0,A.jsx)("div",{className:"col-12 mb-4",children:(0,A.jsx)("textarea",{className:"form-control",name:"description",value:e.description,onChange:e=>((e,t)=>{const{name:s,value:i}=t.target,a=[...ye];a[e]=(0,n.A)((0,n.A)({},a[e]),{},{[s]:i}),be(a)})(t,e),style:{resize:"none"}})}),(0,A.jsx)("div",{className:"col-5",children:ye.length>1&&(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-danger btn-sm",variant:"danger",onClick:e=>{e.preventDefault(),(e=>{const t=[...ye];t.splice(e,1),be(t)})(t)},children:"Remove"})})]},t)})})),(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-success btn-sm",onClick:e=>{e.preventDefault(),be([...ye,{img:"",description:""}])},children:"Add More"})]})})]}),(0,A.jsx)("div",{className:"card border-0 rounded-3 mb-3",style:{background:"#ff8a8a33"},children:(0,A.jsx)("div",{className:"card-body",children:(0,A.jsxs)("div",{className:" mt-4 d-flex justify-content-around align-item-center form-group col-12 ",children:[(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{style:{transform:"scale(0.8)"},id:"toggleSwitch",checked:Y,onChange:()=>I(!Y)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Mandatory Question"})]}),(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{id:"toggleSwitch",checked:Q,onChange:()=>P(!Q)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Comment Required"})]}),(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{id:"toggleSwitch",checked:L,onChange:()=>z(!L)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Image Required"})]}),(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{id:"toggleSwitch",checked:H,onChange:()=>X(!H)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Files Required"})]}),(0,A.jsxs)("div",{className:"col-6 d-flex",children:[L?(0,A.jsx)("input",{type:"Number",className:"form-control",id:"maxFile",placeholder:"Max Image",value:U,onChange:e=>W(e.target.value)}):null,H?(0,A.jsx)("input",{type:"Number",className:"form-control",id:"maxFile",placeholder:"Max File",value:K,onChange:e=>V(e.target.value)}):null]})]})})}),b&&"mcq"===b||b&&"CheckBox"===b?(0,A.jsxs)("div",{className:"form-group col-12",children:[(0,A.jsx)("h6",{children:"Options:"}),m.map((e,t)=>(0,A.jsx)(o.A,{className:"mb-3",style:{background:"#f1f1ff"},children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"row align-items-center",children:[(0,A.jsx)("div",{className:"col-8",children:(0,A.jsx)("input",{placeholder:"Enter Options",className:"form-control mb-3",type:"text",value:e.text,onChange:e=>Se(t,e.target.value)})}),(0,A.jsx)("div",{className:"col-1 ",children:(0,A.jsxs)("label",{children:[(0,A.jsx)(l.A.Check,{type:"checkbox",checked:e.correct,onChange:e=>Ee(t,e.target.checked)}),"Correct"]})}),(0,A.jsx)("div",{className:"col-3",children:(0,A.jsx)("input",{className:"form-control mb-3",placeholder:"Enter Score",type:"number",value:e.score,onChange:e=>qe(t,e.target.value)})}),(0,A.jsx)("div",{className:"col-8",children:(0,A.jsx)("textarea",{style:{height:"45px"},className:"form-control mb-3",id:"description",rows:"5",placeholder:"Enter Risk",value:e.riskText,onChange:e=>_e(t,e.target.value)})}),t>0?(0,A.jsx)("div",{className:"col-1",children:(0,A.jsx)("button",{className:"btn btn-sm btn-primary",type:"button",onClick:()=>(e=>{const t=[...m];t.splice(e,1),x(t)})(t),children:"Remove"})}):null]},t)})})),(0,A.jsx)("button",{className:"btn btn-sm btn-primary mt-2 mb-3",type:"button",onClick:()=>{m.length>0&&""===m[m.length-1].text||x([...m,{text:"",correct:!1}])},children:"Add Option"})]}):b&&"YesNo"===b||b&&"YesNONa"===b?(0,A.jsxs)("div",{className:"col-12",children:[(0,A.jsx)("h6",{children:"Options:"}),m.length>0?m.map((e,t)=>(0,A.jsx)(o.A,{className:"mb-3",style:{background:"#f1f1ff"},children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"row",children:[(0,A.jsx)("div",{className:"col-8",children:(0,A.jsx)("input",{className:"form-control",readOnly:!0,type:"text",value:e.text,onChange:e=>Se(t,e.target.value)})}),(0,A.jsx)("div",{className:"col-1 ",children:(0,A.jsxs)("label",{children:[(0,A.jsx)(l.A.Check,{type:"checkbox",checked:e.correct,onChange:e=>Ee(t,e.target.checked)}),"Correct"]})}),(0,A.jsx)("div",{className:"col-3 mb-3",children:(0,A.jsx)("input",{className:"form-control",type:"number",placeholder:"Enter Score",value:e.score,onChange:e=>{qe(t,e.target.value)}})}),(0,A.jsx)("div",{className:"col-12 ",children:(0,A.jsx)("textarea",{style:{height:"45px"},className:"form-control",id:"description",rows:"3",placeholder:"Enter Risk",value:e.riskText,onChange:e=>_e(t,e.target.value)})})]})})})):null]}):b&&"Number"===b?(0,A.jsx)("div",{className:"col-12",children:(0,A.jsx)(o.A,{children:(0,A.jsxs)(o.A.Body,{children:[(0,A.jsx)("div",{children:(0,A.jsx)("h5",{children:"Data Validation"})}),(0,A.jsxs)("div",{className:"row justify-content-between",children:[(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Minimum Number",className:"mb-3",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Minimum Number",onChange:e=>{Re(0,e.target.value)}})})}),(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Maximum Number",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Maximum Number",onChange:e=>Re(1,e.target.value)})})}),(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Score",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Score",onChange:e=>{qe(0,e.target.value),qe(1,e.target.value)}})})})]})]})})}):b&&"Long"===b||b&&"Short"===b||b&&"Signature"===b?(0,A.jsx)("div",{className:"row mb-3",children:(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Score",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Score",onChange:e=>{qe(0,e.target.value)}})})})}):null,(0,A.jsxs)("div",{className:"form p-2 group col-12 rounded-3 border-0 ",style:{background:"#d3d3d34a"},children:[(0,A.jsx)("h6",{htmlFor:"hint",children:"Hint:"}),(0,A.jsx)(ae.A,{content:w,setContent:S,placeholder:"Content goes here..."})]}),(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),(0,A.jsx)("div",{className:"col-9"}),(0,A.jsx)("button",{type:"submit ",className:"btn btn-sm btn-success mt-4 col-3",children:"Submit"})]})})})})]})]})},le=()=>{var e;let{id:t}=(0,d.g)();const[s,h]=(0,a.useState)([""]),[m,x]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[v,j]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[b,N]=(0,a.useState)(""),[k,C]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[q,_]=(0,a.useState)(null),[R,E]=(0,a.useState)(!1),[T,O]=(0,a.useState)(!1),[B,F]=(0,a.useState)(!1),[M,D]=(0,a.useState)(!1),[Y,I]=(0,a.useState)(!1),[L,z]=(0,a.useState)(null),[Q,P]=(0,a.useState)(null),[H,X]=(0,a.useState)([]),[U,W]=(0,a.useState)(null),[K,V]=(0,a.useState)(!1),[J,G]=(0,a.useState)(!1),[ee,te]=(0,a.useState)([{img:"",description:""}]),se=()=>{E(!1),he()},ne=(e,t)=>{h(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{text:t,risk:!1,riskText:"",score:0}),i})},le=(e,t)=>{h(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{score:t}),i})},re=(e,t)=>{h(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{value:t}),i})},ce=(e,t)=>{h(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{riskText:t,risk:!0}),i})},de=(e,t)=>{h(s=>{const i=[...s];return i[e]=(0,n.A)((0,n.A)({},i[e]),{},{correct:t}),i})},ue=()=>{i.A.get("http://localhost:3100/admin/compliance_question/compliance/"+t).then(e=>{x(e.data.result)}).catch(()=>{u.oR.dismiss(),u.oR.error("something went wrong")})},he=()=>{j(""),C(""),y(""),N(""),_(null),F(!1),D(!1),O(!1),S(""),h([]),z(null),P(null),I(!1),V(!1),X(null)};return(0,a.useEffect)(()=>{ue(),i.A.get("http://localhost:3100/admin/compliance_category/compliance/"+t).then(e=>{g(e.data.result)})},[]),(0,A.jsxs)("div",{style:{margin:"34px"},children:[(0,A.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>{E(!0),V(!1)},children:"Add Question"}),(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),(0,A.jsx)("div",{children:null===p||void 0===p?void 0:p.map(e=>(0,A.jsxs)("div",{children:[(0,A.jsx)("h4",{children:e.title}),(0,A.jsx)("hr",{}),(0,A.jsx)("div",{children:(0,A.jsx)(oe,{i:e,questionArray:m,getAllQuestionByCompliance:ue,id:t})}),(0,A.jsx)("hr",{})]}))}),(0,A.jsxs)(Z,{style:{width:"825px"},show:R,onHide:se,placement:"end",children:[(0,A.jsx)(Z.Header,{closeButton:!0,children:(0,A.jsx)(Z.Title,{children:(0,A.jsx)("h4",{children:"Add Question"})})}),(0,A.jsxs)(Z.Body,{style:{width:"100%"},children:[(0,A.jsx)("div",{className:"container",children:(0,A.jsx)("form",{onSubmit:e=>{(async(e,n)=>{if(e.preventDefault(),!w||!q)return u.oR.dismiss(),void u.oR.error("You have to Select Category");if(!k)return u.oR.dismiss(),void u.oR.error("You have to Write Question");if(!s.find(e=>!0===e.correct)&&("CheckBox"===n||"mcq"===n))return u.oR.dismiss(),void u.oR.error("At least Choose 1 Correct Answer");if("CheckBox"===n||"mcq"===n){if(s.find(e=>""===e.text))return u.oR.dismiss(),void u.oR.error("Can't send Blank Option");if(s.length<2)return u.oR.dismiss(),void u.oR.error("Add at least 2 options")}const i={complianceId:t,text:k,description:v,question_type:f,options:s,category:w,categoryId:q,hint:b,images_required:B,comment_required:M,required:T,image_max:Q,files_required:!1,file_max:L,images:U,desc_modal:ee};G(!0);try{await ie.TR.post("admin/compliance_question",i),C(""),y(""),u.oR.success("created successfully"),N(""),F(!1),D(!1),O(!1),ue(),se(),he(),h([]),G(!1)}catch(a){G(!1),console.error("Error creating compliance:",a)}})(e,f)},children:(0,A.jsxs)("div",{className:"row",children:[(0,A.jsxs)("div",{className:" row rounded-3 p-2 mb-3",style:{background:"#ffd3b624"},children:[K?null:(0,A.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,A.jsx)("h6",{htmlFor:"category",children:"Category * :"}),(0,A.jsxs)("select",{className:"form-control",id:"category",value:q||"",onChange:e=>{const t=e.target.value;_(t);const s=p.find(e=>e.id===parseInt(t));S(s?s.title:"")},children:[(0,A.jsx)("option",{value:"",children:"Select Category"}),p.map(e=>(0,A.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,A.jsxs)("div",{className:"form-group col-6",children:[(0,A.jsx)("h6",{htmlFor:"questionType",children:"Question Type *:"}),(0,A.jsxs)("select",{className:"form-control",id:"questionType",value:f,onChange:e=>{y(e.target.value),(e=>{"YesNo"===e.target.value?h([{text:"Yes",correct:!1,risk:!1,riskText:"",score:0},{text:"No",correct:!1,risk:!1,riskText:"",score:0}]):"YesNONa"===e.target.value?h([{text:"Yes",correct:!1,risk:!1,riskText:"",score:0},{text:"No",correct:!1,risk:!1,riskText:"",score:0},{text:"NA",correct:!1,risk:!1,riskText:"",score:0}]):"mcq"===e.target.value||"CheckBox"===e.target.value?h([{text:"",correct:!1,risk:!1,riskText:""}]):"Number"===e.target.value?h([{text:"Minimum",value:0,risk:!1,riskText:"",score:0},{text:"Maximum",value:0,risk:!1,riskText:"",score:0}]):"Long"===e.target.value||"Short"===e.target.value?h([{text:"Long",risk:!1,riskText:"",score:0}]):h([{text:"",risk:!1,riskText:"",score:0}])})(e)},children:[(0,A.jsx)("option",{value:"",children:"Select Question Type *"}),(0,A.jsx)("option",{value:"YesNONa",children:"Yes No Na"}),(0,A.jsx)("option",{value:"YesNo",children:"Yes No"}),(0,A.jsx)("option",{value:"mcq",children:"Multiple Choice"}),(0,A.jsx)("option",{value:"CheckBox",children:"Check Box"}),(0,A.jsx)("option",{value:"Number",children:"Number"}),(0,A.jsx)("option",{value:"Long",children:"Long Text"}),(0,A.jsx)("option",{value:"Short",children:"Short Text"}),(0,A.jsx)("option",{value:"Date",children:"Date"}),(0,A.jsx)("option",{value:"Time",children:"Time"}),(0,A.jsx)("option",{value:"Upload",children:"Upload"}),(0,A.jsx)("option",{value:"Signature",children:"Signature"})]})]}),(0,A.jsxs)("div",{className:"form-group col-12 mb-3",children:[(0,A.jsx)("h6",{htmlFor:"text",children:"Question * :"}),(0,A.jsx)(ae.A,{content:k,setContent:C,placeholder:"Content goes here..."})]}),(0,A.jsxs)("div",{className:"form-group col-12 mb-4",children:[(0,A.jsx)("h6",{htmlFor:"description",children:"Description:"}),(0,A.jsx)(ae.A,{content:v,setContent:j,placeholder:"Content goes here..."})]}),(0,A.jsxs)("div",{className:"col-7 mt-3 mb-3",children:[(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-primary btn-sm mb-3",onClick:e=>{e.preventDefault(),document.getElementById("img").click()},children:"Upload Image"}),(0,A.jsx)("input",{type:"file",id:"img",name:"files[]",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:e=>{ie.DX.post("/admin/temp",{img:e.target.files[0]}).then(e=>{var t,s;W(null===(t=e.data)||void 0===t||null===(s=t.file)||void 0===s?void 0:s.Location)}).catch(e=>console.log(e));const t=e.target.files[0],s=URL.createObjectURL(t);X((0,n.A)((0,n.A)({},H),{},{file:t,name:t.name,link:s}))}}),U&&(0,A.jsx)(o.A,{children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,A.jsxs)("div",{style:{overflow:"hidden",height:"53px"},className:"d-flex justify-content-around",children:[(0,A.jsx)("img",{src:U,alt:H.name,style:{height:"50px"}}),(0,A.jsx)("p",{style:{margin:"0 0 0 12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"350px"},children:(null===H||void 0===H||null===(e=H.name)||void 0===e?void 0:e.length)>28?"".concat(H.name.substring(0,28),"..."):H.name})]}),(0,A.jsx)("div",{children:(0,A.jsx)("button",{style:{},className:"ml-3 px-2 py-1  btn btn-outline-danger btn-sm",onClick:e=>{e.preventDefault(),W("")},children:"Delete"})})]})})})]})]}),(0,A.jsxs)("div",{className:"card mb-4 border-0 rounded-3",style:{background:"#0003ff14"},children:[(0,A.jsx)("h6",{className:"mb-2 mt-3",children:"Add Canvas Modal :"}),(0,A.jsx)("div",{className:"form-group card-body ",children:(0,A.jsxs)("div",{children:[ee.map((e,t)=>(0,A.jsx)(o.A,{className:"mb-4",children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"row",children:[(0,A.jsxs)("div",{className:"col-6 mb-4",children:[(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-primary btn-sm",onClick:e=>((e,t)=>{t.preventDefault(),document.getElementById("img".concat(e,"jod")).click()})(t,e),children:"upload image"}),(0,A.jsx)("input",{type:"file",id:"img".concat(t,"jod"),name:"files[]",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:e=>{(async(e,t)=>{const s=t.target.files[0];try{var i,a;const t=await ie.DX.post("/admin/temp",{img:s}),o=[...ee];o[e]=(0,n.A)((0,n.A)({},o[e]),{},{img:null===(i=t.data)||void 0===i||null===(a=i.file)||void 0===a?void 0:a.Location}),te(o)}catch(o){console.log(o)}})(t,e)}})]}),ee[t].img&&(0,A.jsx)("div",{className:"col-6",children:(0,A.jsx)("img",{src:ee[t].img,alt:"img"})}),(0,A.jsx)("div",{className:"col-12 mb-4",children:(0,A.jsx)("textarea",{className:"form-control",name:"description",value:e.description,onChange:e=>((e,t)=>{const{name:s,value:i}=t.target,a=[...ee];a[e]=(0,n.A)((0,n.A)({},a[e]),{},{[s]:i}),te(a)})(t,e),style:{resize:"none"}})}),(0,A.jsx)("div",{className:"col-5",children:ee.length>1&&(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-danger btn-sm",variant:"danger",onClick:e=>{e.preventDefault(),(e=>{const t=[...ee];t.splice(e,1),te(t)})(t)},children:"Remove"})})]},t)})})),(0,A.jsx)("button",{className:"btn px-2 py-1 btn-outline-success btn-sm",onClick:e=>{e.preventDefault(),te([...ee,{img:"",description:""}])},children:"Add More"})]})})]}),(0,A.jsx)("div",{className:"card border-0 rounded-3 mb-3",style:{background:"#ff8a8a33"},children:(0,A.jsx)("div",{className:"card-body",children:(0,A.jsxs)("div",{className:" mt-4 d-flex justify-content-around align-item-center form-group col-12 ",children:[(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{style:{transform:"scale(0.8)"},id:"toggleSwitch",checked:T,onChange:()=>O(!T)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Mandatory Question"})]}),(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{id:"toggleSwitch",checked:M,onChange:()=>D(!M)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Comment Required"})]}),(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{id:"toggleSwitch",checked:B,onChange:()=>F(!B)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Image Required"})]}),(0,A.jsxs)("div",{style:{transform:"scale(0.8)"},children:[(0,A.jsx)($.A,{id:"toggleSwitch",checked:Y,onChange:()=>I(!Y)}),(0,A.jsx)("span",{className:"d-block",htmlFor:"toggleSwitch",children:"Files Required"})]}),(0,A.jsxs)("div",{className:"col-6 d-flex",children:[B?(0,A.jsx)("input",{type:"Number",className:"form-control",id:"maxFile",placeholder:"Max Image",value:L,onChange:e=>z(e.target.value)}):null,Y?(0,A.jsx)("input",{type:"Number",className:"form-control",id:"maxFile",placeholder:"Max File",value:Q,onChange:e=>P(e.target.value)}):null]})]})})}),f&&"mcq"===f||f&&"CheckBox"===f?(0,A.jsxs)("div",{className:"form-group col-12",children:[(0,A.jsx)("h6",{children:"Options:"}),s.map((e,t)=>(0,A.jsx)(o.A,{className:"mb-3",style:{background:"#f1f1ff"},children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"row align-items-center",children:[(0,A.jsx)("div",{className:"col-8",children:(0,A.jsx)("input",{placeholder:"Enter Options",className:"form-control mb-3",type:"text",value:e.text,onChange:e=>ne(t,e.target.value)})}),(0,A.jsx)("div",{className:"col-1 ",children:(0,A.jsxs)("label",{children:[(0,A.jsx)(l.A.Check,{type:"checkbox",checked:e.correct,onChange:e=>de(t,e.target.checked)}),"Correct"]})}),(0,A.jsx)("div",{className:"col-3",children:(0,A.jsx)("input",{className:"form-control mb-3",placeholder:"Enter Score",type:"number",value:e.score,onChange:e=>le(t,e.target.value)})}),(0,A.jsx)("div",{className:"col-8",children:(0,A.jsx)("textarea",{style:{height:"45px"},className:"form-control mb-3",id:"description",rows:"5",placeholder:"Enter Risk",value:e.riskText,onChange:e=>ce(t,e.target.value)})}),t>0?(0,A.jsx)("div",{className:"col-1",children:(0,A.jsx)("button",{className:"btn btn-sm btn-primary",type:"button",onClick:()=>(e=>{const t=[...s];t.splice(e,1),h(t)})(t),children:"Remove"})}):null]},t)})})),(0,A.jsx)("button",{className:"btn btn-sm btn-primary mt-2 mb-3",type:"button",onClick:()=>{s.length>0&&""===s[s.length-1].text||h([...s,{text:"",correct:!1}])},children:"Add Option"})]}):f&&"YesNo"===f||f&&"YesNONa"===f?(0,A.jsxs)("div",{className:"col-12",children:[(0,A.jsx)("h6",{children:"Options:"}),s.length>0?s.map((e,t)=>(0,A.jsx)(o.A,{className:"mb-3",style:{background:"#f1f1ff"},children:(0,A.jsx)(o.A.Body,{children:(0,A.jsxs)("div",{className:"row",children:[(0,A.jsx)("div",{className:"col-8",children:(0,A.jsx)("input",{className:"form-control",readOnly:!0,type:"text",value:e.text,onChange:e=>ne(t,e.target.value)})}),(0,A.jsx)("div",{className:"col-1 ",children:(0,A.jsxs)("label",{children:[(0,A.jsx)(l.A.Check,{type:"checkbox",checked:e.correct,onChange:e=>de(t,e.target.checked)}),"Correct"]})}),(0,A.jsx)("div",{className:"col-3 mb-3",children:(0,A.jsx)("input",{className:"form-control",type:"number",placeholder:"Enter Score",value:e.score,onChange:e=>{le(t,e.target.value)}})}),(0,A.jsx)("div",{className:"col-12 ",children:(0,A.jsx)("textarea",{style:{height:"45px"},className:"form-control",id:"description",rows:"3",placeholder:"Enter Risk",value:e.riskText,onChange:e=>ce(t,e.target.value)})})]})})})):null]}):f&&"Number"===f?(0,A.jsx)("div",{className:"col-12",children:(0,A.jsx)(o.A,{children:(0,A.jsxs)(o.A.Body,{children:[(0,A.jsx)("div",{children:(0,A.jsx)("h5",{children:"Data Validation"})}),(0,A.jsxs)("div",{className:"row justify-content-between",children:[(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Minimum Number",className:"mb-3",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Minimum Number",onChange:e=>{re(0,e.target.value)}})})}),(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Maximum Number",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Maximum Number",onChange:e=>re(1,e.target.value)})})}),(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Score",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Score",onChange:e=>{le(0,e.target.value),le(1,e.target.value)}})})})]})]})})}):f&&"Long"===f||f&&"Short"===f||f&&"Signature"===f?(0,A.jsx)("div",{className:"row mb-3",children:(0,A.jsx)("div",{className:"col-5",children:(0,A.jsx)(r.A,{label:"Score",children:(0,A.jsx)(l.A.Control,{type:"number",placeholder:"Score",onChange:e=>{le(0,e.target.value)}})})})}):null,(0,A.jsxs)("div",{className:"form p-2 group col-12 rounded-3 border-0 ",style:{background:"#d3d3d34a"},children:[(0,A.jsx)("h6",{htmlFor:"hint",children:"Hint:"}),(0,A.jsx)(ae.A,{content:b,setContent:N,placeholder:"Content goes here..."})]}),(0,A.jsx)("br",{}),(0,A.jsx)("br",{}),(0,A.jsx)("div",{className:"col-9"}),(0,A.jsx)("button",{type:"submit ",className:"btn btn-sm btn-success mt-4 col-3",children:"Submit"})]})})}),J&&(0,A.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999},className:"loader-overlay",children:(0,A.jsx)(c.A,{animation:"border",variant:"primary"})})]})]})]})}}}]);
//# sourceMappingURL=9037.5bdf7cfb.chunk.js.map