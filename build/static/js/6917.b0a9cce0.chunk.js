"use strict";(self.webpackChunksafeinschool_client=self.webpackChunksafeinschool_client||[]).push([[6917],{36917:(e,t,l)=>{l.r(t),l.d(t,{default:()=>y});var s=l(89379),i=l(67784),a=l(81045),d=l(72949),o=l(45543),n=l(20648),c=l(85595),u=l(65324),r=l(86178),h=l.n(r),m=l(65043),v=l(30064),x=l.n(v),j=l(14282),p=l(72557),g=l(70579);const y=function(){var e,t;const[l,r]=(0,m.useState)(),[v,y]=(0,m.useState)(0),[N,f]=(0,m.useState)(0),[b,C]=(0,m.useState)(1);let[q,A]=(0,m.useState)(""),[w,B]=(0,m.useState)(),[S,z]=(0,m.useState)(),[Q,W]=(0,m.useState)(),[k,T]=(0,m.useState)(),[E,V]=(0,m.useState)(),{adminRoles:D}=(0,c.SF)();const[F,R]=(0,m.useState)({add:!1,edit:!1}),H=e=>{R("add"===e?(0,s.A)((0,s.A)({},F),{},{add:!F.add}):(0,s.A)((0,s.A)({},F),{},{edit:!F.edit}))},I=(0,n.Wx)({initialValues:{title:"",quote:"",quoteBy:""},onSubmit:async(e,t)=>{console.log("Values: ",e);const l=new FormData;l.append("title",e.title),l.append("quote",e.quote),l.append("quoteBy",e.quoteBy),l.append("img",q),console.log(l);try{const e=await o.DX.post("admin/quotes",l);200!==e.status&&1!==(null===e||void 0===e?void 0:e.success)||(console.log("Create Quote Reszponse: ",e),(0,u.z)("success","Added Successfully",void 0,2e3),y(v+1),H("add"))}catch(s){(0,u.z)("error",s.response.data.message)}}}),P=(0,n.Wx)({initialValues:{edittitle:w||"",editquote:S||"",editquoteBy:k||"",editid:E||""},enableReinitialize:!0,onSubmit:async(e,t)=>{console.log("Values: ",e);try{const t=await o.DX.put("admin/quotes",{id:e.editid,title:e.edittitle,quote:e.editquote,img:Q,quoteBy:e.editquoteBy});200!==t.status&&1!==(null===t||void 0===t?void 0:t.success)||(y(v+1),(0,u.z)("success",t.data.message,void 0,2e3),H("edit"))}catch(l){(0,u.z)("error",l.response.data.message)}}});return(0,m.useEffect)(()=>{(async()=>{console.log("Fetching Quites Data ");try{const e=await o.TR.get("admin/quotes?limit=".concat(b,"&offset=").concat(N));200===e.status&&r(null===e||void 0===e?void 0:e.data)}catch(e){(0,u.z)("error",e.response.data.message)}})()},[v,b,N]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,g.jsx)("h4",{children:"Manage Quotes"}),(0,g.jsx)(j.A,{variant:"primary",size:"sm",onClick:()=>H("add"),children:"Add Quote"})]}),(0,g.jsx)(p.A,{show:F.add,onHide:()=>H("add"),children:(0,g.jsxs)("form",{hidden:!(1===D()),onSubmit:I.handleSubmit,className:"container ms-0",style:{maxWidth:"550px"},children:[(0,g.jsx)(p.A.Header,{closeButton:!0,children:(0,g.jsx)("h4",{children:"Add Quote"})}),(0,g.jsxs)("div",{className:"row row-cols-1",children:[(0,g.jsx)("div",{className:"col",children:(0,g.jsx)(i.A,{className:"mt-2",fullWidth:!0,type:"text",name:"title",id:"quoteTitle",label:"Title",value:I.values.title,onChange:I.handleChange})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)(i.A,{fullWidth:!0,className:"mt-2",type:"text",name:"quote",multiline:!0,rows:4,label:"Quote",value:I.values.quote,onChange:I.handleChange})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsxs)(j.A,{variant:"outline",className:"text-start mt-2 w-100",children:[(0,g.jsx)("input",{type:"file",accept:".png, .jpg, .jpeg",onChange:e=>A(e.target.files[0])})," "]})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)(i.A,{className:"mt-2",fullWidth:!0,type:"text",name:"quoteBy",id:"quoteby",label:"QuoteBy",value:I.values.quoteBy,onChange:I.handleChange})}),(0,g.jsx)("div",{className:"col-12 d-flex justify-content-center my-3",children:(0,g.jsx)(j.A,{className:"text-capitalize p-3",variant:"outline-success",type:"submit",size:"sm",children:"Add"})})]})]})}),(0,g.jsx)(p.A,{show:F.edit,onHide:()=>H("edit"),children:(0,g.jsxs)("form",{onSubmit:P.handleSubmit,className:"container ms-0",style:{maxWidth:"550px"},children:[(0,g.jsx)(p.A.Header,{closeButton:!0,children:(0,g.jsx)("h4",{children:"Edit Quote"})}),(0,g.jsx)("div",{className:"row row-cols-1"}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)("input",{className:"m-2",type:"hidden",name:"editid",placeholder:"id",value:P.values.editId,onChange:P.handleChange,defaultValue:E,disabled:!0})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)(i.A,{fullWidth:!0,className:"mt-2",type:"text",name:"edittitle",id:"editquoteTitle",placeholder:"Edit Title",value:P.values.editTitle,onChange:P.handleChange,defaultValue:w})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)(i.A,{fullWidth:!0,multiline:!0,rows:5,className:"mt-2",type:"text",name:"editquote",id:"editquote",placeholder:"Edit Quote",value:P.values.editQuote,onChange:P.handleChange,defaultValue:S})}),(0,g.jsx)("div",{className:"col mt-2",children:(0,g.jsx)(j.A,{className:"w-100",variant:"outline",children:(0,g.jsx)("input",{fullWidth:!0,className:"mt-2",type:"file",placeholder:"Edit Image",onChange:e=>W(e.target.files[0])})})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)(i.A,{fullWidth:!0,className:"mt-2",type:"text",name:"editquoteBy",id:"editquoteby",placeholder:"Edit QuoteBy",value:P.values.editQuoteBy,onChange:P.handleChange,defaultValue:k})}),(0,g.jsx)("div",{className:"col-12 d-flex justify-content-center my-3",children:(0,g.jsx)(j.A,{className:"text-capitalize p-3",variant:"outline-success",type:"submit",size:"sm",children:"Edit"})})]})}),(0,g.jsx)("br",{}),(0,g.jsxs)("div",{className:"table-responsive border pb-0",children:[(0,g.jsxs)("table",{className:"table designed-table ",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{scope:"col",children:"#"}),(0,g.jsx)("th",{scope:"col",children:"Id"}),(0,g.jsx)("th",{scope:"col",children:"Title"}),(0,g.jsx)("th",{scope:"col",children:"Quote"}),(0,g.jsx)("th",{scope:"col",children:"Created"}),(0,g.jsx)("th",{scope:"col",children:"Quote By"}),(0,g.jsx)("th",{hidden:5===D(),scope:"col",children:"Actions"})]})}),(0,g.jsx)("tbody",{children:null===l||void 0===l||null===(e=l.result)||void 0===e?void 0:e.map((e,t)=>{var l;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(0,g.jsx)(a.A,{src:null===e||void 0===e?void 0:e.img,alt:"",style:{objectPosition:"top"}})}),(0,g.jsx)("td",{scope:"row",children:null===e||void 0===e?void 0:e.id}),(0,g.jsx)("td",{children:null===e||void 0===e?void 0:e.title}),(0,g.jsxs)("td",{children:[null===e||void 0===e||null===(l=e.quote)||void 0===l?void 0:l.slice(0,20),"..."]}),(0,g.jsx)("td",{children:h()(null===e||void 0===e?void 0:e.created_at).fromNow()}),(0,g.jsx)("td",{children:null===e||void 0===e?void 0:e.quoteBy}),(0,g.jsxs)("td",{hidden:5===D(),children:[(0,g.jsx)(j.A,{type:"button",onClick:()=>{H("edit"),B(null===e||void 0===e?void 0:e.title),z(null===e||void 0===e?void 0:e.quote),W(null===e||void 0===e?void 0:e.img),T(null===e||void 0===e?void 0:e.quoteBy),V(null===e||void 0===e?void 0:e.id)},children:"Edit"}),(0,g.jsx)(j.A,{hidden:3===D(),variant:"outlined",color:"error",type:"button",onClick:()=>{(async e=>{console.log(e),x().fire({title:"Are you sure?",text:"You wanted to delete this student!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async t=>{if(console.log(t),t.isConfirmed){console.log(t);try{const t=await o.TR.delete("/admin/quotes?id="+e);200===t.status&&(y(v+1),x().fire({title:t.data.message,icon:"success"}))}catch(d){var l,s,i,a;x().fire({width:400,title:null!==d&&void 0!==d&&null!==(l=d.response)&&void 0!==l&&null!==(s=l.data)&&void 0!==s&&s.message?null===d||void 0===d||null===(i=d.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message:"Something Went Wrong Check  your Network Connection",icon:"error"})}}})})(null===e||void 0===e?void 0:e.id)},className:"ms-2 border",children:"Delete"})]})]},t)})})})]}),(0,g.jsx)("div",{className:"bg-light p-3",children:(0,g.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,g.jsxs)("span",{className:"text-dark",children:["Showing ",null===l||void 0===l||null===(t=l.result)||void 0===t?void 0:t.length," out of ",null===l||void 0===l?void 0:l.count]}),(0,g.jsxs)("div",{className:"d-flex align-items-center",children:[(0,g.jsxs)("select",{name:"limit",className:"form-select",onChange:e=>C(e.target.value),children:[(0,g.jsx)("option",{value:"5",children:"5"}),(0,g.jsx)("option",{value:"10",children:"10"}),(0,g.jsx)("option",{value:"15",children:"15"}),(0,g.jsx)("option",{value:"20",children:"20"}),(0,g.jsx)("option",{value:"25",children:"25"}),(0,g.jsx)("option",{value:"30",children:"30"})]}),(0,g.jsx)(j.A,{size:"sm",variant:"outline-primary",disabled:Number(N)<Number(b),onClick:()=>{let e=Number(N)-Number(b);console.log(e),e>0?(f(e),console.log("Pagination to prev page "+N)):f(0)},className:"text-capitalize h-100 mx-2",children:"prev"}),(0,g.jsx)(d.A,{children:N?N/b+1:1}),(0,g.jsx)(j.A,{size:"sm",onClick:()=>{let e=Number(N)+Number(b);console.log(e),e<(null===l||void 0===l?void 0:l.count)&&(f(e),console.log("Pagination to next page "+N))},disabled:Number(N)+Number(b)+1>(null===l||void 0===l?void 0:l.count),variant:"outline-primary",className:"text-capitalize h-100 ms-2",children:"next"})]})]})})]})]})}}}]);
//# sourceMappingURL=6917.b0a9cce0.chunk.js.map